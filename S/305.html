<html>
<head>
<title>deps/lua/src/llex.c</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.7.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/387.html'>deps</a>/<a href='../files/398.html'>lua</a>/<a href='../files/400.html'>src</a>/llex.c</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L51'>[^]</a><a href='#L457'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L51' title='Defined at 51.'>save</a>
<li><a href='#L64' title='Defined at 64.'>luaX_init</a>
<li><a href='#L78' title='Defined at 78.'>luaX_token2str</a>
<li><a href='#L89' title='Defined at 89.'>txtToken</a>
<li><a href='#L102' title='Defined at 102.'>luaX_lexerror</a>
<li><a href='#L112' title='Defined at 112.'>luaX_syntaxerror</a>
<li><a href='#L117' title='Defined at 117.'>luaX_newstring</a>
<li><a href='#L127' title='Defined at 127.'>inclinenumber</a>
<li><a href='#L138' title='Defined at 138.'>luaX_setinput</a>
<li><a href='#L161' title='Defined at 161.'>check_next</a>
<li><a href='#L169' title='Defined at 169.'>buffreplace</a>
<li><a href='#L177' title='Defined at 177.'>trydecpoint</a>
<li><a href='#L192' title='Defined at 192.'>read_numeral</a>
<li><a href='#L208' title='Defined at 208.'>skip_sep</a>
<li><a href='#L221' title='Defined at 221.'>read_long_string</a>
<li><a href='#L276' title='Defined at 276.'>read_string</a>
<li><a href='#L332' title='Defined at 332.'>llex</a>
<li><a href='#L446' title='Defined at 446.'>luaX_next</a>
<li><a href='#L457' title='Defined at 457.'>luaX_lookahead</a>
</ol>
<hr>
<pre>
<a name='L1'><i><font color='green'>/*</font></i>
<a name='L2'><i><font color='green'>** $Id: llex.c,v 2.20.1.1 2007/12/27 13:02:25 roberto Exp $</font></i>
<a name='L3'><i><font color='green'>** Lexical Analyzer</font></i>
<a name='L4'><i><font color='green'>** See Copyright Notice in lua.h</font></i>
<a name='L5'><i><font color='green'>*/</font></i>
<a name='L6'>
<a name='L7'>
<a name='L8'><font color='darkred'>#include</font> &lt;ctype.h&gt;
<a name='L9'><font color='darkred'>#include</font> &lt;locale.h&gt;
<a name='L10'><font color='darkred'>#include</font> &lt;string.h&gt;
<a name='L11'>
<a name='L12'><font color='darkred'>#define</font> llex_c
<a name='L13'><font color='darkred'>#define</font> <a href='../R/303.html' title='Multiple refered from 2 places.'>LUA_CORE</a>
<a name='L14'>
<a name='L15'><font color='darkred'>#include</font> "<a href='266.html'>lua.h</a>"
<a name='L16'>
<a name='L17'><font color='darkred'>#include</font> "<a href='296.html'>ldo.h</a>"
<a name='L18'><font color='darkred'>#include</font> "<a href='292.html'>llex.h</a>"
<a name='L19'><font color='darkred'>#include</font> "<a href='282.html'>lobject.h</a>"
<a name='L20'><font color='darkred'>#include</font> "<a href='286.html'>lparser.h</a>"
<a name='L21'><font color='darkred'>#include</font> "<a href='298.html'>lstate.h</a>"
<a name='L22'><font color='darkred'>#include</font> "<a href='268.html'>lstring.h</a>"
<a name='L23'><font color='darkred'>#include</font> "<a href='281.html'>ltable.h</a>"
<a name='L24'><font color='darkred'>#include</font> "<a href='312.html'>lzio.h</a>"
<a name='L25'>
<a name='L26'>
<a name='L27'>
<a name='L28'><font color='darkred'>#define</font> <a href='../R/3071.html' title='Multiple refered from 178 places.'>next</a>(ls) (ls-&gt;current = <a href='../S/312.html#L22' title='Defined at 22 in deps/lua/src/lzio.h.'>zgetc</a>(ls-&gt;z))
<a name='L29'>
<a name='L30'>
<a name='L31'>
<a name='L32'>
<a name='L33'><font color='darkred'>#define</font> <a href='../R/1749.html' title='Multiple refered from 5 places.'>currIsNewline</a>(ls)       (ls-&gt;current == '\n' || ls-&gt;current == '\r')
<a name='L34'>
<a name='L35'>
<a name='L36'><i><font color='green'>/* ORDER RESERVED */</font></i>
<a name='L37'><b>const</b> <b>char</b> *<b>const</b> luaX_tokens [] = <font color='red'>{</font>
<a name='L38'>    "and", "break", "do", "else", "elseif",
<a name='L39'>    "end", "false", "for", "function", "if",
<a name='L40'>    "in", "local", "nil", "not", "or", "repeat",
<a name='L41'>    "return", "then", "true", "until", "while",
<a name='L42'>    "..", "...", "==", "&gt;=", "&lt;=", "~=",
<a name='L43'>    "&lt;number&gt;", "&lt;name&gt;", "&lt;string&gt;", "&lt;eof&gt;",
<a name='L44'>    NULL
<a name='L45'><font color='red'>}</font>;
<a name='L46'>
<a name='L47'>
<a name='L48'><font color='darkred'>#define</font> <a href='../R/3603.html' title='Multiple refered from 15 places.'>save_and_next</a>(ls) (<a href='../S/305.html#L51' title='Defined at 51 in deps/lua/src/llex.c.'>save</a>(ls, ls-&gt;current), <a href='../D/3419.html' title='Multiple defined in 2 places.'>next</a>(ls))
<a name='L49'>
<a name='L50'>
<a name='L51'><b>static</b> <b>void</b> <a href='../R/3601.html' title='Multiple refered from 9 places.'>save</a> (LexState *ls, <b>int</b> c) <font color='red'>{</font>
<a name='L52'>  <a href='../D/512.html' title='Multiple defined in 2 places.'>Mbuffer</a> *b = ls-&gt;buff;
<a name='L53'>  <b>if</b> (b-&gt;n + 1 &gt; b-&gt;buffsize) <font color='red'>{</font>
<a name='L54'>    size_t newsize;
<a name='L55'>    <b>if</b> (b-&gt;buffsize &gt;= <a href='../S/310.html#L30' title='Defined at 30 in deps/lua/src/llimits.h.'>MAX_SIZET</a>/2)
<a name='L56'>      <a href='../S/305.html#L102' title='Defined at 102 in deps/lua/src/llex.c.'>luaX_lexerror</a>(ls, "lexical element too long", 0);
<a name='L57'>    newsize = b-&gt;buffsize * 2;
<a name='L58'>    <a href='../S/312.html#L39' title='Defined at 39 in deps/lua/src/lzio.h.'>luaZ_resizebuffer</a>(ls-&gt;L, b, newsize);
<a name='L59'>  <font color='red'>}</font>
<a name='L60'>  b-&gt;buffer[b-&gt;n++] = <a href='../S/310.html#L75' title='Defined at 75 in deps/lua/src/llimits.h.'>cast</a>(<b>char</b>, c);
<a name='L61'><font color='red'>}</font>
<a name='L62'>
<a name='L63'>
<a name='L64'><b>void</b> <a href='../R/2729.html' title='Multiple refered from 2 places.'>luaX_init</a> (lua_State *L) <font color='red'>{</font>
<a name='L65'>  <b>int</b> i;
<a name='L66'>  <b>for</b> (i=0; i&lt;<a href='../S/292.html#L36' title='Defined at 36 in deps/lua/src/llex.h.'>NUM_RESERVED</a>; i++) <font color='red'>{</font>
<a name='L67'>    <a href='../D/1215.html' title='Multiple defined in 2 places.'>TString</a> *ts = <a href='../S/268.html#L20' title='Defined at 20 in deps/lua/src/lstring.h.'>luaS_new</a>(L, luaX_tokens[i]);
<a name='L68'>    <a href='../S/268.html#L24' title='Defined at 24 in deps/lua/src/lstring.h.'>luaS_fix</a>(ts);  <i><font color='green'>/* reserved words are never collected */</font></i>
<a name='L69'>    <a href='../D/3090.html' title='Multiple defined in 2 places.'>lua_assert</a>(strlen(luaX_tokens[i])+1 &lt;= <a href='../S/292.html#L17' title='Defined at 17 in deps/lua/src/llex.h.'>TOKEN_LEN</a>);
<a name='L70'>    ts-&gt;tsv.reserved = <a href='../S/310.html#L78' title='Defined at 78 in deps/lua/src/llimits.h.'>cast_byte</a>(i+1);  <i><font color='green'>/* reserved word */</font></i>
<a name='L71'>  <font color='red'>}</font>
<a name='L72'><font color='red'>}</font>
<a name='L73'>
<a name='L74'>
<a name='L75'><font color='darkred'>#define</font> <a href='../R/440.html' title='Multiple refered from 2 places.'>MAXSRC</a>          80
<a name='L76'>
<a name='L77'>
<a name='L78'><b>const</b> <b>char</b> *<a href='../R/2736.html' title='Multiple refered from 4 places.'>luaX_token2str</a> (LexState *ls, <b>int</b> token) <font color='red'>{</font>
<a name='L79'>  <b>if</b> (token &lt; <a href='../D/150.html' title='Multiple defined in 2 places.'>FIRST_RESERVED</a>) <font color='red'>{</font>
<a name='L80'>    <a href='../D/3090.html' title='Multiple defined in 2 places.'>lua_assert</a>(token == <a href='../S/310.html#L75' title='Defined at 75 in deps/lua/src/llimits.h.'>cast</a>(<b>unsigned</b> <b>char</b>, token));
<a name='L81'>    <b>return</b> (iscntrl(token)) ? <a href='../S/311.html#L172' title='Defined at 172 in deps/lua/src/lobject.c.'>luaO_pushfstring</a>(ls-&gt;L, "char(%d)", token) :
<a name='L82'>                              <a href='../S/311.html#L172' title='Defined at 172 in deps/lua/src/lobject.c.'>luaO_pushfstring</a>(ls-&gt;L, "%c", token);
<a name='L83'>  <font color='red'>}</font>
<a name='L84'>  <b>else</b>
<a name='L85'>    <b>return</b> luaX_tokens[token-<a href='../D/150.html' title='Multiple defined in 2 places.'>FIRST_RESERVED</a>];
<a name='L86'><font color='red'>}</font>
<a name='L87'>
<a name='L88'>
<a name='L89'><b>static</b> <b>const</b> <b>char</b> *<a href='../S/305.html#L107' title='Refered from 107 in deps/lua/src/llex.c.'>txtToken</a> (LexState *ls, <b>int</b> token) <font color='red'>{</font>
<a name='L90'>  <b>switch</b> (token) <font color='red'>{</font>
<a name='L91'>    <b>case</b> <a href='../S/292.html#L32' title='Defined at 32 in deps/lua/src/llex.h.'>TK_NAME</a>:
<a name='L92'>    <b>case</b> <a href='../S/292.html#L32' title='Defined at 32 in deps/lua/src/llex.h.'>TK_STRING</a>:
<a name='L93'>    <b>case</b> <a href='../S/292.html#L31' title='Defined at 31 in deps/lua/src/llex.h.'>TK_NUMBER</a>:
<a name='L94'>      <a href='../S/305.html#L51' title='Defined at 51 in deps/lua/src/llex.c.'>save</a>(ls, '\0');
<a name='L95'>      <b>return</b> <a href='../S/312.html#L32' title='Defined at 32 in deps/lua/src/lzio.h.'>luaZ_buffer</a>(ls-&gt;buff);
<a name='L96'>    <b>default</b>:
<a name='L97'>      <b>return</b> <a href='../S/305.html#L78' title='Defined at 78 in deps/lua/src/llex.c.'>luaX_token2str</a>(ls, token);
<a name='L98'>  <font color='red'>}</font>
<a name='L99'><font color='red'>}</font>
<a name='L100'>
<a name='L101'>
<a name='L102'><b>void</b> <a href='../R/2730.html' title='Multiple refered from 12 places.'>luaX_lexerror</a> (LexState *ls, <b>const</b> <b>char</b> *msg, <b>int</b> token) <font color='red'>{</font>
<a name='L103'>  <b>char</b> buff[<a href='../S/305.html#L75' title='Defined at 75 in deps/lua/src/llex.c.'>MAXSRC</a>];
<a name='L104'>  <a href='../S/311.html#L182' title='Defined at 182 in deps/lua/src/lobject.c.'>luaO_chunkid</a>(buff, <a href='../S/282.html#L210' title='Defined at 210 in deps/lua/src/lobject.h.'>getstr</a>(ls-&gt;source), <a href='../S/305.html#L75' title='Defined at 75 in deps/lua/src/llex.c.'>MAXSRC</a>);
<a name='L105'>  msg = <a href='../S/311.html#L172' title='Defined at 172 in deps/lua/src/lobject.c.'>luaO_pushfstring</a>(ls-&gt;L, "%s:%d: %s", buff, ls-&gt;linenumber, msg);
<a name='L106'>  <b>if</b> (token)
<a name='L107'>    <a href='../S/311.html#L172' title='Defined at 172 in deps/lua/src/lobject.c.'>luaO_pushfstring</a>(ls-&gt;L, "%s near " <a href='../S/317.html#L202' title='Defined at 202 in deps/lua/src/luaconf.h.'>LUA_QS</a>, msg, <a href='../S/305.html#L89' title='Defined at 89 in deps/lua/src/llex.c.'>txtToken</a>(ls, token));
<a name='L108'>  <a href='../S/297.html#L94' title='Defined at 94 in deps/lua/src/ldo.c.'>luaD_throw</a>(ls-&gt;L, <a href='../S/266.html#L45' title='Defined at 45 in deps/lua/src/lua.h.'>LUA_ERRSYNTAX</a>);
<a name='L109'><font color='red'>}</font>
<a name='L110'>
<a name='L111'>
<a name='L112'><b>void</b> <a href='../R/2735.html' title='Multiple refered from 13 places.'>luaX_syntaxerror</a> (LexState *ls, <b>const</b> <b>char</b> *msg) <font color='red'>{</font>
<a name='L113'>  <a href='../S/305.html#L102' title='Defined at 102 in deps/lua/src/llex.c.'>luaX_lexerror</a>(ls, msg, ls-&gt;t.token);
<a name='L114'><font color='red'>}</font>
<a name='L115'>
<a name='L116'>
<a name='L117'><a href='../D/1215.html' title='Multiple defined in 2 places.'>TString</a> *<a href='../R/2732.html' title='Multiple refered from 6 places.'>luaX_newstring</a> (LexState *ls, <b>const</b> <b>char</b> *str, size_t l) <font color='red'>{</font>
<a name='L118'>  <a href='../D/3087.html' title='Multiple defined in 2 places.'>lua_State</a> *L = ls-&gt;L;
<a name='L119'>  <a href='../D/1215.html' title='Multiple defined in 2 places.'>TString</a> *ts = <a href='../S/284.html#L75' title='Defined at 75 in deps/lua/src/lstring.c.'>luaS_newlstr</a>(L, str, l);
<a name='L120'>  <a href='../S/282.html#L75' title='Defined at 75 in deps/lua/src/lobject.h.'>TValue</a> *o = <a href='../S/259.html#L520' title='Defined at 520 in deps/lua/src/ltable.c.'>luaH_setstr</a>(L, ls-&gt;fs-&gt;h, ts);  <i><font color='green'>/* entry for `str' */</font></i>
<a name='L121'>  <b>if</b> (<a href='../S/282.html#L79' title='Defined at 79 in deps/lua/src/lobject.h.'>ttisnil</a>(o))
<a name='L122'>    <a href='../S/282.html#L125' title='Defined at 125 in deps/lua/src/lobject.h.'>setbvalue</a>(o, 1);  <i><font color='green'>/* make sure `str' will not be collected */</font></i>
<a name='L123'>  <b>return</b> ts;
<a name='L124'><font color='red'>}</font>
<a name='L125'>
<a name='L126'>
<a name='L127'><b>static</b> <b>void</b> <a href='../R/2190.html' title='Multiple refered from 4 places.'>inclinenumber</a> (LexState *ls) <font color='red'>{</font>
<a name='L128'>  <b>int</b> old = ls-&gt;current;
<a name='L129'>  <a href='../D/3090.html' title='Multiple defined in 2 places.'>lua_assert</a>(<a href='../S/305.html#L33' title='Defined at 33 in deps/lua/src/llex.c.'>currIsNewline</a>(ls));
<a name='L130'>  <a href='../D/3419.html' title='Multiple defined in 2 places.'>next</a>(ls);  <i><font color='green'>/* skip `\n' or `\r' */</font></i>
<a name='L131'>  <b>if</b> (<a href='../S/305.html#L33' title='Defined at 33 in deps/lua/src/llex.c.'>currIsNewline</a>(ls) &amp;&amp; ls-&gt;current != old)
<a name='L132'>    <a href='../D/3419.html' title='Multiple defined in 2 places.'>next</a>(ls);  <i><font color='green'>/* skip `\n\r' or `\r\n' */</font></i>
<a name='L133'>  <b>if</b> (++ls-&gt;linenumber &gt;= <a href='../S/310.html#L35' title='Defined at 35 in deps/lua/src/llimits.h.'>MAX_INT</a>)
<a name='L134'>    <a href='../S/305.html#L112' title='Defined at 112 in deps/lua/src/llex.c.'>luaX_syntaxerror</a>(ls, "chunk has too many lines");
<a name='L135'><font color='red'>}</font>
<a name='L136'>
<a name='L137'>
<a name='L138'><b>void</b> <a href='../R/2734.html' title='Multiple refered from 2 places.'>luaX_setinput</a> (lua_State *L, LexState *ls, <a href='../S/312.html#L18' title='Defined at 18 in deps/lua/src/lzio.h.'>ZIO</a> *z, TString *source) <font color='red'>{</font>
<a name='L139'>  ls-&gt;decpoint = '.';
<a name='L140'>  ls-&gt;L = L;
<a name='L141'>  ls-&gt;lookahead.token = <a href='../S/292.html#L32' title='Defined at 32 in deps/lua/src/llex.h.'>TK_EOS</a>;  <i><font color='green'>/* no look-ahead token */</font></i>
<a name='L142'>  ls-&gt;z = z;
<a name='L143'>  ls-&gt;fs = NULL;
<a name='L144'>  ls-&gt;linenumber = 1;
<a name='L145'>  ls-&gt;lastline = 1;
<a name='L146'>  ls-&gt;source = source;
<a name='L147'>  <a href='../S/312.html#L39' title='Defined at 39 in deps/lua/src/lzio.h.'>luaZ_resizebuffer</a>(ls-&gt;L, ls-&gt;buff, <a href='../S/310.html#L105' title='Defined at 105 in deps/lua/src/llimits.h.'>LUA_MINBUFFER</a>);  <i><font color='green'>/* initialize buffer */</font></i>
<a name='L148'>  <a href='../D/3419.html' title='Multiple defined in 2 places.'>next</a>(ls);  <i><font color='green'>/* read first char */</font></i>
<a name='L149'><font color='red'>}</font>
<a name='L150'>
<a name='L151'>
<a name='L152'>
<a name='L153'><i><font color='green'>/*</font></i>
<a name='L154'><i><font color='green'>** =======================================================</font></i>
<a name='L155'><i><font color='green'>** LEXICAL ANALYZER</font></i>
<a name='L156'><i><font color='green'>** =======================================================</font></i>
<a name='L157'><i><font color='green'>*/</font></i>
<a name='L158'>
<a name='L159'>
<a name='L160'>
<a name='L161'><b>static</b> <b>int</b> <a href='../R/1550.html' title='Multiple refered from 4 places.'>check_next</a> (LexState *ls, <b>const</b> <b>char</b> *set) <font color='red'>{</font>
<a name='L162'>  <b>if</b> (!strchr(set, ls-&gt;current))
<a name='L163'>    <b>return</b> 0;
<a name='L164'>  <a href='../S/305.html#L48' title='Defined at 48 in deps/lua/src/llex.c.'>save_and_next</a>(ls);
<a name='L165'>  <b>return</b> 1;
<a name='L166'><font color='red'>}</font>
<a name='L167'>
<a name='L168'>
<a name='L169'><b>static</b> <b>void</b> <a href='../R/1505.html' title='Multiple refered from 3 places.'>buffreplace</a> (LexState *ls, <b>char</b> from, <b>char</b> to) <font color='red'>{</font>
<a name='L170'>  size_t n = <a href='../S/312.html#L34' title='Defined at 34 in deps/lua/src/lzio.h.'>luaZ_bufflen</a>(ls-&gt;buff);
<a name='L171'>  <b>char</b> *p = <a href='../S/312.html#L32' title='Defined at 32 in deps/lua/src/lzio.h.'>luaZ_buffer</a>(ls-&gt;buff);
<a name='L172'>  <b>while</b> (n--)
<a name='L173'>    <b>if</b> (p[n] == from) p[n] = to;
<a name='L174'><font color='red'>}</font>
<a name='L175'>
<a name='L176'>
<a name='L177'><b>static</b> <b>void</b> <a href='../S/305.html#L204' title='Refered from 204 in deps/lua/src/llex.c.'>trydecpoint</a> (LexState *ls, SemInfo *seminfo) <font color='red'>{</font>
<a name='L178'>  <i><font color='green'>/* format error: try to update decimal point separator */</font></i>
<a name='L179'>  <b>struct</b> lconv *cv = localeconv();
<a name='L180'>  <b>char</b> old = ls-&gt;decpoint;
<a name='L181'>  ls-&gt;decpoint = (cv ? cv-&gt;decimal_point[0] : '.');
<a name='L182'>  <a href='../S/305.html#L169' title='Defined at 169 in deps/lua/src/llex.c.'>buffreplace</a>(ls, old, ls-&gt;decpoint);  <i><font color='green'>/* try updated decimal separator */</font></i>
<a name='L183'>  <b>if</b> (!<a href='../S/311.html#L90' title='Defined at 90 in deps/lua/src/lobject.c.'>luaO_str2d</a>(<a href='../S/312.html#L32' title='Defined at 32 in deps/lua/src/lzio.h.'>luaZ_buffer</a>(ls-&gt;buff), &amp;seminfo-&gt;r)) <font color='red'>{</font>
<a name='L184'>    <i><font color='green'>/* format error with correct decimal point: no more options */</font></i>
<a name='L185'>    <a href='../S/305.html#L169' title='Defined at 169 in deps/lua/src/llex.c.'>buffreplace</a>(ls, ls-&gt;decpoint, '.');  <i><font color='green'>/* undo change (for error message) */</font></i>
<a name='L186'>    <a href='../S/305.html#L102' title='Defined at 102 in deps/lua/src/llex.c.'>luaX_lexerror</a>(ls, "malformed number", <a href='../S/292.html#L31' title='Defined at 31 in deps/lua/src/llex.h.'>TK_NUMBER</a>);
<a name='L187'>  <font color='red'>}</font>
<a name='L188'><font color='red'>}</font>
<a name='L189'>
<a name='L190'>
<a name='L191'><i><font color='green'>/* LUA_NUMBER */</font></i>
<a name='L192'><b>static</b> <b>void</b> <a href='../R/3384.html' title='Multiple refered from 2 places.'>read_numeral</a> (LexState *ls, SemInfo *seminfo) <font color='red'>{</font>
<a name='L193'>  <a href='../D/3090.html' title='Multiple defined in 2 places.'>lua_assert</a>(isdigit(ls-&gt;current));
<a name='L194'>  <b>do</b> <font color='red'>{</font>
<a name='L195'>    <a href='../S/305.html#L48' title='Defined at 48 in deps/lua/src/llex.c.'>save_and_next</a>(ls);
<a name='L196'>  <font color='red'>}</font> <b>while</b> (isdigit(ls-&gt;current) || ls-&gt;current == '.');
<a name='L197'>  <b>if</b> (<a href='../S/305.html#L161' title='Defined at 161 in deps/lua/src/llex.c.'>check_next</a>(ls, "Ee"))  <i><font color='green'>/* `E'? */</font></i>
<a name='L198'>    <a href='../S/305.html#L161' title='Defined at 161 in deps/lua/src/llex.c.'>check_next</a>(ls, "+-");  <i><font color='green'>/* optional exponent sign */</font></i>
<a name='L199'>  <b>while</b> (isalnum(ls-&gt;current) || ls-&gt;current == '_')
<a name='L200'>    <a href='../S/305.html#L48' title='Defined at 48 in deps/lua/src/llex.c.'>save_and_next</a>(ls);
<a name='L201'>  <a href='../S/305.html#L51' title='Defined at 51 in deps/lua/src/llex.c.'>save</a>(ls, '\0');
<a name='L202'>  <a href='../S/305.html#L169' title='Defined at 169 in deps/lua/src/llex.c.'>buffreplace</a>(ls, '.', ls-&gt;decpoint);  <i><font color='green'>/* follow locale for decimal point */</font></i>
<a name='L203'>  <b>if</b> (!<a href='../S/311.html#L90' title='Defined at 90 in deps/lua/src/lobject.c.'>luaO_str2d</a>(<a href='../S/312.html#L32' title='Defined at 32 in deps/lua/src/lzio.h.'>luaZ_buffer</a>(ls-&gt;buff), &amp;seminfo-&gt;r))  <i><font color='green'>/* format error? */</font></i>
<a name='L204'>    <a href='../S/305.html#L177' title='Defined at 177 in deps/lua/src/llex.c.'>trydecpoint</a>(ls, seminfo); <i><font color='green'>/* try to update decimal point separator */</font></i>
<a name='L205'><font color='red'>}</font>
<a name='L206'>
<a name='L207'>
<a name='L208'><b>static</b> <b>int</b> <a href='../R/3810.html' title='Multiple refered from 4 places.'>skip_sep</a> (LexState *ls) <font color='red'>{</font>
<a name='L209'>  <b>int</b> count = 0;
<a name='L210'>  <b>int</b> s = ls-&gt;current;
<a name='L211'>  <a href='../D/3090.html' title='Multiple defined in 2 places.'>lua_assert</a>(s == '[' || s == ']');
<a name='L212'>  <a href='../S/305.html#L48' title='Defined at 48 in deps/lua/src/llex.c.'>save_and_next</a>(ls);
<a name='L213'>  <b>while</b> (ls-&gt;current == '=') <font color='red'>{</font>
<a name='L214'>    <a href='../S/305.html#L48' title='Defined at 48 in deps/lua/src/llex.c.'>save_and_next</a>(ls);
<a name='L215'>    count++;
<a name='L216'>  <font color='red'>}</font>
<a name='L217'>  <b>return</b> (ls-&gt;current == s) ? count : (-count) - 1;
<a name='L218'><font color='red'>}</font>
<a name='L219'>
<a name='L220'>
<a name='L221'><b>static</b> <b>void</b> <a href='../R/3382.html' title='Multiple refered from 2 places.'>read_long_string</a> (LexState *ls, SemInfo *seminfo, <b>int</b> sep) <font color='red'>{</font>
<a name='L222'>  <b>int</b> cont = 0;
<a name='L223'>  (<b>void</b>)(cont);  <i><font color='green'>/* avoid warnings when `cont' is not used */</font></i>
<a name='L224'>  <a href='../S/305.html#L48' title='Defined at 48 in deps/lua/src/llex.c.'>save_and_next</a>(ls);  <i><font color='green'>/* skip 2nd `[' */</font></i>
<a name='L225'>  <b>if</b> (<a href='../S/305.html#L33' title='Defined at 33 in deps/lua/src/llex.c.'>currIsNewline</a>(ls))  <i><font color='green'>/* string starts with a newline? */</font></i>
<a name='L226'>    <a href='../S/305.html#L127' title='Defined at 127 in deps/lua/src/llex.c.'>inclinenumber</a>(ls);  <i><font color='green'>/* skip it */</font></i>
<a name='L227'>  <b>for</b> (;;) <font color='red'>{</font>
<a name='L228'>    <b>switch</b> (ls-&gt;current) <font color='red'>{</font>
<a name='L229'>      <b>case</b> <a href='../S/312.html#L16' title='Defined at 16 in deps/lua/src/lzio.h.'>EOZ</a>:
<a name='L230'>        <a href='../S/305.html#L102' title='Defined at 102 in deps/lua/src/llex.c.'>luaX_lexerror</a>(ls, (seminfo) ? "unfinished long string" :
<a name='L231'>                                   "unfinished long comment", <a href='../S/292.html#L32' title='Defined at 32 in deps/lua/src/llex.h.'>TK_EOS</a>);
<a name='L232'>        <b>break</b>;  <i><font color='green'>/* to avoid warnings */</font></i>
<a name='L233'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/317.html#L351' title='Defined at 351 in deps/lua/src/luaconf.h.'>LUA_COMPAT_LSTR</a>)
<a name='L234'>      <b>case</b> '[': <font color='red'>{</font>
<a name='L235'>        <b>if</b> (<a href='../S/305.html#L208' title='Defined at 208 in deps/lua/src/llex.c.'>skip_sep</a>(ls) == sep) <font color='red'>{</font>
<a name='L236'>          <a href='../S/305.html#L48' title='Defined at 48 in deps/lua/src/llex.c.'>save_and_next</a>(ls);  <i><font color='green'>/* skip 2nd `[' */</font></i>
<a name='L237'>          cont++;
<a name='L238'><font color='darkred'>#if</font> <a href='../S/317.html#L351' title='Defined at 351 in deps/lua/src/luaconf.h.'>LUA_COMPAT_LSTR</a> == 1
<a name='L239'>          <b>if</b> (sep == 0)
<a name='L240'>            <a href='../S/305.html#L102' title='Defined at 102 in deps/lua/src/llex.c.'>luaX_lexerror</a>(ls, "nesting of [[...]] is deprecated", '[');
<a name='L241'><font color='darkred'>#endif</font>
<a name='L242'>        <font color='red'>}</font>
<a name='L243'>        <b>break</b>;
<a name='L244'>      <font color='red'>}</font>
<a name='L245'><font color='darkred'>#endif</font>
<a name='L246'>      <b>case</b> ']': <font color='red'>{</font>
<a name='L247'>        <b>if</b> (<a href='../S/305.html#L208' title='Defined at 208 in deps/lua/src/llex.c.'>skip_sep</a>(ls) == sep) <font color='red'>{</font>
<a name='L248'>          <a href='../S/305.html#L48' title='Defined at 48 in deps/lua/src/llex.c.'>save_and_next</a>(ls);  <i><font color='green'>/* skip 2nd `]' */</font></i>
<a name='L249'><font color='darkred'>#if</font> <b>defined</b>(<a href='../S/317.html#L351' title='Defined at 351 in deps/lua/src/luaconf.h.'>LUA_COMPAT_LSTR</a>) &amp;&amp; <a href='../S/317.html#L351' title='Defined at 351 in deps/lua/src/luaconf.h.'>LUA_COMPAT_LSTR</a> == 2
<a name='L250'>          cont--;
<a name='L251'>          <b>if</b> (sep == 0 &amp;&amp; cont &gt;= 0) <b>break</b>;
<a name='L252'><font color='darkred'>#endif</font>
<a name='L253'>          <b>goto</b> endloop;
<a name='L254'>        <font color='red'>}</font>
<a name='L255'>        <b>break</b>;
<a name='L256'>      <font color='red'>}</font>
<a name='L257'>      <b>case</b> '\n':
<a name='L258'>      <b>case</b> '\r': <font color='red'>{</font>
<a name='L259'>        <a href='../S/305.html#L51' title='Defined at 51 in deps/lua/src/llex.c.'>save</a>(ls, '\n');
<a name='L260'>        <a href='../S/305.html#L127' title='Defined at 127 in deps/lua/src/llex.c.'>inclinenumber</a>(ls);
<a name='L261'>        <b>if</b> (!seminfo) <a href='../S/312.html#L36' title='Defined at 36 in deps/lua/src/lzio.h.'>luaZ_resetbuffer</a>(ls-&gt;buff);  <i><font color='green'>/* avoid wasting space */</font></i>
<a name='L262'>        <b>break</b>;
<a name='L263'>      <font color='red'>}</font>
<a name='L264'>      <b>default</b>: <font color='red'>{</font>
<a name='L265'>        <b>if</b> (seminfo) <a href='../S/305.html#L48' title='Defined at 48 in deps/lua/src/llex.c.'>save_and_next</a>(ls);
<a name='L266'>        <b>else</b> <a href='../D/3419.html' title='Multiple defined in 2 places.'>next</a>(ls);
<a name='L267'>      <font color='red'>}</font>
<a name='L268'>    <font color='red'>}</font>
<a name='L269'>  <font color='red'>}</font> endloop:
<a name='L270'>  <b>if</b> (seminfo)
<a name='L271'>    seminfo-&gt;ts = <a href='../S/305.html#L117' title='Defined at 117 in deps/lua/src/llex.c.'>luaX_newstring</a>(ls, <a href='../S/312.html#L32' title='Defined at 32 in deps/lua/src/lzio.h.'>luaZ_buffer</a>(ls-&gt;buff) + (2 + sep),
<a name='L272'>                                     <a href='../S/312.html#L34' title='Defined at 34 in deps/lua/src/lzio.h.'>luaZ_bufflen</a>(ls-&gt;buff) - 2*(2 + sep));
<a name='L273'><font color='red'>}</font>
<a name='L274'>
<a name='L275'>
<a name='L276'><b>static</b> <b>void</b> <a href='../S/305.html#L391' title='Refered from 391 in deps/lua/src/llex.c.'>read_string</a> (LexState *ls, <b>int</b> del, SemInfo *seminfo) <font color='red'>{</font>
<a name='L277'>  <a href='../S/305.html#L48' title='Defined at 48 in deps/lua/src/llex.c.'>save_and_next</a>(ls);
<a name='L278'>  <b>while</b> (ls-&gt;current != del) <font color='red'>{</font>
<a name='L279'>    <b>switch</b> (ls-&gt;current) <font color='red'>{</font>
<a name='L280'>      <b>case</b> <a href='../S/312.html#L16' title='Defined at 16 in deps/lua/src/lzio.h.'>EOZ</a>:
<a name='L281'>        <a href='../S/305.html#L102' title='Defined at 102 in deps/lua/src/llex.c.'>luaX_lexerror</a>(ls, "unfinished string", <a href='../S/292.html#L32' title='Defined at 32 in deps/lua/src/llex.h.'>TK_EOS</a>);
<a name='L282'>        <b>continue</b>;  <i><font color='green'>/* to avoid warnings */</font></i>
<a name='L283'>      <b>case</b> '\n':
<a name='L284'>      <b>case</b> '\r':
<a name='L285'>        <a href='../S/305.html#L102' title='Defined at 102 in deps/lua/src/llex.c.'>luaX_lexerror</a>(ls, "unfinished string", <a href='../S/292.html#L32' title='Defined at 32 in deps/lua/src/llex.h.'>TK_STRING</a>);
<a name='L286'>        <b>continue</b>;  <i><font color='green'>/* to avoid warnings */</font></i>
<a name='L287'>      <b>case</b> '\\': <font color='red'>{</font>
<a name='L288'>        <b>int</b> c;
<a name='L289'>        <a href='../D/3419.html' title='Multiple defined in 2 places.'>next</a>(ls);  <i><font color='green'>/* do not save the `\' */</font></i>
<a name='L290'>        <b>switch</b> (ls-&gt;current) <font color='red'>{</font>
<a name='L291'>          <b>case</b> 'a': c = '\a'; <b>break</b>;
<a name='L292'>          <b>case</b> 'b': c = '\b'; <b>break</b>;
<a name='L293'>          <b>case</b> 'f': c = '\f'; <b>break</b>;
<a name='L294'>          <b>case</b> 'n': c = '\n'; <b>break</b>;
<a name='L295'>          <b>case</b> 'r': c = '\r'; <b>break</b>;
<a name='L296'>          <b>case</b> 't': c = '\t'; <b>break</b>;
<a name='L297'>          <b>case</b> 'v': c = '\v'; <b>break</b>;
<a name='L298'>          <b>case</b> '\n':  <i><font color='green'>/* go through */</font></i>
<a name='L299'>          <b>case</b> '\r': <a href='../S/305.html#L51' title='Defined at 51 in deps/lua/src/llex.c.'>save</a>(ls, '\n'); <a href='../S/305.html#L127' title='Defined at 127 in deps/lua/src/llex.c.'>inclinenumber</a>(ls); <b>continue</b>;
<a name='L300'>          <b>case</b> <a href='../S/312.html#L16' title='Defined at 16 in deps/lua/src/lzio.h.'>EOZ</a>: <b>continue</b>;  <i><font color='green'>/* will raise an error next loop */</font></i>
<a name='L301'>          <b>default</b>: <font color='red'>{</font>
<a name='L302'>            <b>if</b> (!isdigit(ls-&gt;current))
<a name='L303'>              <a href='../S/305.html#L48' title='Defined at 48 in deps/lua/src/llex.c.'>save_and_next</a>(ls);  <i><font color='green'>/* handles \\, \", \', and \? */</font></i>
<a name='L304'>            <b>else</b> <font color='red'>{</font>  <i><font color='green'>/* \xxx */</font></i>
<a name='L305'>              <b>int</b> i = 0;
<a name='L306'>              c = 0;
<a name='L307'>              <b>do</b> <font color='red'>{</font>
<a name='L308'>                c = 10*c + (ls-&gt;current-'0');
<a name='L309'>                <a href='../D/3419.html' title='Multiple defined in 2 places.'>next</a>(ls);
<a name='L310'>              <font color='red'>}</font> <b>while</b> (++i&lt;3 &amp;&amp; isdigit(ls-&gt;current));
<a name='L311'>              <b>if</b> (c &gt; UCHAR_MAX)
<a name='L312'>                <a href='../S/305.html#L102' title='Defined at 102 in deps/lua/src/llex.c.'>luaX_lexerror</a>(ls, "escape sequence too large", <a href='../S/292.html#L32' title='Defined at 32 in deps/lua/src/llex.h.'>TK_STRING</a>);
<a name='L313'>              <a href='../S/305.html#L51' title='Defined at 51 in deps/lua/src/llex.c.'>save</a>(ls, c);
<a name='L314'>            <font color='red'>}</font>
<a name='L315'>            <b>continue</b>;
<a name='L316'>          <font color='red'>}</font>
<a name='L317'>        <font color='red'>}</font>
<a name='L318'>        <a href='../S/305.html#L51' title='Defined at 51 in deps/lua/src/llex.c.'>save</a>(ls, c);
<a name='L319'>        <a href='../D/3419.html' title='Multiple defined in 2 places.'>next</a>(ls);
<a name='L320'>        <b>continue</b>;
<a name='L321'>      <font color='red'>}</font>
<a name='L322'>      <b>default</b>:
<a name='L323'>        <a href='../S/305.html#L48' title='Defined at 48 in deps/lua/src/llex.c.'>save_and_next</a>(ls);
<a name='L324'>    <font color='red'>}</font>
<a name='L325'>  <font color='red'>}</font>
<a name='L326'>  <a href='../S/305.html#L48' title='Defined at 48 in deps/lua/src/llex.c.'>save_and_next</a>(ls);  <i><font color='green'>/* skip delimiter */</font></i>
<a name='L327'>  seminfo-&gt;ts = <a href='../S/305.html#L117' title='Defined at 117 in deps/lua/src/llex.c.'>luaX_newstring</a>(ls, <a href='../S/312.html#L32' title='Defined at 32 in deps/lua/src/lzio.h.'>luaZ_buffer</a>(ls-&gt;buff) + 1,
<a name='L328'>                                   <a href='../S/312.html#L34' title='Defined at 34 in deps/lua/src/lzio.h.'>luaZ_bufflen</a>(ls-&gt;buff) - 2);
<a name='L329'><font color='red'>}</font>
<a name='L330'>
<a name='L331'>
<a name='L332'><b>static</b> <b>int</b> <a href='../R/2432.html' title='Multiple refered from 2 places.'>llex</a> (LexState *ls, SemInfo *seminfo) <font color='red'>{</font>
<a name='L333'>  <a href='../S/312.html#L36' title='Defined at 36 in deps/lua/src/lzio.h.'>luaZ_resetbuffer</a>(ls-&gt;buff);
<a name='L334'>  <b>for</b> (;;) <font color='red'>{</font>
<a name='L335'>    <b>switch</b> (ls-&gt;current) <font color='red'>{</font>
<a name='L336'>      <b>case</b> '\n':
<a name='L337'>      <b>case</b> '\r': <font color='red'>{</font>
<a name='L338'>        <a href='../S/305.html#L127' title='Defined at 127 in deps/lua/src/llex.c.'>inclinenumber</a>(ls);
<a name='L339'>        <b>continue</b>;
<a name='L340'>      <font color='red'>}</font>
<a name='L341'>      <b>case</b> '-': <font color='red'>{</font>
<a name='L342'>        <a href='../D/3419.html' title='Multiple defined in 2 places.'>next</a>(ls);
<a name='L343'>        <b>if</b> (ls-&gt;current != '-') <b>return</b> '-';
<a name='L344'>        <i><font color='green'>/* else is a comment */</font></i>
<a name='L345'>        <a href='../D/3419.html' title='Multiple defined in 2 places.'>next</a>(ls);
<a name='L346'>        <b>if</b> (ls-&gt;current == '[') <font color='red'>{</font>
<a name='L347'>          <b>int</b> sep = <a href='../S/305.html#L208' title='Defined at 208 in deps/lua/src/llex.c.'>skip_sep</a>(ls);
<a name='L348'>          <a href='../S/312.html#L36' title='Defined at 36 in deps/lua/src/lzio.h.'>luaZ_resetbuffer</a>(ls-&gt;buff);  <i><font color='green'>/* `skip_sep' may dirty the buffer */</font></i>
<a name='L349'>          <b>if</b> (sep &gt;= 0) <font color='red'>{</font>
<a name='L350'>            <a href='../S/305.html#L221' title='Defined at 221 in deps/lua/src/llex.c.'>read_long_string</a>(ls, NULL, sep);  <i><font color='green'>/* long comment */</font></i>
<a name='L351'>            <a href='../S/312.html#L36' title='Defined at 36 in deps/lua/src/lzio.h.'>luaZ_resetbuffer</a>(ls-&gt;buff);
<a name='L352'>            <b>continue</b>;
<a name='L353'>          <font color='red'>}</font>
<a name='L354'>        <font color='red'>}</font>
<a name='L355'>        <i><font color='green'>/* else short comment */</font></i>
<a name='L356'>        <b>while</b> (!<a href='../S/305.html#L33' title='Defined at 33 in deps/lua/src/llex.c.'>currIsNewline</a>(ls) &amp;&amp; ls-&gt;current != <a href='../S/312.html#L16' title='Defined at 16 in deps/lua/src/lzio.h.'>EOZ</a>)
<a name='L357'>          <a href='../D/3419.html' title='Multiple defined in 2 places.'>next</a>(ls);
<a name='L358'>        <b>continue</b>;
<a name='L359'>      <font color='red'>}</font>
<a name='L360'>      <b>case</b> '[': <font color='red'>{</font>
<a name='L361'>        <b>int</b> sep = <a href='../S/305.html#L208' title='Defined at 208 in deps/lua/src/llex.c.'>skip_sep</a>(ls);
<a name='L362'>        <b>if</b> (sep &gt;= 0) <font color='red'>{</font>
<a name='L363'>          <a href='../S/305.html#L221' title='Defined at 221 in deps/lua/src/llex.c.'>read_long_string</a>(ls, seminfo, sep);
<a name='L364'>          <b>return</b> <a href='../S/292.html#L32' title='Defined at 32 in deps/lua/src/llex.h.'>TK_STRING</a>;
<a name='L365'>        <font color='red'>}</font>
<a name='L366'>        <b>else</b> <b>if</b> (sep == -1) <b>return</b> '[';
<a name='L367'>        <b>else</b> <a href='../S/305.html#L102' title='Defined at 102 in deps/lua/src/llex.c.'>luaX_lexerror</a>(ls, "invalid long string delimiter", <a href='../S/292.html#L32' title='Defined at 32 in deps/lua/src/llex.h.'>TK_STRING</a>);
<a name='L368'>      <font color='red'>}</font>
<a name='L369'>      <b>case</b> '=': <font color='red'>{</font>
<a name='L370'>        <a href='../D/3419.html' title='Multiple defined in 2 places.'>next</a>(ls);
<a name='L371'>        <b>if</b> (ls-&gt;current != '=') <b>return</b> '=';
<a name='L372'>        <b>else</b> <font color='red'>{</font> <a href='../D/3419.html' title='Multiple defined in 2 places.'>next</a>(ls); <b>return</b> <a href='../S/292.html#L31' title='Defined at 31 in deps/lua/src/llex.h.'>TK_EQ</a>; <font color='red'>}</font>
<a name='L373'>      <font color='red'>}</font>
<a name='L374'>      <b>case</b> '&lt;': <font color='red'>{</font>
<a name='L375'>        <a href='../D/3419.html' title='Multiple defined in 2 places.'>next</a>(ls);
<a name='L376'>        <b>if</b> (ls-&gt;current != '=') <b>return</b> '&lt;';
<a name='L377'>        <b>else</b> <font color='red'>{</font> <a href='../D/3419.html' title='Multiple defined in 2 places.'>next</a>(ls); <b>return</b> <a href='../S/292.html#L31' title='Defined at 31 in deps/lua/src/llex.h.'>TK_LE</a>; <font color='red'>}</font>
<a name='L378'>      <font color='red'>}</font>
<a name='L379'>      <b>case</b> '&gt;': <font color='red'>{</font>
<a name='L380'>        <a href='../D/3419.html' title='Multiple defined in 2 places.'>next</a>(ls);
<a name='L381'>        <b>if</b> (ls-&gt;current != '=') <b>return</b> '&gt;';
<a name='L382'>        <b>else</b> <font color='red'>{</font> <a href='../D/3419.html' title='Multiple defined in 2 places.'>next</a>(ls); <b>return</b> <a href='../S/292.html#L31' title='Defined at 31 in deps/lua/src/llex.h.'>TK_GE</a>; <font color='red'>}</font>
<a name='L383'>      <font color='red'>}</font>
<a name='L384'>      <b>case</b> '~': <font color='red'>{</font>
<a name='L385'>        <a href='../D/3419.html' title='Multiple defined in 2 places.'>next</a>(ls);
<a name='L386'>        <b>if</b> (ls-&gt;current != '=') <b>return</b> '~';
<a name='L387'>        <b>else</b> <font color='red'>{</font> <a href='../D/3419.html' title='Multiple defined in 2 places.'>next</a>(ls); <b>return</b> <a href='../S/292.html#L31' title='Defined at 31 in deps/lua/src/llex.h.'>TK_NE</a>; <font color='red'>}</font>
<a name='L388'>      <font color='red'>}</font>
<a name='L389'>      <b>case</b> '"':
<a name='L390'>      <b>case</b> '\'': <font color='red'>{</font>
<a name='L391'>        <a href='../S/305.html#L276' title='Defined at 276 in deps/lua/src/llex.c.'>read_string</a>(ls, ls-&gt;current, seminfo);
<a name='L392'>        <b>return</b> <a href='../S/292.html#L32' title='Defined at 32 in deps/lua/src/llex.h.'>TK_STRING</a>;
<a name='L393'>      <font color='red'>}</font>
<a name='L394'>      <b>case</b> '.': <font color='red'>{</font>
<a name='L395'>        <a href='../S/305.html#L48' title='Defined at 48 in deps/lua/src/llex.c.'>save_and_next</a>(ls);
<a name='L396'>        <b>if</b> (<a href='../S/305.html#L161' title='Defined at 161 in deps/lua/src/llex.c.'>check_next</a>(ls, ".")) <font color='red'>{</font>
<a name='L397'>          <b>if</b> (<a href='../S/305.html#L161' title='Defined at 161 in deps/lua/src/llex.c.'>check_next</a>(ls, "."))
<a name='L398'>            <b>return</b> <a href='../S/292.html#L31' title='Defined at 31 in deps/lua/src/llex.h.'>TK_DOTS</a>;   <i><font color='green'>/* ... */</font></i>
<a name='L399'>          <b>else</b> <b>return</b> <a href='../S/292.html#L31' title='Defined at 31 in deps/lua/src/llex.h.'>TK_CONCAT</a>;   <i><font color='green'>/* .. */</font></i>
<a name='L400'>        <font color='red'>}</font>
<a name='L401'>        <b>else</b> <b>if</b> (!isdigit(ls-&gt;current)) <b>return</b> '.';
<a name='L402'>        <b>else</b> <font color='red'>{</font>
<a name='L403'>          <a href='../S/305.html#L192' title='Defined at 192 in deps/lua/src/llex.c.'>read_numeral</a>(ls, seminfo);
<a name='L404'>          <b>return</b> <a href='../S/292.html#L31' title='Defined at 31 in deps/lua/src/llex.h.'>TK_NUMBER</a>;
<a name='L405'>        <font color='red'>}</font>
<a name='L406'>      <font color='red'>}</font>
<a name='L407'>      <b>case</b> <a href='../S/312.html#L16' title='Defined at 16 in deps/lua/src/lzio.h.'>EOZ</a>: <font color='red'>{</font>
<a name='L408'>        <b>return</b> <a href='../S/292.html#L32' title='Defined at 32 in deps/lua/src/llex.h.'>TK_EOS</a>;
<a name='L409'>      <font color='red'>}</font>
<a name='L410'>      <b>default</b>: <font color='red'>{</font>
<a name='L411'>        <b>if</b> (isspace(ls-&gt;current)) <font color='red'>{</font>
<a name='L412'>          <a href='../D/3090.html' title='Multiple defined in 2 places.'>lua_assert</a>(!<a href='../S/305.html#L33' title='Defined at 33 in deps/lua/src/llex.c.'>currIsNewline</a>(ls));
<a name='L413'>          <a href='../D/3419.html' title='Multiple defined in 2 places.'>next</a>(ls);
<a name='L414'>          <b>continue</b>;
<a name='L415'>        <font color='red'>}</font>
<a name='L416'>        <b>else</b> <b>if</b> (isdigit(ls-&gt;current)) <font color='red'>{</font>
<a name='L417'>          <a href='../S/305.html#L192' title='Defined at 192 in deps/lua/src/llex.c.'>read_numeral</a>(ls, seminfo);
<a name='L418'>          <b>return</b> <a href='../S/292.html#L31' title='Defined at 31 in deps/lua/src/llex.h.'>TK_NUMBER</a>;
<a name='L419'>        <font color='red'>}</font>
<a name='L420'>        <b>else</b> <b>if</b> (isalpha(ls-&gt;current) || ls-&gt;current == '_') <font color='red'>{</font>
<a name='L421'>          <i><font color='green'>/* identifier or reserved word */</font></i>
<a name='L422'>          <a href='../D/1215.html' title='Multiple defined in 2 places.'>TString</a> *ts;
<a name='L423'>          <b>do</b> <font color='red'>{</font>
<a name='L424'>            <a href='../S/305.html#L48' title='Defined at 48 in deps/lua/src/llex.c.'>save_and_next</a>(ls);
<a name='L425'>          <font color='red'>}</font> <b>while</b> (isalnum(ls-&gt;current) || ls-&gt;current == '_');
<a name='L426'>          ts = <a href='../S/305.html#L117' title='Defined at 117 in deps/lua/src/llex.c.'>luaX_newstring</a>(ls, <a href='../S/312.html#L32' title='Defined at 32 in deps/lua/src/lzio.h.'>luaZ_buffer</a>(ls-&gt;buff),
<a name='L427'>                                  <a href='../S/312.html#L34' title='Defined at 34 in deps/lua/src/lzio.h.'>luaZ_bufflen</a>(ls-&gt;buff));
<a name='L428'>          <b>if</b> (ts-&gt;tsv.reserved &gt; 0)  <i><font color='green'>/* reserved word? */</font></i>
<a name='L429'>            <b>return</b> ts-&gt;tsv.reserved - 1 + <a href='../D/150.html' title='Multiple defined in 2 places.'>FIRST_RESERVED</a>;
<a name='L430'>          <b>else</b> <font color='red'>{</font>
<a name='L431'>            seminfo-&gt;ts = ts;
<a name='L432'>            <b>return</b> <a href='../S/292.html#L32' title='Defined at 32 in deps/lua/src/llex.h.'>TK_NAME</a>;
<a name='L433'>          <font color='red'>}</font>
<a name='L434'>        <font color='red'>}</font>
<a name='L435'>        <b>else</b> <font color='red'>{</font>
<a name='L436'>          <b>int</b> c = ls-&gt;current;
<a name='L437'>          <a href='../D/3419.html' title='Multiple defined in 2 places.'>next</a>(ls);
<a name='L438'>          <b>return</b> c;  <i><font color='green'>/* single-char tokens (+ - / ...) */</font></i>
<a name='L439'>        <font color='red'>}</font>
<a name='L440'>      <font color='red'>}</font>
<a name='L441'>    <font color='red'>}</font>
<a name='L442'>  <font color='red'>}</font>
<a name='L443'><font color='red'>}</font>
<a name='L444'>
<a name='L445'>
<a name='L446'><b>void</b> <a href='../R/2733.html' title='Multiple refered from 26 places.'>luaX_next</a> (LexState *ls) <font color='red'>{</font>
<a name='L447'>  ls-&gt;lastline = ls-&gt;linenumber;
<a name='L448'>  <b>if</b> (ls-&gt;lookahead.token != <a href='../S/292.html#L32' title='Defined at 32 in deps/lua/src/llex.h.'>TK_EOS</a>) <font color='red'>{</font>  <i><font color='green'>/* is there a look-ahead token? */</font></i>
<a name='L449'>    ls-&gt;t = ls-&gt;lookahead;  <i><font color='green'>/* use this one */</font></i>
<a name='L450'>    ls-&gt;lookahead.token = <a href='../S/292.html#L32' title='Defined at 32 in deps/lua/src/llex.h.'>TK_EOS</a>;  <i><font color='green'>/* and discharge it */</font></i>
<a name='L451'>  <font color='red'>}</font>
<a name='L452'>  <b>else</b>
<a name='L453'>    ls-&gt;t.token = <a href='../S/305.html#L332' title='Defined at 332 in deps/lua/src/llex.c.'>llex</a>(ls, &amp;ls-&gt;t.seminfo);  <i><font color='green'>/* read next token */</font></i>
<a name='L454'><font color='red'>}</font>
<a name='L455'>
<a name='L456'>
<a name='L457'><b>void</b> <a href='../R/2731.html' title='Multiple refered from 2 places.'>luaX_lookahead</a> (LexState *ls) <font color='red'>{</font>
<a name='L458'>  <a href='../D/3090.html' title='Multiple defined in 2 places.'>lua_assert</a>(ls-&gt;lookahead.token == <a href='../S/292.html#L32' title='Defined at 32 in deps/lua/src/llex.h.'>TK_EOS</a>);
<a name='L459'>  ls-&gt;lookahead.token = <a href='../S/305.html#L332' title='Defined at 332 in deps/lua/src/llex.c.'>llex</a>(ls, &amp;ls-&gt;lookahead.seminfo);
<a name='L460'><font color='red'>}</font>
<a name='L461'>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L51'>[^]</a><a href='#L457'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
