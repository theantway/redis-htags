<html>
<head>
<title>deps/lua/src/lapi.c</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.7.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/387.html'>deps</a>/<a href='../files/398.html'>lua</a>/<a href='../files/400.html'>src</a>/lapi.c</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L49'>[^]</a><a href='#L1071'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L49' title='Defined at 49.'>index2adr</a>
<li><a href='#L79' title='Defined at 79.'>getcurrenv</a>
<li><a href='#L89' title='Defined at 89.'>luaA_pushobject</a>
<li><a href='#L95' title='Defined at 95.'>lua_checkstack</a>
<li><a href='#L110' title='Defined at 110.'>lua_xmove</a>
<li><a href='#L125' title='Defined at 125.'>lua_setlevel</a>
<li><a href='#L130' title='Defined at 130.'>lua_atpanic</a>
<li><a href='#L140' title='Defined at 140.'>lua_newthread</a>
<li><a href='#L159' title='Defined at 159.'>lua_gettop</a>
<li><a href='#L164' title='Defined at 164.'>lua_settop</a>
<li><a href='#L180' title='Defined at 180.'>lua_remove</a>
<li><a href='#L191' title='Defined at 191.'>lua_insert</a>
<li><a href='#L203' title='Defined at 203.'>lua_replace</a>
<li><a href='#L228' title='Defined at 228.'>lua_pushvalue</a>
<li><a href='#L242' title='Defined at 242.'>lua_type</a>
<li><a href='#L248' title='Defined at 248.'>lua_typename</a>
<li><a href='#L254' title='Defined at 254.'>lua_iscfunction</a>
<li><a href='#L260' title='Defined at 260.'>lua_isnumber</a>
<li><a href='#L267' title='Defined at 267.'>lua_isstring</a>
<li><a href='#L273' title='Defined at 273.'>lua_isuserdata</a>
<li><a href='#L279' title='Defined at 279.'>lua_rawequal</a>
<li><a href='#L287' title='Defined at 287.'>lua_equal</a>
<li><a href='#L299' title='Defined at 299.'>lua_lessthan</a>
<li><a href='#L313' title='Defined at 313.'>lua_tonumber</a>
<li><a href='#L323' title='Defined at 323.'>lua_tointeger</a>
<li><a href='#L337' title='Defined at 337.'>lua_toboolean</a>
<li><a href='#L343' title='Defined at 343.'>lua_tolstring</a>
<li><a href='#L361' title='Defined at 361.'>lua_objlen</a>
<li><a href='#L379' title='Defined at 379.'>lua_tocfunction</a>
<li><a href='#L385' title='Defined at 385.'>lua_touserdata</a>
<li><a href='#L395' title='Defined at 395.'>lua_tothread</a>
<li><a href='#L401' title='Defined at 401.'>lua_topointer</a>
<li><a href='#L421' title='Defined at 421.'>lua_pushnil</a>
<li><a href='#L429' title='Defined at 429.'>lua_pushnumber</a>
<li><a href='#L437' title='Defined at 437.'>lua_pushinteger</a>
<li><a href='#L445' title='Defined at 445.'>lua_pushlstring</a>
<li><a href='#L454' title='Defined at 454.'>lua_pushstring</a>
<li><a href='#L462' title='Defined at 462.'>lua_pushvfstring</a>
<li><a href='#L473' title='Defined at 473.'>lua_pushfstring</a>
<li><a href='#L486' title='Defined at 486.'>lua_pushcclosure</a>
<li><a href='#L503' title='Defined at 503.'>lua_pushboolean</a>
<li><a href='#L511' title='Defined at 511.'>lua_pushlightuserdata</a>
<li><a href='#L519' title='Defined at 519.'>lua_pushthread</a>
<li><a href='#L534' title='Defined at 534.'>lua_gettable</a>
<li><a href='#L544' title='Defined at 544.'>lua_getfield</a>
<li><a href='#L557' title='Defined at 557.'>lua_rawget</a>
<li><a href='#L567' title='Defined at 567.'>lua_rawgeti</a>
<li><a href='#L578' title='Defined at 578.'>lua_createtable</a>
<li><a href='#L587' title='Defined at 587.'>lua_getmetatable</a>
<li><a href='#L616' title='Defined at 616.'>lua_getfenv</a>
<li><a href='#L645' title='Defined at 645.'>lua_settable</a>
<li><a href='#L657' title='Defined at 657.'>lua_setfield</a>
<li><a href='#L671' title='Defined at 671.'>lua_rawset</a>
<li><a href='#L684' title='Defined at 684.'>lua_rawseti</a>
<li><a href='#L697' title='Defined at 697.'>lua_setmetatable</a>
<li><a href='#L734' title='Defined at 734.'>lua_setfenv</a>
<li><a href='#L776' title='Defined at 776.'>lua_call</a>
<li><a href='#L798' title='Defined at 798.'>f_call</a>
<li><a href='#L805' title='Defined at 805.'>lua_pcall</a>
<li><a href='#L837' title='Defined at 837.'>f_Ccall</a>
<li><a href='#L850' title='Defined at 850.'>lua_cpcall</a>
<li><a href='#L862' title='Defined at 862.'>lua_load</a>
<li><a href='#L875' title='Defined at 875.'>lua_dump</a>
<li><a href='#L890' title='Defined at 890.'>lua_status</a>
<li><a href='#L899' title='Defined at 899.'>lua_gc</a>
<li><a href='#L964' title='Defined at 964.'>lua_error</a>
<li><a href='#L973' title='Defined at 973.'>lua_next</a>
<li><a href='#L990' title='Defined at 990.'>lua_concat</a>
<li><a href='#L1007' title='Defined at 1007.'>lua_getallocf</a>
<li><a href='#L1017' title='Defined at 1017.'>lua_setallocf</a>
<li><a href='#L1025' title='Defined at 1025.'>lua_newuserdata</a>
<li><a href='#L1039' title='Defined at 1039.'>aux_upvalue</a>
<li><a href='#L1057' title='Defined at 1057.'>lua_getupvalue</a>
<li><a href='#L1071' title='Defined at 1071.'>lua_setupvalue</a>
</ol>
<hr>
<pre>
<a name='L1'><i><font color='green'>/*</font></i>
<a name='L2'><i><font color='green'>** $Id: lapi.c,v 2.55.1.5 2008/07/04 18:41:18 roberto Exp $</font></i>
<a name='L3'><i><font color='green'>** Lua API</font></i>
<a name='L4'><i><font color='green'>** See Copyright Notice in lua.h</font></i>
<a name='L5'><i><font color='green'>*/</font></i>
<a name='L6'>
<a name='L7'>
<a name='L8'><font color='darkred'>#include</font> &lt;assert.h&gt;
<a name='L9'><font color='darkred'>#include</font> &lt;math.h&gt;
<a name='L10'><font color='darkred'>#include</font> &lt;stdarg.h&gt;
<a name='L11'><font color='darkred'>#include</font> &lt;string.h&gt;
<a name='L12'>
<a name='L13'><font color='darkred'>#define</font> lapi_c
<a name='L14'><font color='darkred'>#define</font> <a href='../R/303.html' title='Multiple refered from 2 places.'>LUA_CORE</a>
<a name='L15'>
<a name='L16'><font color='darkred'>#include</font> "<a href='266.html'>lua.h</a>"
<a name='L17'>
<a name='L18'><font color='darkred'>#include</font> "<a href='288.html'>lapi.h</a>"
<a name='L19'><font color='darkred'>#include</font> "<a href='264.html'>ldebug.h</a>"
<a name='L20'><font color='darkred'>#include</font> "<a href='296.html'>ldo.h</a>"
<a name='L21'><font color='darkred'>#include</font> "<a href='257.html'>lfunc.h</a>"
<a name='L22'><font color='darkred'>#include</font> "<a href='261.html'>lgc.h</a>"
<a name='L23'><font color='darkred'>#include</font> "<a href='278.html'>lmem.h</a>"
<a name='L24'><font color='darkred'>#include</font> "<a href='282.html'>lobject.h</a>"
<a name='L25'><font color='darkred'>#include</font> "<a href='298.html'>lstate.h</a>"
<a name='L26'><font color='darkred'>#include</font> "<a href='268.html'>lstring.h</a>"
<a name='L27'><font color='darkred'>#include</font> "<a href='281.html'>ltable.h</a>"
<a name='L28'><font color='darkred'>#include</font> "<a href='307.html'>ltm.h</a>"
<a name='L29'><font color='darkred'>#include</font> "<a href='271.html'>lundump.h</a>"
<a name='L30'><font color='darkred'>#include</font> "<a href='262.html'>lvm.h</a>"
<a name='L31'>
<a name='L32'>
<a name='L33'>
<a name='L34'><b>const</b> <b>char</b> lua_ident[] =
<a name='L35'>  "$Lua: " <a href='../S/266.html#L20' title='Defined at 20 in deps/lua/src/lua.h.'>LUA_RELEASE</a> " " <a href='../S/266.html#L22' title='Defined at 22 in deps/lua/src/lua.h.'>LUA_COPYRIGHT</a> " $\n"
<a name='L36'>  "$Authors: " <a href='../S/266.html#L23' title='Defined at 23 in deps/lua/src/lua.h.'>LUA_AUTHORS</a> " $\n"
<a name='L37'>  "$URL: www.lua.org $\n";
<a name='L38'>
<a name='L39'>
<a name='L40'>
<a name='L41'><font color='darkred'>#define</font> <a href='../R/1296.html' title='Multiple refered from 15 places.'>api_checknelems</a>(L, n)   <a href='../D/1559.html' title='Multiple defined in 2 places.'>api_check</a>(L, (n) &lt;= (L-&gt;top - L-&gt;base))
<a name='L42'>
<a name='L43'><font color='darkred'>#define</font> <a href='../R/1297.html' title='Multiple refered from 11 places.'>api_checkvalidindex</a>(L, i)       <a href='../D/1559.html' title='Multiple defined in 2 places.'>api_check</a>(L, (i) != <a href='../S/282.html#L363' title='Defined at 363 in deps/lua/src/lobject.h.'>luaO_nilobject</a>)
<a name='L44'>
<a name='L45'><font color='darkred'>#define</font> <a href='../R/1298.html' title='Multiple refered from 22 places.'>api_incr_top</a>(L)   <font color='red'>{</font><a href='../D/1559.html' title='Multiple defined in 2 places.'>api_check</a>(L, L-&gt;top &lt; L-&gt;ci-&gt;top); L-&gt;top++;<font color='red'>}</font>
<a name='L46'>
<a name='L47'>
<a name='L48'>
<a name='L49'><b>static</b> <a href='../S/282.html#L75' title='Defined at 75 in deps/lua/src/lobject.h.'>TValue</a> *<a href='../R/2199.html' title='Multiple refered from 40 places.'>index2adr</a> (lua_State *L, <b>int</b> idx) <font color='red'>{</font>
<a name='L50'>  <b>if</b> (idx &gt; 0) <font color='red'>{</font>
<a name='L51'>    <a href='../S/282.html#L75' title='Defined at 75 in deps/lua/src/lobject.h.'>TValue</a> *o = L-&gt;base + (idx - 1);
<a name='L52'>    <a href='../D/1559.html' title='Multiple defined in 2 places.'>api_check</a>(L, idx &lt;= L-&gt;ci-&gt;top - L-&gt;base);
<a name='L53'>    <b>if</b> (o &gt;= L-&gt;top) <b>return</b> <a href='../S/310.html#L75' title='Defined at 75 in deps/lua/src/llimits.h.'>cast</a>(<a href='../S/282.html#L75' title='Defined at 75 in deps/lua/src/lobject.h.'>TValue</a> *, <a href='../S/282.html#L363' title='Defined at 363 in deps/lua/src/lobject.h.'>luaO_nilobject</a>);
<a name='L54'>    <b>else</b> <b>return</b> o;
<a name='L55'>  <font color='red'>}</font>
<a name='L56'>  <b>else</b> <b>if</b> (idx &gt; <a href='../S/266.html#L36' title='Defined at 36 in deps/lua/src/lua.h.'>LUA_REGISTRYINDEX</a>) <font color='red'>{</font>
<a name='L57'>    <a href='../D/1559.html' title='Multiple defined in 2 places.'>api_check</a>(L, idx != 0 &amp;&amp; -idx &lt;= L-&gt;top - L-&gt;base);
<a name='L58'>    <b>return</b> L-&gt;top + idx;
<a name='L59'>  <font color='red'>}</font>
<a name='L60'>  <b>else</b> <b>switch</b> (idx) <font color='red'>{</font>  <i><font color='green'>/* pseudo-indices */</font></i>
<a name='L61'>    <b>case</b> <a href='../S/266.html#L36' title='Defined at 36 in deps/lua/src/lua.h.'>LUA_REGISTRYINDEX</a>: <b>return</b> <a href='../S/298.html#L25' title='Defined at 25 in deps/lua/src/lstate.h.'>registry</a>(L);
<a name='L62'>    <b>case</b> <a href='../S/266.html#L37' title='Defined at 37 in deps/lua/src/lua.h.'>LUA_ENVIRONINDEX</a>: <font color='red'>{</font>
<a name='L63'>      <a href='../D/109.html' title='Multiple defined in 2 places.'>Closure</a> *func = <a href='../S/298.html#L59' title='Defined at 59 in deps/lua/src/lstate.h.'>curr_func</a>(L);
<a name='L64'>      <a href='../S/282.html#L148' title='Defined at 148 in deps/lua/src/lobject.h.'>sethvalue</a>(L, &amp;L-&gt;env, func-&gt;c.env);
<a name='L65'>      <b>return</b> &amp;L-&gt;env;
<a name='L66'>    <font color='red'>}</font>
<a name='L67'>    <b>case</b> <a href='../S/266.html#L38' title='Defined at 38 in deps/lua/src/lua.h.'>LUA_GLOBALSINDEX</a>: <b>return</b> <a href='../S/298.html#L22' title='Defined at 22 in deps/lua/src/lstate.h.'>gt</a>(L);
<a name='L68'>    <b>default</b>: <font color='red'>{</font>
<a name='L69'>      <a href='../D/109.html' title='Multiple defined in 2 places.'>Closure</a> *func = <a href='../S/298.html#L59' title='Defined at 59 in deps/lua/src/lstate.h.'>curr_func</a>(L);
<a name='L70'>      idx = <a href='../S/266.html#L38' title='Defined at 38 in deps/lua/src/lua.h.'>LUA_GLOBALSINDEX</a> - idx;
<a name='L71'>      <b>return</b> (idx &lt;= func-&gt;c.nupvalues)
<a name='L72'>                ? &amp;func-&gt;c.upvalue[idx-1]
<a name='L73'>                : <a href='../S/310.html#L75' title='Defined at 75 in deps/lua/src/llimits.h.'>cast</a>(<a href='../S/282.html#L75' title='Defined at 75 in deps/lua/src/lobject.h.'>TValue</a> *, <a href='../S/282.html#L363' title='Defined at 363 in deps/lua/src/lobject.h.'>luaO_nilobject</a>);
<a name='L74'>    <font color='red'>}</font>
<a name='L75'>  <font color='red'>}</font>
<a name='L76'><font color='red'>}</font>
<a name='L77'>
<a name='L78'>
<a name='L79'><b>static</b> <a href='../D/1237.html' title='Multiple defined in 2 places.'>Table</a> *<a href='../R/2076.html' title='Multiple refered from 3 places.'>getcurrenv</a> (lua_State *L) <font color='red'>{</font>
<a name='L80'>  <b>if</b> (L-&gt;ci == L-&gt;base_ci)  <i><font color='green'>/* no enclosing function? */</font></i>
<a name='L81'>    <b>return</b> <a href='../S/282.html#L99' title='Defined at 99 in deps/lua/src/lobject.h.'>hvalue</a>(<a href='../S/298.html#L22' title='Defined at 22 in deps/lua/src/lstate.h.'>gt</a>(L));  <i><font color='green'>/* use global table as environment */</font></i>
<a name='L82'>  <b>else</b> <font color='red'>{</font>
<a name='L83'>    <a href='../D/109.html' title='Multiple defined in 2 places.'>Closure</a> *func = <a href='../S/298.html#L59' title='Defined at 59 in deps/lua/src/lstate.h.'>curr_func</a>(L);
<a name='L84'>    <b>return</b> func-&gt;c.env;
<a name='L85'>  <font color='red'>}</font>
<a name='L86'><font color='red'>}</font>
<a name='L87'>
<a name='L88'>
<a name='L89'><b>void</b> <a href='../R/2491.html' title='Multiple refered from 2 places.'>luaA_pushobject</a> (lua_State *L, <b>const</b> TValue *o) <font color='red'>{</font>
<a name='L90'>  <a href='../S/282.html#L174' title='Defined at 174 in deps/lua/src/lobject.h.'>setobj2s</a>(L, L-&gt;top, o);
<a name='L91'>  <a href='../S/272.html#L45' title='Defined at 45 in deps/lua/src/lapi.c.'>api_incr_top</a>(L);
<a name='L92'><font color='red'>}</font>
<a name='L93'>
<a name='L94'>
<a name='L95'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>int</b> <a href='../R/2760.html' title='Multiple refered from 7 places.'>lua_checkstack</a> (lua_State *L, <b>int</b> size) <font color='red'>{</font>
<a name='L96'>  <b>int</b> res = 1;
<a name='L97'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L98'>  <b>if</b> (size &gt; <a href='../S/317.html#L446' title='Defined at 446 in deps/lua/src/luaconf.h.'>LUAI_MAXCSTACK</a> || (L-&gt;top - L-&gt;base + size) &gt; <a href='../S/317.html#L446' title='Defined at 446 in deps/lua/src/luaconf.h.'>LUAI_MAXCSTACK</a>)
<a name='L99'>    res = 0;  <i><font color='green'>/* stack overflow */</font></i>
<a name='L100'>  <b>else</b> <b>if</b> (size &gt; 0) <font color='red'>{</font>
<a name='L101'>    <a href='../S/296.html#L16' title='Defined at 16 in deps/lua/src/ldo.h.'>luaD_checkstack</a>(L, size);
<a name='L102'>    <b>if</b> (L-&gt;ci-&gt;top &lt; L-&gt;top + size)
<a name='L103'>      L-&gt;ci-&gt;top = L-&gt;top + size;
<a name='L104'>  <font color='red'>}</font>
<a name='L105'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L106'>  <b>return</b> res;
<a name='L107'><font color='red'>}</font>
<a name='L108'>
<a name='L109'>
<a name='L110'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>void</b> <a href='../R/2870.html' title='Multiple refered from 9 places.'>lua_xmove</a> (lua_State *from, lua_State *to, <b>int</b> n) <font color='red'>{</font>
<a name='L111'>  <b>int</b> i;
<a name='L112'>  <b>if</b> (from == to) <b>return</b>;
<a name='L113'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(to);
<a name='L114'>  <a href='../S/272.html#L41' title='Defined at 41 in deps/lua/src/lapi.c.'>api_checknelems</a>(from, n);
<a name='L115'>  <a href='../D/1559.html' title='Multiple defined in 2 places.'>api_check</a>(from, <a href='../S/298.html#L130' title='Defined at 130 in deps/lua/src/lstate.h.'>G</a>(from) == <a href='../S/298.html#L130' title='Defined at 130 in deps/lua/src/lstate.h.'>G</a>(to));
<a name='L116'>  <a href='../D/1559.html' title='Multiple defined in 2 places.'>api_check</a>(from, to-&gt;ci-&gt;top - to-&gt;top &gt;= n);
<a name='L117'>  from-&gt;top -= n;
<a name='L118'>  <b>for</b> (i = 0; i &lt; n; i++) <font color='red'>{</font>
<a name='L119'>    <a href='../S/282.html#L174' title='Defined at 174 in deps/lua/src/lobject.h.'>setobj2s</a>(to, to-&gt;top++, from-&gt;top + i);
<a name='L120'>  <font color='red'>}</font>
<a name='L121'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(to);
<a name='L122'><font color='red'>}</font>
<a name='L123'>
<a name='L124'>
<a name='L125'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>void</b> <a href='../R/2846.html' title='Multiple refered from 2 places.'>lua_setlevel</a> (lua_State *from, lua_State *to) <font color='red'>{</font>
<a name='L126'>  to-&gt;nCcalls = from-&gt;nCcalls;
<a name='L127'><font color='red'>}</font>
<a name='L128'>
<a name='L129'>
<a name='L130'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> lua_CFunction <a href='../S/260.html#L649' title='Refered from 649 in deps/lua/src/lauxlib.c.'>lua_atpanic</a> (lua_State *L, lua_CFunction panicf) <font color='red'>{</font>
<a name='L131'>  lua_CFunction old;
<a name='L132'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L133'>  old = <a href='../S/298.html#L130' title='Defined at 130 in deps/lua/src/lstate.h.'>G</a>(L)-&gt;<a href='../S/260.html#L639' title='Defined at 639 in deps/lua/src/lauxlib.c.'>panic</a>;
<a name='L134'>  <a href='../S/298.html#L130' title='Defined at 130 in deps/lua/src/lstate.h.'>G</a>(L)-&gt;<a href='../S/260.html#L639' title='Defined at 639 in deps/lua/src/lauxlib.c.'>panic</a> = panicf;
<a name='L135'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L136'>  <b>return</b> old;
<a name='L137'><font color='red'>}</font>
<a name='L138'>
<a name='L139'>
<a name='L140'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <a href='../D/3087.html' title='Multiple defined in 2 places.'>lua_State</a> *<a href='../R/2804.html' title='Multiple refered from 2 places.'>lua_newthread</a> (lua_State *L) <font color='red'>{</font>
<a name='L141'>  <a href='../D/3087.html' title='Multiple defined in 2 places.'>lua_State</a> *L1;
<a name='L142'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L143'>  <a href='../S/261.html#L80' title='Defined at 80 in deps/lua/src/lgc.h.'>luaC_checkGC</a>(L);
<a name='L144'>  L1 = <a href='../S/275.html#L119' title='Defined at 119 in deps/lua/src/lstate.c.'>luaE_newthread</a>(L);
<a name='L145'>  <a href='../S/282.html#L138' title='Defined at 138 in deps/lua/src/lobject.h.'>setthvalue</a>(L, L-&gt;top, L1);
<a name='L146'>  <a href='../S/272.html#L45' title='Defined at 45 in deps/lua/src/lapi.c.'>api_incr_top</a>(L);
<a name='L147'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L148'>  <a href='../S/317.html#L725' title='Defined at 725 in deps/lua/src/luaconf.h.'>luai_userstatethread</a>(L, L1);
<a name='L149'>  <b>return</b> L1;
<a name='L150'><font color='red'>}</font>
<a name='L151'>
<a name='L152'>
<a name='L153'>
<a name='L154'><i><font color='green'>/*</font></i>
<a name='L155'><i><font color='green'>** basic stack manipulation</font></i>
<a name='L156'><i><font color='green'>*/</font></i>
<a name='L157'>
<a name='L158'>
<a name='L159'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>int</b> <a href='../R/2782.html' title='Multiple refered from 45 places.'>lua_gettop</a> (lua_State *L) <font color='red'>{</font>
<a name='L160'>  <b>return</b> <a href='../S/310.html#L80' title='Defined at 80 in deps/lua/src/llimits.h.'>cast_int</a>(L-&gt;top - L-&gt;base);
<a name='L161'><font color='red'>}</font>
<a name='L162'>
<a name='L163'>
<a name='L164'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>void</b> <a href='../R/2850.html' title='Multiple refered from 25 places.'>lua_settop</a> (lua_State *L, <b>int</b> idx) <font color='red'>{</font>
<a name='L165'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L166'>  <b>if</b> (idx &gt;= 0) <font color='red'>{</font>
<a name='L167'>    <a href='../D/1559.html' title='Multiple defined in 2 places.'>api_check</a>(L, idx &lt;= L-&gt;stack_last - L-&gt;base);
<a name='L168'>    <b>while</b> (L-&gt;top &lt; L-&gt;base + idx)
<a name='L169'>      <a href='../S/282.html#L117' title='Defined at 117 in deps/lua/src/lobject.h.'>setnilvalue</a>(L-&gt;top++);
<a name='L170'>    L-&gt;top = L-&gt;base + idx;
<a name='L171'>  <font color='red'>}</font>
<a name='L172'>  <b>else</b> <font color='red'>{</font>
<a name='L173'>    <a href='../D/1559.html' title='Multiple defined in 2 places.'>api_check</a>(L, -(idx+1) &lt;= (L-&gt;top - L-&gt;base));
<a name='L174'>    L-&gt;top += idx+1;  <i><font color='green'>/* `subtract' index (index is negative) */</font></i>
<a name='L175'>  <font color='red'>}</font>
<a name='L176'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L177'><font color='red'>}</font>
<a name='L178'>
<a name='L179'>
<a name='L180'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>void</b> <a href='../R/2837.html' title='Multiple refered from 15 places.'>lua_remove</a> (lua_State *L, <b>int</b> idx) <font color='red'>{</font>
<a name='L181'>  <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> p;
<a name='L182'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L183'>  p = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, idx);
<a name='L184'>  <a href='../S/272.html#L43' title='Defined at 43 in deps/lua/src/lapi.c.'>api_checkvalidindex</a>(L, p);
<a name='L185'>  <b>while</b> (++p &lt; L-&gt;top) <a href='../S/282.html#L172' title='Defined at 172 in deps/lua/src/lobject.h.'>setobjs2s</a>(L, p-1, p);
<a name='L186'>  L-&gt;top--;
<a name='L187'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L188'><font color='red'>}</font>
<a name='L189'>
<a name='L190'>
<a name='L191'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>void</b> <a href='../R/2785.html' title='Multiple refered from 16 places.'>lua_insert</a> (lua_State *L, <b>int</b> idx) <font color='red'>{</font>
<a name='L192'>  <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> p;
<a name='L193'>  <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> q;
<a name='L194'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L195'>  p = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, idx);
<a name='L196'>  <a href='../S/272.html#L43' title='Defined at 43 in deps/lua/src/lapi.c.'>api_checkvalidindex</a>(L, p);
<a name='L197'>  <b>for</b> (q = L-&gt;top; q&gt;p; q--) <a href='../S/282.html#L172' title='Defined at 172 in deps/lua/src/lobject.h.'>setobjs2s</a>(L, q, q-1);
<a name='L198'>  <a href='../S/282.html#L172' title='Defined at 172 in deps/lua/src/lobject.h.'>setobjs2s</a>(L, p, L-&gt;top);
<a name='L199'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L200'><font color='red'>}</font>
<a name='L201'>
<a name='L202'>
<a name='L203'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>void</b> <a href='../R/2838.html' title='Multiple refered from 6 places.'>lua_replace</a> (lua_State *L, <b>int</b> idx) <font color='red'>{</font>
<a name='L204'>  <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> o;
<a name='L205'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L206'>  <i><font color='green'>/* explicit test for incompatible code */</font></i>
<a name='L207'>  <b>if</b> (idx == <a href='../S/266.html#L37' title='Defined at 37 in deps/lua/src/lua.h.'>LUA_ENVIRONINDEX</a> &amp;&amp; L-&gt;ci == L-&gt;base_ci)
<a name='L208'>    <a href='../S/299.html#L631' title='Defined at 631 in deps/lua/src/ldebug.c.'>luaG_runerror</a>(L, "no calling environment");
<a name='L209'>  <a href='../S/272.html#L41' title='Defined at 41 in deps/lua/src/lapi.c.'>api_checknelems</a>(L, 1);
<a name='L210'>  o = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, idx);
<a name='L211'>  <a href='../S/272.html#L43' title='Defined at 43 in deps/lua/src/lapi.c.'>api_checkvalidindex</a>(L, o);
<a name='L212'>  <b>if</b> (idx == <a href='../S/266.html#L37' title='Defined at 37 in deps/lua/src/lua.h.'>LUA_ENVIRONINDEX</a>) <font color='red'>{</font>
<a name='L213'>    <a href='../D/109.html' title='Multiple defined in 2 places.'>Closure</a> *func = <a href='../S/298.html#L59' title='Defined at 59 in deps/lua/src/lstate.h.'>curr_func</a>(L);
<a name='L214'>    <a href='../D/1559.html' title='Multiple defined in 2 places.'>api_check</a>(L, <a href='../S/282.html#L82' title='Defined at 82 in deps/lua/src/lobject.h.'>ttistable</a>(L-&gt;top - 1)); 
<a name='L215'>    func-&gt;c.env = <a href='../S/282.html#L99' title='Defined at 99 in deps/lua/src/lobject.h.'>hvalue</a>(L-&gt;top - 1);
<a name='L216'>    <a href='../S/261.html#L86' title='Defined at 86 in deps/lua/src/lgc.h.'>luaC_barrier</a>(L, func, L-&gt;top - 1);
<a name='L217'>  <font color='red'>}</font>
<a name='L218'>  <b>else</b> <font color='red'>{</font>
<a name='L219'>    <a href='../S/282.html#L161' title='Defined at 161 in deps/lua/src/lobject.h.'>setobj</a>(L, o, L-&gt;top - 1);
<a name='L220'>    <b>if</b> (idx &lt; <a href='../S/266.html#L38' title='Defined at 38 in deps/lua/src/lua.h.'>LUA_GLOBALSINDEX</a>)  <i><font color='green'>/* function upvalue? */</font></i>
<a name='L221'>      <a href='../S/261.html#L86' title='Defined at 86 in deps/lua/src/lgc.h.'>luaC_barrier</a>(L, <a href='../S/298.html#L59' title='Defined at 59 in deps/lua/src/lstate.h.'>curr_func</a>(L), L-&gt;top - 1);
<a name='L222'>  <font color='red'>}</font>
<a name='L223'>  L-&gt;top--;
<a name='L224'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L225'><font color='red'>}</font>
<a name='L226'>
<a name='L227'>
<a name='L228'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>void</b> <a href='../R/2828.html' title='Multiple refered from 70 places.'>lua_pushvalue</a> (lua_State *L, <b>int</b> idx) <font color='red'>{</font>
<a name='L229'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L230'>  <a href='../S/282.html#L174' title='Defined at 174 in deps/lua/src/lobject.h.'>setobj2s</a>(L, L-&gt;top, <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, idx));
<a name='L231'>  <a href='../S/272.html#L45' title='Defined at 45 in deps/lua/src/lapi.c.'>api_incr_top</a>(L);
<a name='L232'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L233'><font color='red'>}</font>
<a name='L234'>
<a name='L235'>
<a name='L236'>
<a name='L237'><i><font color='green'>/*</font></i>
<a name='L238'><i><font color='green'>** access functions (stack -&gt; C)</font></i>
<a name='L239'><i><font color='green'>*/</font></i>
<a name='L240'>
<a name='L241'>
<a name='L242'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>int</b> <a href='../R/2866.html' title='Multiple refered from 33 places.'>lua_type</a> (lua_State *L, <b>int</b> idx) <font color='red'>{</font>
<a name='L243'>  <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> o = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, idx);
<a name='L244'>  <b>return</b> (o == <a href='../S/282.html#L363' title='Defined at 363 in deps/lua/src/lobject.h.'>luaO_nilobject</a>) ? <a href='../S/266.html#L72' title='Defined at 72 in deps/lua/src/lua.h.'>LUA_TNONE</a> : <a href='../S/282.html#L90' title='Defined at 90 in deps/lua/src/lobject.h.'>ttype</a>(o);
<a name='L245'><font color='red'>}</font>
<a name='L246'>
<a name='L247'>
<a name='L248'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>const</b> <b>char</b> *<a href='../R/2867.html' title='Multiple refered from 4 places.'>lua_typename</a> (lua_State *L, <b>int</b> t) <font color='red'>{</font>
<a name='L249'>  <a href='../S/310.html#L70' title='Defined at 70 in deps/lua/src/llimits.h.'>UNUSED</a>(L);
<a name='L250'>  <b>return</b> (t == <a href='../S/266.html#L72' title='Defined at 72 in deps/lua/src/lua.h.'>LUA_TNONE</a>) ? "no value" : luaT_typenames[t];
<a name='L251'><font color='red'>}</font>
<a name='L252'>
<a name='L253'>
<a name='L254'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>int</b> <a href='../R/2787.html' title='Multiple refered from 6 places.'>lua_iscfunction</a> (lua_State *L, <b>int</b> idx) <font color='red'>{</font>
<a name='L255'>  <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> o = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, idx);
<a name='L256'>  <b>return</b> <a href='../S/282.html#L315' title='Defined at 315 in deps/lua/src/lobject.h.'>iscfunction</a>(o);
<a name='L257'><font color='red'>}</font>
<a name='L258'>
<a name='L259'>
<a name='L260'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>int</b> <a href='../R/2792.html' title='Multiple refered from 11 places.'>lua_isnumber</a> (lua_State *L, <b>int</b> idx) <font color='red'>{</font>
<a name='L261'>  <a href='../S/282.html#L75' title='Defined at 75 in deps/lua/src/lobject.h.'>TValue</a> n;
<a name='L262'>  <b>const</b> <a href='../S/282.html#L75' title='Defined at 75 in deps/lua/src/lobject.h.'>TValue</a> *o = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, idx);
<a name='L263'>  <b>return</b> <a href='../S/262.html#L18' title='Defined at 18 in deps/lua/src/lvm.h.'>tonumber</a>(o, &amp;n);
<a name='L264'><font color='red'>}</font>
<a name='L265'>
<a name='L266'>
<a name='L267'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>int</b> <a href='../R/2793.html' title='Multiple refered from 12 places.'>lua_isstring</a> (lua_State *L, <b>int</b> idx) <font color='red'>{</font>
<a name='L268'>  <b>int</b> t = <a href='../S/272.html#L242' title='Defined at 242 in deps/lua/src/lapi.c.'>lua_type</a>(L, idx);
<a name='L269'>  <b>return</b> (t == <a href='../S/266.html#L78' title='Defined at 78 in deps/lua/src/lua.h.'>LUA_TSTRING</a> || t == <a href='../S/266.html#L77' title='Defined at 77 in deps/lua/src/lua.h.'>LUA_TNUMBER</a>);
<a name='L270'><font color='red'>}</font>
<a name='L271'>
<a name='L272'>
<a name='L273'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>int</b> <a href='../S/266.html#L138' title='Refered from 138 in deps/lua/src/lua.h.'>lua_isuserdata</a> (lua_State *L, <b>int</b> idx) <font color='red'>{</font>
<a name='L274'>  <b>const</b> <a href='../S/282.html#L75' title='Defined at 75 in deps/lua/src/lobject.h.'>TValue</a> *o = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, idx);
<a name='L275'>  <b>return</b> (<a href='../S/282.html#L85' title='Defined at 85 in deps/lua/src/lobject.h.'>ttisuserdata</a>(o) || <a href='../S/282.html#L87' title='Defined at 87 in deps/lua/src/lobject.h.'>ttislightuserdata</a>(o));
<a name='L276'><font color='red'>}</font>
<a name='L277'>
<a name='L278'>
<a name='L279'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>int</b> <a href='../R/2830.html' title='Multiple refered from 4 places.'>lua_rawequal</a> (lua_State *L, <b>int</b> index1, <b>int</b> index2) <font color='red'>{</font>
<a name='L280'>  <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> o1 = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, index1);
<a name='L281'>  <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> o2 = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, index2);
<a name='L282'>  <b>return</b> (o1 == <a href='../S/282.html#L363' title='Defined at 363 in deps/lua/src/lobject.h.'>luaO_nilobject</a> || o2 == <a href='../S/282.html#L363' title='Defined at 363 in deps/lua/src/lobject.h.'>luaO_nilobject</a>) ? 0
<a name='L283'>         : <a href='../S/311.html#L72' title='Defined at 72 in deps/lua/src/lobject.c.'>luaO_rawequalObj</a>(o1, o2);
<a name='L284'><font color='red'>}</font>
<a name='L285'>
<a name='L286'>
<a name='L287'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>int</b> <a href='../S/266.html#L142' title='Refered from 142 in deps/lua/src/lua.h.'>lua_equal</a> (lua_State *L, <b>int</b> index1, <b>int</b> index2) <font color='red'>{</font>
<a name='L288'>  <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> o1, o2;
<a name='L289'>  <b>int</b> i;
<a name='L290'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);  <i><font color='green'>/* may call tag method */</font></i>
<a name='L291'>  o1 = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, index1);
<a name='L292'>  o2 = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, index2);
<a name='L293'>  i = (o1 == <a href='../S/282.html#L363' title='Defined at 363 in deps/lua/src/lobject.h.'>luaO_nilobject</a> || o2 == <a href='../S/282.html#L363' title='Defined at 363 in deps/lua/src/lobject.h.'>luaO_nilobject</a>) ? 0 : <a href='../S/262.html#L21' title='Defined at 21 in deps/lua/src/lvm.h.'>equalobj</a>(L, o1, o2);
<a name='L294'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L295'>  <b>return</b> i;
<a name='L296'><font color='red'>}</font>
<a name='L297'>
<a name='L298'>
<a name='L299'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>int</b> <a href='../R/2798.html' title='Multiple refered from 2 places.'>lua_lessthan</a> (lua_State *L, <b>int</b> index1, <b>int</b> index2) <font color='red'>{</font>
<a name='L300'>  <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> o1, o2;
<a name='L301'>  <b>int</b> i;
<a name='L302'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);  <i><font color='green'>/* may call tag method */</font></i>
<a name='L303'>  o1 = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, index1);
<a name='L304'>  o2 = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, index2);
<a name='L305'>  i = (o1 == <a href='../S/282.html#L363' title='Defined at 363 in deps/lua/src/lobject.h.'>luaO_nilobject</a> || o2 == <a href='../S/282.html#L363' title='Defined at 363 in deps/lua/src/lobject.h.'>luaO_nilobject</a>) ? 0
<a name='L306'>       : <a href='../S/290.html#L221' title='Defined at 221 in deps/lua/src/lvm.c.'>luaV_lessthan</a>(L, o1, o2);
<a name='L307'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L308'>  <b>return</b> i;
<a name='L309'><font color='red'>}</font>
<a name='L310'>
<a name='L311'>
<a name='L312'>
<a name='L313'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <a href='../S/266.html#L99' title='Defined at 99 in deps/lua/src/lua.h.'>lua_Number</a> <a href='../R/2861.html' title='Multiple refered from 12 places.'>lua_tonumber</a> (lua_State *L, <b>int</b> idx) <font color='red'>{</font>
<a name='L314'>  <a href='../S/282.html#L75' title='Defined at 75 in deps/lua/src/lobject.h.'>TValue</a> n;
<a name='L315'>  <b>const</b> <a href='../S/282.html#L75' title='Defined at 75 in deps/lua/src/lobject.h.'>TValue</a> *o = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, idx);
<a name='L316'>  <b>if</b> (<a href='../S/262.html#L18' title='Defined at 18 in deps/lua/src/lvm.h.'>tonumber</a>(o, &amp;n))
<a name='L317'>    <b>return</b> <a href='../S/282.html#L93' title='Defined at 93 in deps/lua/src/lobject.h.'>nvalue</a>(o);
<a name='L318'>  <b>else</b>
<a name='L319'>    <b>return</b> 0;
<a name='L320'><font color='red'>}</font>
<a name='L321'>
<a name='L322'>
<a name='L323'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <a href='../S/266.html#L103' title='Defined at 103 in deps/lua/src/lua.h.'>lua_Integer</a> <a href='../R/2859.html' title='Multiple refered from 8 places.'>lua_tointeger</a> (lua_State *L, <b>int</b> idx) <font color='red'>{</font>
<a name='L324'>  <a href='../S/282.html#L75' title='Defined at 75 in deps/lua/src/lobject.h.'>TValue</a> n;
<a name='L325'>  <b>const</b> <a href='../S/282.html#L75' title='Defined at 75 in deps/lua/src/lobject.h.'>TValue</a> *o = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, idx);
<a name='L326'>  <b>if</b> (<a href='../S/262.html#L18' title='Defined at 18 in deps/lua/src/lvm.h.'>tonumber</a>(o, &amp;n)) <font color='red'>{</font>
<a name='L327'>    <a href='../S/266.html#L103' title='Defined at 103 in deps/lua/src/lua.h.'>lua_Integer</a> res;
<a name='L328'>    <a href='../S/266.html#L99' title='Defined at 99 in deps/lua/src/lua.h.'>lua_Number</a> num = <a href='../S/282.html#L93' title='Defined at 93 in deps/lua/src/lobject.h.'>nvalue</a>(o);
<a name='L329'>    <a href='../D/3146.html' title='Multiple defined in 3 places.'>lua_number2integer</a>(res, num);
<a name='L330'>    <b>return</b> res;
<a name='L331'>  <font color='red'>}</font>
<a name='L332'>  <b>else</b>
<a name='L333'>    <b>return</b> 0;
<a name='L334'><font color='red'>}</font>
<a name='L335'>
<a name='L336'>
<a name='L337'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>int</b> <a href='../R/2857.html' title='Multiple refered from 18 places.'>lua_toboolean</a> (lua_State *L, <b>int</b> idx) <font color='red'>{</font>
<a name='L338'>  <b>const</b> <a href='../S/282.html#L75' title='Defined at 75 in deps/lua/src/lobject.h.'>TValue</a> *o = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, idx);
<a name='L339'>  <b>return</b> !<a href='../S/282.html#L103' title='Defined at 103 in deps/lua/src/lobject.h.'>l_isfalse</a>(o);
<a name='L340'><font color='red'>}</font>
<a name='L341'>
<a name='L342'>
<a name='L343'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>const</b> <b>char</b> *<a href='../R/2860.html' title='Multiple refered from 13 places.'>lua_tolstring</a> (lua_State *L, <b>int</b> idx, size_t *len) <font color='red'>{</font>
<a name='L344'>  <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> o = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, idx);
<a name='L345'>  <b>if</b> (!<a href='../S/282.html#L81' title='Defined at 81 in deps/lua/src/lobject.h.'>ttisstring</a>(o)) <font color='red'>{</font>
<a name='L346'>    <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);  <i><font color='green'>/* `luaV_tostring' may create a new string */</font></i>
<a name='L347'>    <b>if</b> (!<a href='../S/290.html#L47' title='Defined at 47 in deps/lua/src/lvm.c.'>luaV_tostring</a>(L, o)) <font color='red'>{</font>  <i><font color='green'>/* conversion failed? */</font></i>
<a name='L348'>      <b>if</b> (len != NULL) *len = 0;
<a name='L349'>      <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L350'>      <b>return</b> NULL;
<a name='L351'>    <font color='red'>}</font>
<a name='L352'>    <a href='../S/261.html#L80' title='Defined at 80 in deps/lua/src/lgc.h.'>luaC_checkGC</a>(L);
<a name='L353'>    o = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, idx);  <i><font color='green'>/* previous call may reallocate the stack */</font></i>
<a name='L354'>    <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L355'>  <font color='red'>}</font>
<a name='L356'>  <b>if</b> (len != NULL) *len = <a href='../S/282.html#L95' title='Defined at 95 in deps/lua/src/lobject.h.'>tsvalue</a>(o)-&gt;len;
<a name='L357'>  <b>return</b> <a href='../S/282.html#L211' title='Defined at 211 in deps/lua/src/lobject.h.'>svalue</a>(o);
<a name='L358'><font color='red'>}</font>
<a name='L359'>
<a name='L360'>
<a name='L361'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> size_t <a href='../R/2810.html' title='Multiple refered from 7 places.'>lua_objlen</a> (lua_State *L, <b>int</b> idx) <font color='red'>{</font>
<a name='L362'>  <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> o = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, idx);
<a name='L363'>  <b>switch</b> (<a href='../S/282.html#L90' title='Defined at 90 in deps/lua/src/lobject.h.'>ttype</a>(o)) <font color='red'>{</font>
<a name='L364'>    <b>case</b> <a href='../S/266.html#L78' title='Defined at 78 in deps/lua/src/lua.h.'>LUA_TSTRING</a>: <b>return</b> <a href='../S/282.html#L95' title='Defined at 95 in deps/lua/src/lobject.h.'>tsvalue</a>(o)-&gt;len;
<a name='L365'>    <b>case</b> <a href='../S/266.html#L81' title='Defined at 81 in deps/lua/src/lua.h.'>LUA_TUSERDATA</a>: <b>return</b> <a href='../S/282.html#L97' title='Defined at 97 in deps/lua/src/lobject.h.'>uvalue</a>(o)-&gt;len;
<a name='L366'>    <b>case</b> <a href='../S/266.html#L79' title='Defined at 79 in deps/lua/src/lua.h.'>LUA_TTABLE</a>: <b>return</b> <a href='../S/259.html#L560' title='Defined at 560 in deps/lua/src/ltable.c.'>luaH_getn</a>(<a href='../S/282.html#L99' title='Defined at 99 in deps/lua/src/lobject.h.'>hvalue</a>(o));
<a name='L367'>    <b>case</b> <a href='../S/266.html#L77' title='Defined at 77 in deps/lua/src/lua.h.'>LUA_TNUMBER</a>: <font color='red'>{</font>
<a name='L368'>      size_t l;
<a name='L369'>      <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);  <i><font color='green'>/* `luaV_tostring' may create a new string */</font></i>
<a name='L370'>      l = (<a href='../S/290.html#L47' title='Defined at 47 in deps/lua/src/lvm.c.'>luaV_tostring</a>(L, o) ? <a href='../S/282.html#L95' title='Defined at 95 in deps/lua/src/lobject.h.'>tsvalue</a>(o)-&gt;len : 0);
<a name='L371'>      <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L372'>      <b>return</b> l;
<a name='L373'>    <font color='red'>}</font>
<a name='L374'>    <b>default</b>: <b>return</b> 0;
<a name='L375'>  <font color='red'>}</font>
<a name='L376'><font color='red'>}</font>
<a name='L377'>
<a name='L378'>
<a name='L379'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> lua_CFunction <a href='../S/315.html#L130' title='Refered from 130 in deps/lua/src/liolib.c.'>lua_tocfunction</a> (lua_State *L, <b>int</b> idx) <font color='red'>{</font>
<a name='L380'>  <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> o = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, idx);
<a name='L381'>  <b>return</b> (!<a href='../S/282.html#L315' title='Defined at 315 in deps/lua/src/lobject.h.'>iscfunction</a>(o)) ? NULL : <a href='../S/282.html#L98' title='Defined at 98 in deps/lua/src/lobject.h.'>clvalue</a>(o)-&gt;c.f;
<a name='L382'><font color='red'>}</font>
<a name='L383'>
<a name='L384'>
<a name='L385'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>void</b> *<a href='../R/2865.html' title='Multiple refered from 14 places.'>lua_touserdata</a> (lua_State *L, <b>int</b> idx) <font color='red'>{</font>
<a name='L386'>  <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> o = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, idx);
<a name='L387'>  <b>switch</b> (<a href='../S/282.html#L90' title='Defined at 90 in deps/lua/src/lobject.h.'>ttype</a>(o)) <font color='red'>{</font>
<a name='L388'>    <b>case</b> <a href='../S/266.html#L81' title='Defined at 81 in deps/lua/src/lua.h.'>LUA_TUSERDATA</a>: <b>return</b> (<a href='../S/282.html#L96' title='Defined at 96 in deps/lua/src/lobject.h.'>rawuvalue</a>(o) + 1);
<a name='L389'>    <b>case</b> <a href='../S/266.html#L76' title='Defined at 76 in deps/lua/src/lua.h.'>LUA_TLIGHTUSERDATA</a>: <b>return</b> <a href='../S/282.html#L92' title='Defined at 92 in deps/lua/src/lobject.h.'>pvalue</a>(o);
<a name='L390'>    <b>default</b>: <b>return</b> NULL;
<a name='L391'>  <font color='red'>}</font>
<a name='L392'><font color='red'>}</font>
<a name='L393'>
<a name='L394'>
<a name='L395'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <a href='../D/3087.html' title='Multiple defined in 2 places.'>lua_State</a> *<a href='../R/2864.html' title='Multiple refered from 5 places.'>lua_tothread</a> (lua_State *L, <b>int</b> idx) <font color='red'>{</font>
<a name='L396'>  <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> o = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, idx);
<a name='L397'>  <b>return</b> (!<a href='../S/282.html#L86' title='Defined at 86 in deps/lua/src/lobject.h.'>ttisthread</a>(o)) ? NULL : <a href='../S/282.html#L101' title='Defined at 101 in deps/lua/src/lobject.h.'>thvalue</a>(o);
<a name='L398'><font color='red'>}</font>
<a name='L399'>
<a name='L400'>
<a name='L401'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>const</b> <b>void</b> *<a href='../R/2862.html' title='Multiple refered from 3 places.'>lua_topointer</a> (lua_State *L, <b>int</b> idx) <font color='red'>{</font>
<a name='L402'>  <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> o = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, idx);
<a name='L403'>  <b>switch</b> (<a href='../S/282.html#L90' title='Defined at 90 in deps/lua/src/lobject.h.'>ttype</a>(o)) <font color='red'>{</font>
<a name='L404'>    <b>case</b> <a href='../S/266.html#L79' title='Defined at 79 in deps/lua/src/lua.h.'>LUA_TTABLE</a>: <b>return</b> <a href='../S/282.html#L99' title='Defined at 99 in deps/lua/src/lobject.h.'>hvalue</a>(o);
<a name='L405'>    <b>case</b> <a href='../S/266.html#L80' title='Defined at 80 in deps/lua/src/lua.h.'>LUA_TFUNCTION</a>: <b>return</b> <a href='../S/282.html#L98' title='Defined at 98 in deps/lua/src/lobject.h.'>clvalue</a>(o);
<a name='L406'>    <b>case</b> <a href='../S/266.html#L82' title='Defined at 82 in deps/lua/src/lua.h.'>LUA_TTHREAD</a>: <b>return</b> <a href='../S/282.html#L101' title='Defined at 101 in deps/lua/src/lobject.h.'>thvalue</a>(o);
<a name='L407'>    <b>case</b> <a href='../S/266.html#L81' title='Defined at 81 in deps/lua/src/lua.h.'>LUA_TUSERDATA</a>:
<a name='L408'>    <b>case</b> <a href='../S/266.html#L76' title='Defined at 76 in deps/lua/src/lua.h.'>LUA_TLIGHTUSERDATA</a>:
<a name='L409'>      <b>return</b> <a href='../S/272.html#L385' title='Defined at 385 in deps/lua/src/lapi.c.'>lua_touserdata</a>(L, idx);
<a name='L410'>    <b>default</b>: <b>return</b> NULL;
<a name='L411'>  <font color='red'>}</font>
<a name='L412'><font color='red'>}</font>
<a name='L413'>
<a name='L414'>
<a name='L415'>
<a name='L416'><i><font color='green'>/*</font></i>
<a name='L417'><i><font color='green'>** push functions (C -&gt; stack)</font></i>
<a name='L418'><i><font color='green'>*/</font></i>
<a name='L419'>
<a name='L420'>
<a name='L421'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>void</b> <a href='../R/2824.html' title='Multiple refered from 32 places.'>lua_pushnil</a> (lua_State *L) <font color='red'>{</font>
<a name='L422'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L423'>  <a href='../S/282.html#L117' title='Defined at 117 in deps/lua/src/lobject.h.'>setnilvalue</a>(L-&gt;top);
<a name='L424'>  <a href='../S/272.html#L45' title='Defined at 45 in deps/lua/src/lapi.c.'>api_incr_top</a>(L);
<a name='L425'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L426'><font color='red'>}</font>
<a name='L427'>
<a name='L428'>
<a name='L429'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>void</b> <a href='../R/2825.html' title='Multiple refered from 70 places.'>lua_pushnumber</a> (lua_State *L, lua_Number n) <font color='red'>{</font>
<a name='L430'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L431'>  <a href='../S/282.html#L119' title='Defined at 119 in deps/lua/src/lobject.h.'>setnvalue</a>(L-&gt;top, n);
<a name='L432'>  <a href='../S/272.html#L45' title='Defined at 45 in deps/lua/src/lapi.c.'>api_incr_top</a>(L);
<a name='L433'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L434'><font color='red'>}</font>
<a name='L435'>
<a name='L436'>
<a name='L437'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>void</b> <a href='../R/2820.html' title='Multiple refered from 35 places.'>lua_pushinteger</a> (lua_State *L, lua_Integer n) <font color='red'>{</font>
<a name='L438'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L439'>  <a href='../S/282.html#L119' title='Defined at 119 in deps/lua/src/lobject.h.'>setnvalue</a>(L-&gt;top, <a href='../S/310.html#L79' title='Defined at 79 in deps/lua/src/llimits.h.'>cast_num</a>(n));
<a name='L440'>  <a href='../S/272.html#L45' title='Defined at 45 in deps/lua/src/lapi.c.'>api_incr_top</a>(L);
<a name='L441'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L442'><font color='red'>}</font>
<a name='L443'>
<a name='L444'>
<a name='L445'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>void</b> <a href='../R/2823.html' title='Multiple refered from 27 places.'>lua_pushlstring</a> (lua_State *L, <b>const</b> <b>char</b> *s, size_t len) <font color='red'>{</font>
<a name='L446'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L447'>  <a href='../S/261.html#L80' title='Defined at 80 in deps/lua/src/lgc.h.'>luaC_checkGC</a>(L);
<a name='L448'>  <a href='../S/282.html#L175' title='Defined at 175 in deps/lua/src/lobject.h.'>setsvalue2s</a>(L, L-&gt;top, <a href='../S/284.html#L75' title='Defined at 75 in deps/lua/src/lstring.c.'>luaS_newlstr</a>(L, s, len));
<a name='L449'>  <a href='../S/272.html#L45' title='Defined at 45 in deps/lua/src/lapi.c.'>api_incr_top</a>(L);
<a name='L450'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L451'><font color='red'>}</font>
<a name='L452'>
<a name='L453'>
<a name='L454'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>void</b> <a href='../R/2826.html' title='Multiple refered from 61 places.'>lua_pushstring</a> (lua_State *L, <b>const</b> <b>char</b> *s) <font color='red'>{</font>
<a name='L455'>  <b>if</b> (s == NULL)
<a name='L456'>    <a href='../S/272.html#L421' title='Defined at 421 in deps/lua/src/lapi.c.'>lua_pushnil</a>(L);
<a name='L457'>  <b>else</b>
<a name='L458'>    <a href='../S/272.html#L445' title='Defined at 445 in deps/lua/src/lapi.c.'>lua_pushlstring</a>(L, s, strlen(s));
<a name='L459'><font color='red'>}</font>
<a name='L460'>
<a name='L461'>
<a name='L462'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>const</b> <b>char</b> *<a href='../R/2829.html' title='Multiple refered from 2 places.'>lua_pushvfstring</a> (lua_State *L, <b>const</b> <b>char</b> *fmt,
<a name='L463'>                                      va_list argp) <font color='red'>{</font>
<a name='L464'>  <b>const</b> <b>char</b> *ret;
<a name='L465'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L466'>  <a href='../S/261.html#L80' title='Defined at 80 in deps/lua/src/lgc.h.'>luaC_checkGC</a>(L);
<a name='L467'>  ret = <a href='../S/311.html#L111' title='Defined at 111 in deps/lua/src/lobject.c.'>luaO_pushvfstring</a>(L, fmt, argp);
<a name='L468'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L469'>  <b>return</b> ret;
<a name='L470'><font color='red'>}</font>
<a name='L471'>
<a name='L472'>
<a name='L473'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>const</b> <b>char</b> *<a href='../R/2819.html' title='Multiple refered from 30 places.'>lua_pushfstring</a> (lua_State *L, <b>const</b> <b>char</b> *fmt, ...) <font color='red'>{</font>
<a name='L474'>  <b>const</b> <b>char</b> *ret;
<a name='L475'>  va_list argp;
<a name='L476'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L477'>  <a href='../S/261.html#L80' title='Defined at 80 in deps/lua/src/lgc.h.'>luaC_checkGC</a>(L);
<a name='L478'>  va_start(argp, fmt);
<a name='L479'>  ret = <a href='../S/311.html#L111' title='Defined at 111 in deps/lua/src/lobject.c.'>luaO_pushvfstring</a>(L, fmt, argp);
<a name='L480'>  va_end(argp);
<a name='L481'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L482'>  <b>return</b> ret;
<a name='L483'><font color='red'>}</font>
<a name='L484'>
<a name='L485'>
<a name='L486'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>void</b> <a href='../R/2817.html' title='Multiple refered from 8 places.'>lua_pushcclosure</a> (lua_State *L, lua_CFunction fn, <b>int</b> n) <font color='red'>{</font>
<a name='L487'>  <a href='../D/109.html' title='Multiple defined in 2 places.'>Closure</a> *cl;
<a name='L488'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L489'>  <a href='../S/261.html#L80' title='Defined at 80 in deps/lua/src/lgc.h.'>luaC_checkGC</a>(L);
<a name='L490'>  <a href='../S/272.html#L41' title='Defined at 41 in deps/lua/src/lapi.c.'>api_checknelems</a>(L, n);
<a name='L491'>  cl = <a href='../S/258.html#L23' title='Defined at 23 in deps/lua/src/lfunc.c.'>luaF_newCclosure</a>(L, n, <a href='../S/272.html#L79' title='Defined at 79 in deps/lua/src/lapi.c.'>getcurrenv</a>(L));
<a name='L492'>  cl-&gt;c.f = fn;
<a name='L493'>  L-&gt;top -= n;
<a name='L494'>  <b>while</b> (n--)
<a name='L495'>    <a href='../S/282.html#L183' title='Defined at 183 in deps/lua/src/lobject.h.'>setobj2n</a>(L, &amp;cl-&gt;c.upvalue[n], L-&gt;top+n);
<a name='L496'>  <a href='../S/282.html#L143' title='Defined at 143 in deps/lua/src/lobject.h.'>setclvalue</a>(L, L-&gt;top, cl);
<a name='L497'>  <a href='../D/3090.html' title='Multiple defined in 2 places.'>lua_assert</a>(<a href='../S/261.html#L65' title='Defined at 65 in deps/lua/src/lgc.h.'>iswhite</a>(<a href='../S/298.html#L162' title='Defined at 162 in deps/lua/src/lstate.h.'>obj2gco</a>(cl)));
<a name='L498'>  <a href='../S/272.html#L45' title='Defined at 45 in deps/lua/src/lapi.c.'>api_incr_top</a>(L);
<a name='L499'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L500'><font color='red'>}</font>
<a name='L501'>
<a name='L502'>
<a name='L503'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>void</b> <a href='../R/2816.html' title='Multiple refered from 22 places.'>lua_pushboolean</a> (lua_State *L, <b>int</b> b) <font color='red'>{</font>
<a name='L504'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L505'>  <a href='../S/282.html#L125' title='Defined at 125 in deps/lua/src/lobject.h.'>setbvalue</a>(L-&gt;top, (b != 0));  <i><font color='green'>/* ensure that true is 1 */</font></i>
<a name='L506'>  <a href='../S/272.html#L45' title='Defined at 45 in deps/lua/src/lapi.c.'>api_incr_top</a>(L);
<a name='L507'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L508'><font color='red'>}</font>
<a name='L509'>
<a name='L510'>
<a name='L511'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>void</b> <a href='../R/2821.html' title='Multiple refered from 12 places.'>lua_pushlightuserdata</a> (lua_State *L, <b>void</b> *p) <font color='red'>{</font>
<a name='L512'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L513'>  <a href='../S/282.html#L122' title='Defined at 122 in deps/lua/src/lobject.h.'>setpvalue</a>(L-&gt;top, p);
<a name='L514'>  <a href='../S/272.html#L45' title='Defined at 45 in deps/lua/src/lapi.c.'>api_incr_top</a>(L);
<a name='L515'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L516'><font color='red'>}</font>
<a name='L517'>
<a name='L518'>
<a name='L519'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>int</b> <a href='../R/2827.html' title='Multiple refered from 3 places.'>lua_pushthread</a> (lua_State *L) <font color='red'>{</font>
<a name='L520'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L521'>  <a href='../S/282.html#L138' title='Defined at 138 in deps/lua/src/lobject.h.'>setthvalue</a>(L, L-&gt;top, L);
<a name='L522'>  <a href='../S/272.html#L45' title='Defined at 45 in deps/lua/src/lapi.c.'>api_incr_top</a>(L);
<a name='L523'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L524'>  <b>return</b> (<a href='../S/298.html#L130' title='Defined at 130 in deps/lua/src/lstate.h.'>G</a>(L)-&gt;mainthread == L);
<a name='L525'><font color='red'>}</font>
<a name='L526'>
<a name='L527'>
<a name='L528'>
<a name='L529'><i><font color='green'>/*</font></i>
<a name='L530'><i><font color='green'>** get functions (Lua -&gt; stack)</font></i>
<a name='L531'><i><font color='green'>*/</font></i>
<a name='L532'>
<a name='L533'>
<a name='L534'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>void</b> <a href='../R/2781.html' title='Multiple refered from 11 places.'>lua_gettable</a> (lua_State *L, <b>int</b> idx) <font color='red'>{</font>
<a name='L535'>  <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> t;
<a name='L536'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L537'>  t = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, idx);
<a name='L538'>  <a href='../S/272.html#L43' title='Defined at 43 in deps/lua/src/lapi.c.'>api_checkvalidindex</a>(L, t);
<a name='L539'>  <a href='../S/290.html#L108' title='Defined at 108 in deps/lua/src/lvm.c.'>luaV_gettable</a>(L, t, L-&gt;top - 1, L-&gt;top - 1);
<a name='L540'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L541'><font color='red'>}</font>
<a name='L542'>
<a name='L543'>
<a name='L544'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>void</b> <a href='../R/2771.html' title='Multiple refered from 28 places.'>lua_getfield</a> (lua_State *L, <b>int</b> idx, <b>const</b> <b>char</b> *k) <font color='red'>{</font>
<a name='L545'>  <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> t;
<a name='L546'>  <a href='../S/282.html#L75' title='Defined at 75 in deps/lua/src/lobject.h.'>TValue</a> key;
<a name='L547'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L548'>  t = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, idx);
<a name='L549'>  <a href='../S/272.html#L43' title='Defined at 43 in deps/lua/src/lapi.c.'>api_checkvalidindex</a>(L, t);
<a name='L550'>  <a href='../S/282.html#L128' title='Defined at 128 in deps/lua/src/lobject.h.'>setsvalue</a>(L, &amp;key, <a href='../S/268.html#L20' title='Defined at 20 in deps/lua/src/lstring.h.'>luaS_new</a>(L, k));
<a name='L551'>  <a href='../S/290.html#L108' title='Defined at 108 in deps/lua/src/lvm.c.'>luaV_gettable</a>(L, t, &amp;key, L-&gt;top);
<a name='L552'>  <a href='../S/272.html#L45' title='Defined at 45 in deps/lua/src/lapi.c.'>api_incr_top</a>(L);
<a name='L553'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L554'><font color='red'>}</font>
<a name='L555'>
<a name='L556'>
<a name='L557'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>void</b> <a href='../R/2831.html' title='Multiple refered from 12 places.'>lua_rawget</a> (lua_State *L, <b>int</b> idx) <font color='red'>{</font>
<a name='L558'>  <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> t;
<a name='L559'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L560'>  t = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, idx);
<a name='L561'>  <a href='../D/1559.html' title='Multiple defined in 2 places.'>api_check</a>(L, <a href='../S/282.html#L82' title='Defined at 82 in deps/lua/src/lobject.h.'>ttistable</a>(t));
<a name='L562'>  <a href='../S/282.html#L174' title='Defined at 174 in deps/lua/src/lobject.h.'>setobj2s</a>(L, L-&gt;top - 1, <a href='../S/259.html#L469' title='Defined at 469 in deps/lua/src/ltable.c.'>luaH_get</a>(<a href='../S/282.html#L99' title='Defined at 99 in deps/lua/src/lobject.h.'>hvalue</a>(t), L-&gt;top - 1));
<a name='L563'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L564'><font color='red'>}</font>
<a name='L565'>
<a name='L566'>
<a name='L567'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>void</b> <a href='../R/2832.html' title='Multiple refered from 30 places.'>lua_rawgeti</a> (lua_State *L, <b>int</b> idx, <b>int</b> n) <font color='red'>{</font>
<a name='L568'>  <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> o;
<a name='L569'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L570'>  o = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, idx);
<a name='L571'>  <a href='../D/1559.html' title='Multiple defined in 2 places.'>api_check</a>(L, <a href='../S/282.html#L82' title='Defined at 82 in deps/lua/src/lobject.h.'>ttistable</a>(o));
<a name='L572'>  <a href='../S/282.html#L174' title='Defined at 174 in deps/lua/src/lobject.h.'>setobj2s</a>(L, L-&gt;top, <a href='../S/259.html#L435' title='Defined at 435 in deps/lua/src/ltable.c.'>luaH_getnum</a>(<a href='../S/282.html#L99' title='Defined at 99 in deps/lua/src/lobject.h.'>hvalue</a>(o), n));
<a name='L573'>  <a href='../S/272.html#L45' title='Defined at 45 in deps/lua/src/lapi.c.'>api_incr_top</a>(L);
<a name='L574'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L575'><font color='red'>}</font>
<a name='L576'>
<a name='L577'>
<a name='L578'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>void</b> <a href='../R/2764.html' title='Multiple refered from 12 places.'>lua_createtable</a> (lua_State *L, <b>int</b> narray, <b>int</b> nrec) <font color='red'>{</font>
<a name='L579'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L580'>  <a href='../S/261.html#L80' title='Defined at 80 in deps/lua/src/lgc.h.'>luaC_checkGC</a>(L);
<a name='L581'>  <a href='../S/282.html#L148' title='Defined at 148 in deps/lua/src/lobject.h.'>sethvalue</a>(L, L-&gt;top, <a href='../S/259.html#L358' title='Defined at 358 in deps/lua/src/ltable.c.'>luaH_new</a>(L, narray, nrec));
<a name='L582'>  <a href='../S/272.html#L45' title='Defined at 45 in deps/lua/src/lapi.c.'>api_incr_top</a>(L);
<a name='L583'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L584'><font color='red'>}</font>
<a name='L585'>
<a name='L586'>
<a name='L587'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>int</b> <a href='../R/2779.html' title='Multiple refered from 9 places.'>lua_getmetatable</a> (lua_State *L, <b>int</b> objindex) <font color='red'>{</font>
<a name='L588'>  <b>const</b> <a href='../S/282.html#L75' title='Defined at 75 in deps/lua/src/lobject.h.'>TValue</a> *obj;
<a name='L589'>  <a href='../D/1237.html' title='Multiple defined in 2 places.'>Table</a> *mt = NULL;
<a name='L590'>  <b>int</b> res;
<a name='L591'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L592'>  obj = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, objindex);
<a name='L593'>  <b>switch</b> (<a href='../S/282.html#L90' title='Defined at 90 in deps/lua/src/lobject.h.'>ttype</a>(obj)) <font color='red'>{</font>
<a name='L594'>    <b>case</b> <a href='../S/266.html#L79' title='Defined at 79 in deps/lua/src/lua.h.'>LUA_TTABLE</a>:
<a name='L595'>      mt = <a href='../S/282.html#L99' title='Defined at 99 in deps/lua/src/lobject.h.'>hvalue</a>(obj)-&gt;metatable;
<a name='L596'>      <b>break</b>;
<a name='L597'>    <b>case</b> <a href='../S/266.html#L81' title='Defined at 81 in deps/lua/src/lua.h.'>LUA_TUSERDATA</a>:
<a name='L598'>      mt = <a href='../S/282.html#L97' title='Defined at 97 in deps/lua/src/lobject.h.'>uvalue</a>(obj)-&gt;metatable;
<a name='L599'>      <b>break</b>;
<a name='L600'>    <b>default</b>:
<a name='L601'>      mt = <a href='../S/298.html#L130' title='Defined at 130 in deps/lua/src/lstate.h.'>G</a>(L)-&gt;mt[<a href='../S/282.html#L90' title='Defined at 90 in deps/lua/src/lobject.h.'>ttype</a>(obj)];
<a name='L602'>      <b>break</b>;
<a name='L603'>  <font color='red'>}</font>
<a name='L604'>  <b>if</b> (mt == NULL)
<a name='L605'>    res = 0;
<a name='L606'>  <b>else</b> <font color='red'>{</font>
<a name='L607'>    <a href='../S/282.html#L148' title='Defined at 148 in deps/lua/src/lobject.h.'>sethvalue</a>(L, L-&gt;top, mt);
<a name='L608'>    <a href='../S/272.html#L45' title='Defined at 45 in deps/lua/src/lapi.c.'>api_incr_top</a>(L);
<a name='L609'>    res = 1;
<a name='L610'>  <font color='red'>}</font>
<a name='L611'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L612'>  <b>return</b> res;
<a name='L613'><font color='red'>}</font>
<a name='L614'>
<a name='L615'>
<a name='L616'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>void</b> <a href='../R/2770.html' title='Multiple refered from 4 places.'>lua_getfenv</a> (lua_State *L, <b>int</b> idx) <font color='red'>{</font>
<a name='L617'>  <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> o;
<a name='L618'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L619'>  o = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, idx);
<a name='L620'>  <a href='../S/272.html#L43' title='Defined at 43 in deps/lua/src/lapi.c.'>api_checkvalidindex</a>(L, o);
<a name='L621'>  <b>switch</b> (<a href='../S/282.html#L90' title='Defined at 90 in deps/lua/src/lobject.h.'>ttype</a>(o)) <font color='red'>{</font>
<a name='L622'>    <b>case</b> <a href='../S/266.html#L80' title='Defined at 80 in deps/lua/src/lua.h.'>LUA_TFUNCTION</a>:
<a name='L623'>      <a href='../S/282.html#L148' title='Defined at 148 in deps/lua/src/lobject.h.'>sethvalue</a>(L, L-&gt;top, <a href='../S/282.html#L98' title='Defined at 98 in deps/lua/src/lobject.h.'>clvalue</a>(o)-&gt;c.env);
<a name='L624'>      <b>break</b>;
<a name='L625'>    <b>case</b> <a href='../S/266.html#L81' title='Defined at 81 in deps/lua/src/lua.h.'>LUA_TUSERDATA</a>:
<a name='L626'>      <a href='../S/282.html#L148' title='Defined at 148 in deps/lua/src/lobject.h.'>sethvalue</a>(L, L-&gt;top, <a href='../S/282.html#L97' title='Defined at 97 in deps/lua/src/lobject.h.'>uvalue</a>(o)-&gt;env);
<a name='L627'>      <b>break</b>;
<a name='L628'>    <b>case</b> <a href='../S/266.html#L82' title='Defined at 82 in deps/lua/src/lua.h.'>LUA_TTHREAD</a>:
<a name='L629'>      <a href='../S/282.html#L174' title='Defined at 174 in deps/lua/src/lobject.h.'>setobj2s</a>(L, L-&gt;top,  <a href='../S/298.html#L22' title='Defined at 22 in deps/lua/src/lstate.h.'>gt</a>(<a href='../S/282.html#L101' title='Defined at 101 in deps/lua/src/lobject.h.'>thvalue</a>(o)));
<a name='L630'>      <b>break</b>;
<a name='L631'>    <b>default</b>:
<a name='L632'>      <a href='../S/282.html#L117' title='Defined at 117 in deps/lua/src/lobject.h.'>setnilvalue</a>(L-&gt;top);
<a name='L633'>      <b>break</b>;
<a name='L634'>  <font color='red'>}</font>
<a name='L635'>  <a href='../S/272.html#L45' title='Defined at 45 in deps/lua/src/lapi.c.'>api_incr_top</a>(L);
<a name='L636'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L637'><font color='red'>}</font>
<a name='L638'>
<a name='L639'>
<a name='L640'><i><font color='green'>/*</font></i>
<a name='L641'><i><font color='green'>** set functions (stack -&gt; Lua)</font></i>
<a name='L642'><i><font color='green'>*/</font></i>
<a name='L643'>
<a name='L644'>
<a name='L645'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>void</b> <a href='../R/2849.html' title='Multiple refered from 23 places.'>lua_settable</a> (lua_State *L, <b>int</b> idx) <font color='red'>{</font>
<a name='L646'>  <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> t;
<a name='L647'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L648'>  <a href='../S/272.html#L41' title='Defined at 41 in deps/lua/src/lapi.c.'>api_checknelems</a>(L, 2);
<a name='L649'>  t = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, idx);
<a name='L650'>  <a href='../S/272.html#L43' title='Defined at 43 in deps/lua/src/lapi.c.'>api_checkvalidindex</a>(L, t);
<a name='L651'>  <a href='../S/290.html#L134' title='Defined at 134 in deps/lua/src/lvm.c.'>luaV_settable</a>(L, t, L-&gt;top - 2, L-&gt;top - 1);
<a name='L652'>  L-&gt;top -= 2;  <i><font color='green'>/* pop index and value */</font></i>
<a name='L653'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L654'><font color='red'>}</font>
<a name='L655'>
<a name='L656'>
<a name='L657'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>void</b> <a href='../R/2843.html' title='Multiple refered from 43 places.'>lua_setfield</a> (lua_State *L, <b>int</b> idx, <b>const</b> <b>char</b> *k) <font color='red'>{</font>
<a name='L658'>  <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> t;
<a name='L659'>  <a href='../S/282.html#L75' title='Defined at 75 in deps/lua/src/lobject.h.'>TValue</a> key;
<a name='L660'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L661'>  <a href='../S/272.html#L41' title='Defined at 41 in deps/lua/src/lapi.c.'>api_checknelems</a>(L, 1);
<a name='L662'>  t = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, idx);
<a name='L663'>  <a href='../S/272.html#L43' title='Defined at 43 in deps/lua/src/lapi.c.'>api_checkvalidindex</a>(L, t);
<a name='L664'>  <a href='../S/282.html#L128' title='Defined at 128 in deps/lua/src/lobject.h.'>setsvalue</a>(L, &amp;key, <a href='../S/268.html#L20' title='Defined at 20 in deps/lua/src/lstring.h.'>luaS_new</a>(L, k));
<a name='L665'>  <a href='../S/290.html#L134' title='Defined at 134 in deps/lua/src/lvm.c.'>luaV_settable</a>(L, t, &amp;key, L-&gt;top - 1);
<a name='L666'>  L-&gt;top--;  <i><font color='green'>/* pop value */</font></i>
<a name='L667'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L668'><font color='red'>}</font>
<a name='L669'>
<a name='L670'>
<a name='L671'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>void</b> <a href='../R/2833.html' title='Multiple refered from 8 places.'>lua_rawset</a> (lua_State *L, <b>int</b> idx) <font color='red'>{</font>
<a name='L672'>  <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> t;
<a name='L673'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L674'>  <a href='../S/272.html#L41' title='Defined at 41 in deps/lua/src/lapi.c.'>api_checknelems</a>(L, 2);
<a name='L675'>  t = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, idx);
<a name='L676'>  <a href='../D/1559.html' title='Multiple defined in 2 places.'>api_check</a>(L, <a href='../S/282.html#L82' title='Defined at 82 in deps/lua/src/lobject.h.'>ttistable</a>(t));
<a name='L677'>  <a href='../S/282.html#L181' title='Defined at 181 in deps/lua/src/lobject.h.'>setobj2t</a>(L, <a href='../S/259.html#L494' title='Defined at 494 in deps/lua/src/ltable.c.'>luaH_set</a>(L, <a href='../S/282.html#L99' title='Defined at 99 in deps/lua/src/lobject.h.'>hvalue</a>(t), L-&gt;top-2), L-&gt;top-1);
<a name='L678'>  <a href='../S/261.html#L89' title='Defined at 89 in deps/lua/src/lgc.h.'>luaC_barriert</a>(L, <a href='../S/282.html#L99' title='Defined at 99 in deps/lua/src/lobject.h.'>hvalue</a>(t), L-&gt;top-1);
<a name='L679'>  L-&gt;top -= 2;
<a name='L680'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L681'><font color='red'>}</font>
<a name='L682'>
<a name='L683'>
<a name='L684'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>void</b> <a href='../R/2834.html' title='Multiple refered from 17 places.'>lua_rawseti</a> (lua_State *L, <b>int</b> idx, <b>int</b> n) <font color='red'>{</font>
<a name='L685'>  <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> o;
<a name='L686'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L687'>  <a href='../S/272.html#L41' title='Defined at 41 in deps/lua/src/lapi.c.'>api_checknelems</a>(L, 1);
<a name='L688'>  o = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, idx);
<a name='L689'>  <a href='../D/1559.html' title='Multiple defined in 2 places.'>api_check</a>(L, <a href='../S/282.html#L82' title='Defined at 82 in deps/lua/src/lobject.h.'>ttistable</a>(o));
<a name='L690'>  <a href='../S/282.html#L181' title='Defined at 181 in deps/lua/src/lobject.h.'>setobj2t</a>(L, <a href='../S/259.html#L508' title='Defined at 508 in deps/lua/src/ltable.c.'>luaH_setnum</a>(L, <a href='../S/282.html#L99' title='Defined at 99 in deps/lua/src/lobject.h.'>hvalue</a>(o), n), L-&gt;top-1);
<a name='L691'>  <a href='../S/261.html#L89' title='Defined at 89 in deps/lua/src/lgc.h.'>luaC_barriert</a>(L, <a href='../S/282.html#L99' title='Defined at 99 in deps/lua/src/lobject.h.'>hvalue</a>(o), L-&gt;top-1);
<a name='L692'>  L-&gt;top--;
<a name='L693'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L694'><font color='red'>}</font>
<a name='L695'>
<a name='L696'>
<a name='L697'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>int</b> <a href='../R/2848.html' title='Multiple refered from 11 places.'>lua_setmetatable</a> (lua_State *L, <b>int</b> objindex) <font color='red'>{</font>
<a name='L698'>  <a href='../S/282.html#L75' title='Defined at 75 in deps/lua/src/lobject.h.'>TValue</a> *obj;
<a name='L699'>  <a href='../D/1237.html' title='Multiple defined in 2 places.'>Table</a> *mt;
<a name='L700'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L701'>  <a href='../S/272.html#L41' title='Defined at 41 in deps/lua/src/lapi.c.'>api_checknelems</a>(L, 1);
<a name='L702'>  obj = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, objindex);
<a name='L703'>  <a href='../S/272.html#L43' title='Defined at 43 in deps/lua/src/lapi.c.'>api_checkvalidindex</a>(L, obj);
<a name='L704'>  <b>if</b> (<a href='../S/282.html#L79' title='Defined at 79 in deps/lua/src/lobject.h.'>ttisnil</a>(L-&gt;top - 1))
<a name='L705'>    mt = NULL;
<a name='L706'>  <b>else</b> <font color='red'>{</font>
<a name='L707'>    <a href='../D/1559.html' title='Multiple defined in 2 places.'>api_check</a>(L, <a href='../S/282.html#L82' title='Defined at 82 in deps/lua/src/lobject.h.'>ttistable</a>(L-&gt;top - 1));
<a name='L708'>    mt = <a href='../S/282.html#L99' title='Defined at 99 in deps/lua/src/lobject.h.'>hvalue</a>(L-&gt;top - 1);
<a name='L709'>  <font color='red'>}</font>
<a name='L710'>  <b>switch</b> (<a href='../S/282.html#L90' title='Defined at 90 in deps/lua/src/lobject.h.'>ttype</a>(obj)) <font color='red'>{</font>
<a name='L711'>    <b>case</b> <a href='../S/266.html#L79' title='Defined at 79 in deps/lua/src/lua.h.'>LUA_TTABLE</a>: <font color='red'>{</font>
<a name='L712'>      <a href='../S/282.html#L99' title='Defined at 99 in deps/lua/src/lobject.h.'>hvalue</a>(obj)-&gt;metatable = mt;
<a name='L713'>      <b>if</b> (mt)
<a name='L714'>        <a href='../S/261.html#L96' title='Defined at 96 in deps/lua/src/lgc.h.'>luaC_objbarriert</a>(L, <a href='../S/282.html#L99' title='Defined at 99 in deps/lua/src/lobject.h.'>hvalue</a>(obj), mt);
<a name='L715'>      <b>break</b>;
<a name='L716'>    <font color='red'>}</font>
<a name='L717'>    <b>case</b> <a href='../S/266.html#L81' title='Defined at 81 in deps/lua/src/lua.h.'>LUA_TUSERDATA</a>: <font color='red'>{</font>
<a name='L718'>      <a href='../S/282.html#L97' title='Defined at 97 in deps/lua/src/lobject.h.'>uvalue</a>(obj)-&gt;metatable = mt;
<a name='L719'>      <b>if</b> (mt)
<a name='L720'>        <a href='../S/261.html#L92' title='Defined at 92 in deps/lua/src/lgc.h.'>luaC_objbarrier</a>(L, <a href='../S/282.html#L96' title='Defined at 96 in deps/lua/src/lobject.h.'>rawuvalue</a>(obj), mt);
<a name='L721'>      <b>break</b>;
<a name='L722'>    <font color='red'>}</font>
<a name='L723'>    <b>default</b>: <font color='red'>{</font>
<a name='L724'>      <a href='../S/298.html#L130' title='Defined at 130 in deps/lua/src/lstate.h.'>G</a>(L)-&gt;mt[<a href='../S/282.html#L90' title='Defined at 90 in deps/lua/src/lobject.h.'>ttype</a>(obj)] = mt;
<a name='L725'>      <b>break</b>;
<a name='L726'>    <font color='red'>}</font>
<a name='L727'>  <font color='red'>}</font>
<a name='L728'>  L-&gt;top--;
<a name='L729'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L730'>  <b>return</b> 1;
<a name='L731'><font color='red'>}</font>
<a name='L732'>
<a name='L733'>
<a name='L734'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>int</b> <a href='../R/2842.html' title='Multiple refered from 7 places.'>lua_setfenv</a> (lua_State *L, <b>int</b> idx) <font color='red'>{</font>
<a name='L735'>  <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> o;
<a name='L736'>  <b>int</b> res = 1;
<a name='L737'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L738'>  <a href='../S/272.html#L41' title='Defined at 41 in deps/lua/src/lapi.c.'>api_checknelems</a>(L, 1);
<a name='L739'>  o = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, idx);
<a name='L740'>  <a href='../S/272.html#L43' title='Defined at 43 in deps/lua/src/lapi.c.'>api_checkvalidindex</a>(L, o);
<a name='L741'>  <a href='../D/1559.html' title='Multiple defined in 2 places.'>api_check</a>(L, <a href='../S/282.html#L82' title='Defined at 82 in deps/lua/src/lobject.h.'>ttistable</a>(L-&gt;top - 1));
<a name='L742'>  <b>switch</b> (<a href='../S/282.html#L90' title='Defined at 90 in deps/lua/src/lobject.h.'>ttype</a>(o)) <font color='red'>{</font>
<a name='L743'>    <b>case</b> <a href='../S/266.html#L80' title='Defined at 80 in deps/lua/src/lua.h.'>LUA_TFUNCTION</a>:
<a name='L744'>      <a href='../S/282.html#L98' title='Defined at 98 in deps/lua/src/lobject.h.'>clvalue</a>(o)-&gt;c.env = <a href='../S/282.html#L99' title='Defined at 99 in deps/lua/src/lobject.h.'>hvalue</a>(L-&gt;top - 1);
<a name='L745'>      <b>break</b>;
<a name='L746'>    <b>case</b> <a href='../S/266.html#L81' title='Defined at 81 in deps/lua/src/lua.h.'>LUA_TUSERDATA</a>:
<a name='L747'>      <a href='../S/282.html#L97' title='Defined at 97 in deps/lua/src/lobject.h.'>uvalue</a>(o)-&gt;env = <a href='../S/282.html#L99' title='Defined at 99 in deps/lua/src/lobject.h.'>hvalue</a>(L-&gt;top - 1);
<a name='L748'>      <b>break</b>;
<a name='L749'>    <b>case</b> <a href='../S/266.html#L82' title='Defined at 82 in deps/lua/src/lua.h.'>LUA_TTHREAD</a>:
<a name='L750'>      <a href='../S/282.html#L148' title='Defined at 148 in deps/lua/src/lobject.h.'>sethvalue</a>(L, <a href='../S/298.html#L22' title='Defined at 22 in deps/lua/src/lstate.h.'>gt</a>(<a href='../S/282.html#L101' title='Defined at 101 in deps/lua/src/lobject.h.'>thvalue</a>(o)), <a href='../S/282.html#L99' title='Defined at 99 in deps/lua/src/lobject.h.'>hvalue</a>(L-&gt;top - 1));
<a name='L751'>      <b>break</b>;
<a name='L752'>    <b>default</b>:
<a name='L753'>      res = 0;
<a name='L754'>      <b>break</b>;
<a name='L755'>  <font color='red'>}</font>
<a name='L756'>  <b>if</b> (res) <a href='../S/261.html#L92' title='Defined at 92 in deps/lua/src/lgc.h.'>luaC_objbarrier</a>(L, <a href='../S/282.html#L91' title='Defined at 91 in deps/lua/src/lobject.h.'>gcvalue</a>(o), <a href='../S/282.html#L99' title='Defined at 99 in deps/lua/src/lobject.h.'>hvalue</a>(L-&gt;top - 1));
<a name='L757'>  L-&gt;top--;
<a name='L758'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L759'>  <b>return</b> res;
<a name='L760'><font color='red'>}</font>
<a name='L761'>
<a name='L762'>
<a name='L763'><i><font color='green'>/*</font></i>
<a name='L764'><i><font color='green'>** `load' and `call' functions (run Lua code)</font></i>
<a name='L765'><i><font color='green'>*/</font></i>
<a name='L766'>
<a name='L767'>
<a name='L768'><font color='darkred'>#define</font> <a href='../R/1228.html' title='Multiple refered from 2 places.'>adjustresults</a>(L,nres) \
<a name='L769'>    <font color='red'>{</font> <b>if</b> (nres == <a href='../S/266.html#L30' title='Defined at 30 in deps/lua/src/lua.h.'>LUA_MULTRET</a> &amp;&amp; L-&gt;top &gt;= L-&gt;ci-&gt;top) L-&gt;ci-&gt;top = L-&gt;top; <font color='red'>}</font>
<a name='L770'>
<a name='L771'>
<a name='L772'><font color='darkred'>#define</font> <a href='../R/1558.html' title='Multiple refered from 2 places.'>checkresults</a>(L,na,nr) \
<a name='L773'>     <a href='../D/1559.html' title='Multiple defined in 2 places.'>api_check</a>(L, (nr) == <a href='../S/266.html#L30' title='Defined at 30 in deps/lua/src/lua.h.'>LUA_MULTRET</a> || (L-&gt;ci-&gt;top - L-&gt;top &gt;= (nr) - (na)))
<a name='L774'>        
<a name='L775'>
<a name='L776'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>void</b> <a href='../R/2759.html' title='Multiple refered from 17 places.'>lua_call</a> (lua_State *L, <b>int</b> nargs, <b>int</b> nresults) <font color='red'>{</font>
<a name='L777'>  <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> func;
<a name='L778'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L779'>  <a href='../S/272.html#L41' title='Defined at 41 in deps/lua/src/lapi.c.'>api_checknelems</a>(L, nargs+1);
<a name='L780'>  <a href='../S/272.html#L772' title='Defined at 772 in deps/lua/src/lapi.c.'>checkresults</a>(L, nargs, nresults);
<a name='L781'>  func = L-&gt;top - (nargs+1);
<a name='L782'>  <a href='../S/297.html#L369' title='Defined at 369 in deps/lua/src/ldo.c.'>luaD_call</a>(L, func, nresults);
<a name='L783'>  <a href='../S/272.html#L768' title='Defined at 768 in deps/lua/src/lapi.c.'>adjustresults</a>(L, nresults);
<a name='L784'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L785'><font color='red'>}</font>
<a name='L786'>
<a name='L787'>
<a name='L788'>
<a name='L789'><i><font color='green'>/*</font></i>
<a name='L790'><i><font color='green'>** Execute a protected call.</font></i>
<a name='L791'><i><font color='green'>*/</font></i>
<a name='L792'><b>struct</b> <a href='../R/105.html' title='Multiple refered from 2 places.'>CallS</a> <font color='red'>{</font>  <i><font color='green'>/* data to `f_call' */</font></i>
<a name='L793'>  <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> func;
<a name='L794'>  <b>int</b> nresults;
<a name='L795'><font color='red'>}</font>;
<a name='L796'>
<a name='L797'>
<a name='L798'><b>static</b> <b>void</b> <a href='../S/272.html#L821' title='Refered from 821 in deps/lua/src/lapi.c.'>f_call</a> (lua_State *L, <b>void</b> *ud) <font color='red'>{</font>
<a name='L799'>  <b>struct</b> <a href='../S/272.html#L792' title='Defined at 792 in deps/lua/src/lapi.c.'>CallS</a> *c = <a href='../S/310.html#L75' title='Defined at 75 in deps/lua/src/llimits.h.'>cast</a>(<b>struct</b> <a href='../S/272.html#L792' title='Defined at 792 in deps/lua/src/lapi.c.'>CallS</a> *, ud);
<a name='L800'>  <a href='../S/297.html#L369' title='Defined at 369 in deps/lua/src/ldo.c.'>luaD_call</a>(L, c-&gt;func, c-&gt;nresults);
<a name='L801'><font color='red'>}</font>
<a name='L802'>
<a name='L803'>
<a name='L804'>
<a name='L805'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>int</b> <a href='../R/2812.html' title='Multiple refered from 13 places.'>lua_pcall</a> (lua_State *L, <b>int</b> nargs, <b>int</b> nresults, <b>int</b> errfunc) <font color='red'>{</font>
<a name='L806'>  <b>struct</b> <a href='../S/272.html#L792' title='Defined at 792 in deps/lua/src/lapi.c.'>CallS</a> c;
<a name='L807'>  <b>int</b> status;
<a name='L808'>  ptrdiff_t func;
<a name='L809'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L810'>  <a href='../S/272.html#L41' title='Defined at 41 in deps/lua/src/lapi.c.'>api_checknelems</a>(L, nargs+1);
<a name='L811'>  <a href='../S/272.html#L772' title='Defined at 772 in deps/lua/src/lapi.c.'>checkresults</a>(L, nargs, nresults);
<a name='L812'>  <b>if</b> (errfunc == 0)
<a name='L813'>    func = 0;
<a name='L814'>  <b>else</b> <font color='red'>{</font>
<a name='L815'>    <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> o = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, errfunc);
<a name='L816'>    <a href='../S/272.html#L43' title='Defined at 43 in deps/lua/src/lapi.c.'>api_checkvalidindex</a>(L, o);
<a name='L817'>    func = <a href='../S/296.html#L24' title='Defined at 24 in deps/lua/src/ldo.h.'>savestack</a>(L, o);
<a name='L818'>  <font color='red'>}</font>
<a name='L819'>  c.func = L-&gt;top - (nargs+1);  <i><font color='green'>/* function to be called */</font></i>
<a name='L820'>  c.nresults = nresults;
<a name='L821'>  status = <a href='../S/297.html#L455' title='Defined at 455 in deps/lua/src/ldo.c.'>luaD_pcall</a>(L, <a href='../S/272.html#L798' title='Defined at 798 in deps/lua/src/lapi.c.'>f_call</a>, &amp;c, <a href='../S/296.html#L24' title='Defined at 24 in deps/lua/src/ldo.h.'>savestack</a>(L, c.func), func);
<a name='L822'>  <a href='../S/272.html#L768' title='Defined at 768 in deps/lua/src/lapi.c.'>adjustresults</a>(L, nresults);
<a name='L823'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L824'>  <b>return</b> status;
<a name='L825'><font color='red'>}</font>
<a name='L826'>
<a name='L827'>
<a name='L828'><i><font color='green'>/*</font></i>
<a name='L829'><i><font color='green'>** Execute a protected C call.</font></i>
<a name='L830'><i><font color='green'>*/</font></i>
<a name='L831'><b>struct</b> <a href='../R/58.html' title='Multiple refered from 2 places.'>CCallS</a> <font color='red'>{</font>  <i><font color='green'>/* data to `f_Ccall' */</font></i>
<a name='L832'>  lua_CFunction func;
<a name='L833'>  <b>void</b> *ud;
<a name='L834'><font color='red'>}</font>;
<a name='L835'>
<a name='L836'>
<a name='L837'><b>static</b> <b>void</b> <a href='../S/272.html#L856' title='Refered from 856 in deps/lua/src/lapi.c.'>f_Ccall</a> (lua_State *L, <b>void</b> *ud) <font color='red'>{</font>
<a name='L838'>  <b>struct</b> <a href='../S/272.html#L831' title='Defined at 831 in deps/lua/src/lapi.c.'>CCallS</a> *c = <a href='../S/310.html#L75' title='Defined at 75 in deps/lua/src/llimits.h.'>cast</a>(<b>struct</b> <a href='../S/272.html#L831' title='Defined at 831 in deps/lua/src/lapi.c.'>CCallS</a> *, ud);
<a name='L839'>  <a href='../D/109.html' title='Multiple defined in 2 places.'>Closure</a> *cl;
<a name='L840'>  cl = <a href='../S/258.html#L23' title='Defined at 23 in deps/lua/src/lfunc.c.'>luaF_newCclosure</a>(L, 0, <a href='../S/272.html#L79' title='Defined at 79 in deps/lua/src/lapi.c.'>getcurrenv</a>(L));
<a name='L841'>  cl-&gt;c.f = c-&gt;func;
<a name='L842'>  <a href='../S/282.html#L143' title='Defined at 143 in deps/lua/src/lobject.h.'>setclvalue</a>(L, L-&gt;top, cl);  <i><font color='green'>/* push function */</font></i>
<a name='L843'>  <a href='../S/272.html#L45' title='Defined at 45 in deps/lua/src/lapi.c.'>api_incr_top</a>(L);
<a name='L844'>  <a href='../S/282.html#L122' title='Defined at 122 in deps/lua/src/lobject.h.'>setpvalue</a>(L-&gt;top, c-&gt;ud);  <i><font color='green'>/* push only argument */</font></i>
<a name='L845'>  <a href='../S/272.html#L45' title='Defined at 45 in deps/lua/src/lapi.c.'>api_incr_top</a>(L);
<a name='L846'>  <a href='../S/297.html#L369' title='Defined at 369 in deps/lua/src/ldo.c.'>luaD_call</a>(L, L-&gt;top - 2, 0);
<a name='L847'><font color='red'>}</font>
<a name='L848'>
<a name='L849'>
<a name='L850'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>int</b> <a href='../R/2763.html' title='Multiple refered from 3 places.'>lua_cpcall</a> (lua_State *L, lua_CFunction func, <b>void</b> *ud) <font color='red'>{</font>
<a name='L851'>  <b>struct</b> <a href='../S/272.html#L831' title='Defined at 831 in deps/lua/src/lapi.c.'>CCallS</a> c;
<a name='L852'>  <b>int</b> status;
<a name='L853'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L854'>  c.func = func;
<a name='L855'>  c.ud = ud;
<a name='L856'>  status = <a href='../S/297.html#L455' title='Defined at 455 in deps/lua/src/ldo.c.'>luaD_pcall</a>(L, <a href='../S/272.html#L837' title='Defined at 837 in deps/lua/src/lapi.c.'>f_Ccall</a>, &amp;c, <a href='../S/296.html#L24' title='Defined at 24 in deps/lua/src/ldo.h.'>savestack</a>(L, L-&gt;top), 0);
<a name='L857'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L858'>  <b>return</b> status;
<a name='L859'><font color='red'>}</font>
<a name='L860'>
<a name='L861'>
<a name='L862'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>int</b> <a href='../R/2799.html' title='Multiple refered from 4 places.'>lua_load</a> (lua_State *L, lua_Reader reader, <b>void</b> *data,
<a name='L863'>                      <b>const</b> <b>char</b> *chunkname) <font color='red'>{</font>
<a name='L864'>  <a href='../S/312.html#L18' title='Defined at 18 in deps/lua/src/lzio.h.'>ZIO</a> z;
<a name='L865'>  <b>int</b> status;
<a name='L866'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L867'>  <b>if</b> (!chunkname) chunkname = "?";
<a name='L868'>  <a href='../S/289.html#L48' title='Defined at 48 in deps/lua/src/lzio.c.'>luaZ_init</a>(L, &amp;z, reader, data);
<a name='L869'>  status = <a href='../S/297.html#L508' title='Defined at 508 in deps/lua/src/ldo.c.'>luaD_protectedparser</a>(L, &amp;z, chunkname);
<a name='L870'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L871'>  <b>return</b> status;
<a name='L872'><font color='red'>}</font>
<a name='L873'>
<a name='L874'>
<a name='L875'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>int</b> <a href='../R/2765.html' title='Multiple refered from 2 places.'>lua_dump</a> (lua_State *L, lua_Writer writer, <b>void</b> *data) <font color='red'>{</font>
<a name='L876'>  <b>int</b> status;
<a name='L877'>  <a href='../S/282.html#L75' title='Defined at 75 in deps/lua/src/lobject.h.'>TValue</a> *o;
<a name='L878'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L879'>  <a href='../S/272.html#L41' title='Defined at 41 in deps/lua/src/lapi.c.'>api_checknelems</a>(L, 1);
<a name='L880'>  o = L-&gt;top - 1;
<a name='L881'>  <b>if</b> (<a href='../S/282.html#L316' title='Defined at 316 in deps/lua/src/lobject.h.'>isLfunction</a>(o))
<a name='L882'>    status = <a href='../D/3049.html' title='Multiple defined in 2 places.'>luaU_dump</a>(L, <a href='../S/282.html#L98' title='Defined at 98 in deps/lua/src/lobject.h.'>clvalue</a>(o)-&gt;l.p, <a href='../D/4477.html' title='Multiple defined in 2 places.'>writer</a>, data, 0);
<a name='L883'>  <b>else</b>
<a name='L884'>    status = 1;
<a name='L885'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L886'>  <b>return</b> status;
<a name='L887'><font color='red'>}</font>
<a name='L888'>
<a name='L889'>
<a name='L890'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>int</b>  <a href='../R/2852.html' title='Multiple refered from 2 places.'>lua_status</a> (lua_State *L) <font color='red'>{</font>
<a name='L891'>  <b>return</b> L-&gt;status;
<a name='L892'><font color='red'>}</font>
<a name='L893'>
<a name='L894'>
<a name='L895'><i><font color='green'>/*</font></i>
<a name='L896'><i><font color='green'>** Garbage-collection function</font></i>
<a name='L897'><i><font color='green'>*/</font></i>
<a name='L898'>
<a name='L899'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>int</b> <a href='../R/2769.html' title='Multiple refered from 10 places.'>lua_gc</a> (lua_State *L, <b>int</b> what, <b>int</b> data) <font color='red'>{</font>
<a name='L900'>  <b>int</b> res = 0;
<a name='L901'>  <a href='../D/2382.html' title='Multiple defined in 2 places.'>global_State</a> *g;
<a name='L902'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L903'>  g = <a href='../S/298.html#L130' title='Defined at 130 in deps/lua/src/lstate.h.'>G</a>(L);
<a name='L904'>  <b>switch</b> (what) <font color='red'>{</font>
<a name='L905'>    <b>case</b> <a href='../S/266.html#L221' title='Defined at 221 in deps/lua/src/lua.h.'>LUA_GCSTOP</a>: <font color='red'>{</font>
<a name='L906'>      g-&gt;GCthreshold = <a href='../S/310.html#L32' title='Defined at 32 in deps/lua/src/llimits.h.'>MAX_LUMEM</a>;
<a name='L907'>      <b>break</b>;
<a name='L908'>    <font color='red'>}</font>
<a name='L909'>    <b>case</b> <a href='../S/266.html#L222' title='Defined at 222 in deps/lua/src/lua.h.'>LUA_GCRESTART</a>: <font color='red'>{</font>
<a name='L910'>      g-&gt;GCthreshold = g-&gt;totalbytes;
<a name='L911'>      <b>break</b>;
<a name='L912'>    <font color='red'>}</font>
<a name='L913'>    <b>case</b> <a href='../S/266.html#L223' title='Defined at 223 in deps/lua/src/lua.h.'>LUA_GCCOLLECT</a>: <font color='red'>{</font>
<a name='L914'>      <a href='../S/291.html#L636' title='Defined at 636 in deps/lua/src/lgc.c.'>luaC_fullgc</a>(L);
<a name='L915'>      <b>break</b>;
<a name='L916'>    <font color='red'>}</font>
<a name='L917'>    <b>case</b> <a href='../S/266.html#L224' title='Defined at 224 in deps/lua/src/lua.h.'>LUA_GCCOUNT</a>: <font color='red'>{</font>
<a name='L918'>      <i><font color='green'>/* GC values are expressed in Kbytes: #bytes/2^10 */</font></i>
<a name='L919'>      res = <a href='../S/310.html#L80' title='Defined at 80 in deps/lua/src/llimits.h.'>cast_int</a>(g-&gt;totalbytes &gt;&gt; 10);
<a name='L920'>      <b>break</b>;
<a name='L921'>    <font color='red'>}</font>
<a name='L922'>    <b>case</b> <a href='../S/266.html#L225' title='Defined at 225 in deps/lua/src/lua.h.'>LUA_GCCOUNTB</a>: <font color='red'>{</font>
<a name='L923'>      res = <a href='../S/310.html#L80' title='Defined at 80 in deps/lua/src/llimits.h.'>cast_int</a>(g-&gt;totalbytes &amp; 0x3ff);
<a name='L924'>      <b>break</b>;
<a name='L925'>    <font color='red'>}</font>
<a name='L926'>    <b>case</b> <a href='../S/266.html#L226' title='Defined at 226 in deps/lua/src/lua.h.'>LUA_GCSTEP</a>: <font color='red'>{</font>
<a name='L927'>      <a href='../S/310.html#L20' title='Defined at 20 in deps/lua/src/llimits.h.'>lu_mem</a> a = (<a href='../S/310.html#L75' title='Defined at 75 in deps/lua/src/llimits.h.'>cast</a>(<a href='../S/310.html#L20' title='Defined at 20 in deps/lua/src/llimits.h.'>lu_mem</a>, data) &lt;&lt; 10);
<a name='L928'>      <b>if</b> (a &lt;= g-&gt;totalbytes)
<a name='L929'>        g-&gt;GCthreshold = g-&gt;totalbytes - a;
<a name='L930'>      <b>else</b>
<a name='L931'>        g-&gt;GCthreshold = 0;
<a name='L932'>      <b>while</b> (g-&gt;GCthreshold &lt;= g-&gt;totalbytes) <font color='red'>{</font>
<a name='L933'>        <a href='../S/291.html#L610' title='Defined at 610 in deps/lua/src/lgc.c.'>luaC_step</a>(L);
<a name='L934'>        <b>if</b> (g-&gt;gcstate == <a href='../S/261.html#L17' title='Defined at 17 in deps/lua/src/lgc.h.'>GCSpause</a>) <font color='red'>{</font>  <i><font color='green'>/* end of cycle? */</font></i>
<a name='L935'>          res = 1;  <i><font color='green'>/* signal it */</font></i>
<a name='L936'>          <b>break</b>;
<a name='L937'>        <font color='red'>}</font>
<a name='L938'>      <font color='red'>}</font>
<a name='L939'>      <b>break</b>;
<a name='L940'>    <font color='red'>}</font>
<a name='L941'>    <b>case</b> <a href='../S/266.html#L227' title='Defined at 227 in deps/lua/src/lua.h.'>LUA_GCSETPAUSE</a>: <font color='red'>{</font>
<a name='L942'>      res = g-&gt;gcpause;
<a name='L943'>      g-&gt;gcpause = data;
<a name='L944'>      <b>break</b>;
<a name='L945'>    <font color='red'>}</font>
<a name='L946'>    <b>case</b> <a href='../S/266.html#L228' title='Defined at 228 in deps/lua/src/lua.h.'>LUA_GCSETSTEPMUL</a>: <font color='red'>{</font>
<a name='L947'>      res = g-&gt;gcstepmul;
<a name='L948'>      g-&gt;gcstepmul = data;
<a name='L949'>      <b>break</b>;
<a name='L950'>    <font color='red'>}</font>
<a name='L951'>    <b>default</b>: res = -1;  <i><font color='green'>/* invalid option */</font></i>
<a name='L952'>  <font color='red'>}</font>
<a name='L953'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L954'>  <b>return</b> res;
<a name='L955'><font color='red'>}</font>
<a name='L956'>
<a name='L957'>
<a name='L958'>
<a name='L959'><i><font color='green'>/*</font></i>
<a name='L960'><i><font color='green'>** miscellaneous functions</font></i>
<a name='L961'><i><font color='green'>*/</font></i>
<a name='L962'>
<a name='L963'>
<a name='L964'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>int</b> <a href='../R/2767.html' title='Multiple refered from 14 places.'>lua_error</a> (lua_State *L) <font color='red'>{</font>
<a name='L965'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L966'>  <a href='../S/272.html#L41' title='Defined at 41 in deps/lua/src/lapi.c.'>api_checknelems</a>(L, 1);
<a name='L967'>  <a href='../S/299.html#L618' title='Defined at 618 in deps/lua/src/ldebug.c.'>luaG_errormsg</a>(L);
<a name='L968'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L969'>  <b>return</b> 0;  <i><font color='green'>/* to avoid warnings */</font></i>
<a name='L970'><font color='red'>}</font>
<a name='L971'>
<a name='L972'>
<a name='L973'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>int</b> <a href='../R/2806.html' title='Multiple refered from 9 places.'>lua_next</a> (lua_State *L, <b>int</b> idx) <font color='red'>{</font>
<a name='L974'>  <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> t;
<a name='L975'>  <b>int</b> more;
<a name='L976'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L977'>  t = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, idx);
<a name='L978'>  <a href='../D/1559.html' title='Multiple defined in 2 places.'>api_check</a>(L, <a href='../S/282.html#L82' title='Defined at 82 in deps/lua/src/lobject.h.'>ttistable</a>(t));
<a name='L979'>  more = <a href='../S/259.html#L162' title='Defined at 162 in deps/lua/src/ltable.c.'>luaH_next</a>(L, <a href='../S/282.html#L99' title='Defined at 99 in deps/lua/src/lobject.h.'>hvalue</a>(t), L-&gt;top - 1);
<a name='L980'>  <b>if</b> (more) <font color='red'>{</font>
<a name='L981'>    <a href='../S/272.html#L45' title='Defined at 45 in deps/lua/src/lapi.c.'>api_incr_top</a>(L);
<a name='L982'>  <font color='red'>}</font>
<a name='L983'>  <b>else</b>  <i><font color='green'>/* no more elements */</font></i>
<a name='L984'>    L-&gt;top -= 1;  <i><font color='green'>/* remove key */</font></i>
<a name='L985'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L986'>  <b>return</b> more;
<a name='L987'><font color='red'>}</font>
<a name='L988'>
<a name='L989'>
<a name='L990'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>void</b> <a href='../R/2762.html' title='Multiple refered from 11 places.'>lua_concat</a> (lua_State *L, <b>int</b> n) <font color='red'>{</font>
<a name='L991'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L992'>  <a href='../S/272.html#L41' title='Defined at 41 in deps/lua/src/lapi.c.'>api_checknelems</a>(L, n);
<a name='L993'>  <b>if</b> (n &gt;= 2) <font color='red'>{</font>
<a name='L994'>    <a href='../S/261.html#L80' title='Defined at 80 in deps/lua/src/lgc.h.'>luaC_checkGC</a>(L);
<a name='L995'>    <a href='../S/290.html#L278' title='Defined at 278 in deps/lua/src/lvm.c.'>luaV_concat</a>(L, n, <a href='../S/310.html#L80' title='Defined at 80 in deps/lua/src/llimits.h.'>cast_int</a>(L-&gt;top - L-&gt;base) - 1);
<a name='L996'>    L-&gt;top -= (n-1);
<a name='L997'>  <font color='red'>}</font>
<a name='L998'>  <b>else</b> <b>if</b> (n == 0) <font color='red'>{</font>  <i><font color='green'>/* push empty string */</font></i>
<a name='L999'>    <a href='../S/282.html#L175' title='Defined at 175 in deps/lua/src/lobject.h.'>setsvalue2s</a>(L, L-&gt;top, <a href='../S/284.html#L75' title='Defined at 75 in deps/lua/src/lstring.c.'>luaS_newlstr</a>(L, "", 0));
<a name='L1000'>    <a href='../S/272.html#L45' title='Defined at 45 in deps/lua/src/lapi.c.'>api_incr_top</a>(L);
<a name='L1001'>  <font color='red'>}</font>
<a name='L1002'>  <i><font color='green'>/* else n == 1; nothing to do */</font></i>
<a name='L1003'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L1004'><font color='red'>}</font>
<a name='L1005'>
<a name='L1006'>
<a name='L1007'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> lua_Alloc lua_getallocf (lua_State *L, <b>void</b> **ud) <font color='red'>{</font>
<a name='L1008'>  lua_Alloc f;
<a name='L1009'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L1010'>  <b>if</b> (ud) *ud = <a href='../S/298.html#L130' title='Defined at 130 in deps/lua/src/lstate.h.'>G</a>(L)-&gt;ud;
<a name='L1011'>  f = <a href='../S/298.html#L130' title='Defined at 130 in deps/lua/src/lstate.h.'>G</a>(L)-&gt;frealloc;
<a name='L1012'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L1013'>  <b>return</b> f;
<a name='L1014'><font color='red'>}</font>
<a name='L1015'>
<a name='L1016'>
<a name='L1017'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>void</b> <a href='../S/266.html#L244' title='Refered from 244 in deps/lua/src/lua.h.'>lua_setallocf</a> (lua_State *L, lua_Alloc f, <b>void</b> *ud) <font color='red'>{</font>
<a name='L1018'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L1019'>  <a href='../S/298.html#L130' title='Defined at 130 in deps/lua/src/lstate.h.'>G</a>(L)-&gt;ud = ud;
<a name='L1020'>  <a href='../S/298.html#L130' title='Defined at 130 in deps/lua/src/lstate.h.'>G</a>(L)-&gt;frealloc = f;
<a name='L1021'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L1022'><font color='red'>}</font>
<a name='L1023'>
<a name='L1024'>
<a name='L1025'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>void</b> *<a href='../R/2805.html' title='Multiple refered from 5 places.'>lua_newuserdata</a> (lua_State *L, size_t size) <font color='red'>{</font>
<a name='L1026'>  <a href='../D/1268.html' title='Multiple defined in 2 places.'>Udata</a> *u;
<a name='L1027'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L1028'>  <a href='../S/261.html#L80' title='Defined at 80 in deps/lua/src/lgc.h.'>luaC_checkGC</a>(L);
<a name='L1029'>  u = <a href='../S/284.html#L96' title='Defined at 96 in deps/lua/src/lstring.c.'>luaS_newudata</a>(L, size, <a href='../S/272.html#L79' title='Defined at 79 in deps/lua/src/lapi.c.'>getcurrenv</a>(L));
<a name='L1030'>  <a href='../S/282.html#L133' title='Defined at 133 in deps/lua/src/lobject.h.'>setuvalue</a>(L, L-&gt;top, u);
<a name='L1031'>  <a href='../S/272.html#L45' title='Defined at 45 in deps/lua/src/lapi.c.'>api_incr_top</a>(L);
<a name='L1032'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L1033'>  <b>return</b> u + 1;
<a name='L1034'><font color='red'>}</font>
<a name='L1035'>
<a name='L1036'>
<a name='L1037'>
<a name='L1038'>
<a name='L1039'><b>static</b> <b>const</b> <b>char</b> *<a href='../R/1431.html' title='Multiple refered from 2 places.'>aux_upvalue</a> (StkId fi, <b>int</b> n, TValue **val) <font color='red'>{</font>
<a name='L1040'>  <a href='../D/109.html' title='Multiple defined in 2 places.'>Closure</a> *f;
<a name='L1041'>  <b>if</b> (!<a href='../S/282.html#L83' title='Defined at 83 in deps/lua/src/lobject.h.'>ttisfunction</a>(fi)) <b>return</b> NULL;
<a name='L1042'>  f = <a href='../S/282.html#L98' title='Defined at 98 in deps/lua/src/lobject.h.'>clvalue</a>(fi);
<a name='L1043'>  <b>if</b> (f-&gt;c.isC) <font color='red'>{</font>
<a name='L1044'>    <b>if</b> (!(1 &lt;= n &amp;&amp; n &lt;= f-&gt;c.nupvalues)) <b>return</b> NULL;
<a name='L1045'>    *val = &amp;f-&gt;c.upvalue[n-1];
<a name='L1046'>    <b>return</b> "";
<a name='L1047'>  <font color='red'>}</font>
<a name='L1048'>  <b>else</b> <font color='red'>{</font>
<a name='L1049'>    <a href='../D/722.html' title='Multiple defined in 2 places.'>Proto</a> *p = f-&gt;l.p;
<a name='L1050'>    <b>if</b> (!(1 &lt;= n &amp;&amp; n &lt;= p-&gt;sizeupvalues)) <b>return</b> NULL;
<a name='L1051'>    *val = f-&gt;l.upvals[n-1]-&gt;v;
<a name='L1052'>    <b>return</b> <a href='../S/282.html#L210' title='Defined at 210 in deps/lua/src/lobject.h.'>getstr</a>(p-&gt;upvalues[n-1]);
<a name='L1053'>  <font color='red'>}</font>
<a name='L1054'><font color='red'>}</font>
<a name='L1055'>
<a name='L1056'>
<a name='L1057'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>const</b> <b>char</b> *<a href='../R/2783.html' title='Multiple refered from 2 places.'>lua_getupvalue</a> (lua_State *L, <b>int</b> funcindex, <b>int</b> n) <font color='red'>{</font>
<a name='L1058'>  <b>const</b> <b>char</b> *name;
<a name='L1059'>  <a href='../S/282.html#L75' title='Defined at 75 in deps/lua/src/lobject.h.'>TValue</a> *val;
<a name='L1060'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L1061'>  name = <a href='../S/272.html#L1039' title='Defined at 1039 in deps/lua/src/lapi.c.'>aux_upvalue</a>(<a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, funcindex), n, &amp;val);
<a name='L1062'>  <b>if</b> (name) <font color='red'>{</font>
<a name='L1063'>    <a href='../S/282.html#L174' title='Defined at 174 in deps/lua/src/lobject.h.'>setobj2s</a>(L, L-&gt;top, val);
<a name='L1064'>    <a href='../S/272.html#L45' title='Defined at 45 in deps/lua/src/lapi.c.'>api_incr_top</a>(L);
<a name='L1065'>  <font color='red'>}</font>
<a name='L1066'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L1067'>  <b>return</b> name;
<a name='L1068'><font color='red'>}</font>
<a name='L1069'>
<a name='L1070'>
<a name='L1071'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>const</b> <b>char</b> *<a href='../R/2851.html' title='Multiple refered from 2 places.'>lua_setupvalue</a> (lua_State *L, <b>int</b> funcindex, <b>int</b> n) <font color='red'>{</font>
<a name='L1072'>  <b>const</b> <b>char</b> *name;
<a name='L1073'>  <a href='../S/282.html#L75' title='Defined at 75 in deps/lua/src/lobject.h.'>TValue</a> *val;
<a name='L1074'>  <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> fi;
<a name='L1075'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L1076'>  fi = <a href='../S/272.html#L49' title='Defined at 49 in deps/lua/src/lapi.c.'>index2adr</a>(L, funcindex);
<a name='L1077'>  <a href='../S/272.html#L41' title='Defined at 41 in deps/lua/src/lapi.c.'>api_checknelems</a>(L, 1);
<a name='L1078'>  name = <a href='../S/272.html#L1039' title='Defined at 1039 in deps/lua/src/lapi.c.'>aux_upvalue</a>(fi, n, &amp;val);
<a name='L1079'>  <b>if</b> (name) <font color='red'>{</font>
<a name='L1080'>    L-&gt;top--;
<a name='L1081'>    <a href='../S/282.html#L161' title='Defined at 161 in deps/lua/src/lobject.h.'>setobj</a>(L, val, L-&gt;top);
<a name='L1082'>    <a href='../S/261.html#L86' title='Defined at 86 in deps/lua/src/lgc.h.'>luaC_barrier</a>(L, <a href='../S/282.html#L98' title='Defined at 98 in deps/lua/src/lobject.h.'>clvalue</a>(fi), L-&gt;top);
<a name='L1083'>  <font color='red'>}</font>
<a name='L1084'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L1085'>  <b>return</b> name;
<a name='L1086'><font color='red'>}</font>
<a name='L1087'>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L49'>[^]</a><a href='#L1071'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
