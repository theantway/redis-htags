<html>
<head>
<title>src/t_set.c</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.7.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/401.html'>src</a>/t_set.c</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L41'>[^]</a><a href='#L800'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L41' title='Defined at 41.'>setTypeCreate</a>
<li><a href='#L47' title='Defined at 47.'>setTypeAdd</a>
<li><a href='#L81' title='Defined at 81.'>setTypeRemove</a>
<li><a href='#L100' title='Defined at 100.'>setTypeIsMember</a>
<li><a href='#L114' title='Defined at 114.'>setTypeInitIterator</a>
<li><a href='#L128' title='Defined at 128.'>setTypeReleaseIterator</a>
<li><a href='#L145' title='Defined at 145.'>setTypeNext</a>
<li><a href='#L164' title='Defined at 164.'>setTypeNextObject</a>
<li><a href='#L196' title='Defined at 196.'>setTypeRandomElement</a>
<li><a href='#L208' title='Defined at 208.'>setTypeSize</a>
<li><a href='#L221' title='Defined at 221.'>setTypeConvert</a>
<li><a href='#L250' title='Defined at 250.'>saddCommand</a>
<li><a href='#L274' title='Defined at 274.'>sremCommand</a>
<li><a href='#L297' title='Defined at 297.'>smoveCommand</a>
<li><a href='#L343' title='Defined at 343.'>sismemberCommand</a>
<li><a href='#L356' title='Defined at 356.'>scardCommand</a>
<li><a href='#L365' title='Defined at 365.'>spopCommand</a>
<li><a href='#L402' title='Defined at 402.'>srandmemberWithCountCommand</a>
<li><a href='#L540' title='Defined at 540.'>srandmemberCommand</a>
<li><a href='#L564' title='Defined at 564.'>qsortCompareSetsByCardinality</a>
<li><a href='#L568' title='Defined at 568.'>sinterGenericCommand</a>
<li><a href='#L698' title='Defined at 698.'>sinterCommand</a>
<li><a href='#L702' title='Defined at 702.'>sinterstoreCommand</a>
<li><a href='#L710' title='Defined at 710.'>sunionDiffGenericCommand</a>
<li><a href='#L788' title='Defined at 788.'>sunionCommand</a>
<li><a href='#L792' title='Defined at 792.'>sunionstoreCommand</a>
<li><a href='#L796' title='Defined at 796.'>sdiffCommand</a>
<li><a href='#L800' title='Defined at 800.'>sdiffstoreCommand</a>
</ol>
<hr>
<pre>
<a name='L1'><i><font color='green'>/*</font></i>
<a name='L2'><i><font color='green'> * Copyright (c) 2009-2012, Salvatore Sanfilippo &lt;antirez at gmail dot com&gt;</font></i>
<a name='L3'><i><font color='green'> * All rights reserved.</font></i>
<a name='L4'><i><font color='green'> *</font></i>
<a name='L5'><i><font color='green'> * Redistribution and use in source and binary forms, with or without</font></i>
<a name='L6'><i><font color='green'> * modification, are permitted provided that the following conditions are met:</font></i>
<a name='L7'><i><font color='green'> *</font></i>
<a name='L8'><i><font color='green'> *   * Redistributions of source code must retain the above copyright notice,</font></i>
<a name='L9'><i><font color='green'> *     this list of conditions and the following disclaimer.</font></i>
<a name='L10'><i><font color='green'> *   * Redistributions in binary form must reproduce the above copyright</font></i>
<a name='L11'><i><font color='green'> *     notice, this list of conditions and the following disclaimer in the</font></i>
<a name='L12'><i><font color='green'> *     documentation and/or other materials provided with the distribution.</font></i>
<a name='L13'><i><font color='green'> *   * Neither the name of Redis nor the names of its contributors may be used</font></i>
<a name='L14'><i><font color='green'> *     to endorse or promote products derived from this software without</font></i>
<a name='L15'><i><font color='green'> *     specific prior written permission.</font></i>
<a name='L16'><i><font color='green'> *</font></i>
<a name='L17'><i><font color='green'> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"</font></i>
<a name='L18'><i><font color='green'> * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</font></i>
<a name='L19'><i><font color='green'> * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</font></i>
<a name='L20'><i><font color='green'> * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE</font></i>
<a name='L21'><i><font color='green'> * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR</font></i>
<a name='L22'><i><font color='green'> * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF</font></i>
<a name='L23'><i><font color='green'> * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS</font></i>
<a name='L24'><i><font color='green'> * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN</font></i>
<a name='L25'><i><font color='green'> * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)</font></i>
<a name='L26'><i><font color='green'> * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE</font></i>
<a name='L27'><i><font color='green'> * POSSIBILITY OF SUCH DAMAGE.</font></i>
<a name='L28'><i><font color='green'> */</font></i>
<a name='L29'>
<a name='L30'><font color='darkred'>#include</font> "<a href='32.html'>redis.h</a>"
<a name='L31'>
<a name='L32'><i><font color='green'>/*-----------------------------------------------------------------------------</font></i>
<a name='L33'><i><font color='green'> * Set Commands</font></i>
<a name='L34'><i><font color='green'> *----------------------------------------------------------------------------*/</font></i>
<a name='L35'>
<a name='L36'><b>void</b> <a href='../S/92.html#L710' title='Defined at 710 in src/t_set.c.'>sunionDiffGenericCommand</a>(redisClient *c, robj **setkeys, <b>int</b> setnum, robj *dstkey, <b>int</b> op);
<a name='L37'>
<a name='L38'><i><font color='green'>/* Factory method to return a set that *can* hold "value". When the object has</font></i>
<a name='L39'><i><font color='green'> * an integer-encodable value, an intset will be returned. Otherwise a regular</font></i>
<a name='L40'><i><font color='green'> * hash table. */</font></i>
<a name='L41'><a href='../S/32.html#L318' title='Defined at 318 in src/redis.h.'>robj</a> *<a href='../R/3737.html' title='Multiple refered from 3 places.'>setTypeCreate</a>(robj *value) <font color='red'>{</font>
<a name='L42'>    <b>if</b> (<a href='../S/71.html#L262' title='Defined at 262 in src/object.c.'>isObjectRepresentableAsLongLong</a>(value,NULL) == <a href='../D/848.html' title='Multiple defined in 2 places.'>REDIS_OK</a>)
<a name='L43'>        <b>return</b> <a href='../S/71.html#L119' title='Defined at 119 in src/object.c.'>createIntsetObject</a>();
<a name='L44'>    <b>return</b> <a href='../S/71.html#L112' title='Defined at 112 in src/object.c.'>createSetObject</a>();
<a name='L45'><font color='red'>}</font>
<a name='L46'>
<a name='L47'><b>int</b> <a href='../R/3735.html' title='Multiple refered from 6 places.'>setTypeAdd</a>(robj *subject, robj *value) <font color='red'>{</font>
<a name='L48'>    <b>long</b> <b>long</b> llval;
<a name='L49'>    <b>if</b> (subject-&gt;encoding == <a href='../D/785.html' title='Multiple defined in 2 places.'>REDIS_ENCODING_HT</a>) <font color='red'>{</font>
<a name='L50'>        <b>if</b> (<a href='../D/2061.html' title='Multiple defined in 2 places.'>dictAdd</a>(subject-&gt;ptr,value,NULL) == <a href='../D/124.html' title='Multiple defined in 2 places.'>DICT_OK</a>) <font color='red'>{</font>
<a name='L51'>            <a href='../S/71.html#L214' title='Defined at 214 in src/object.c.'>incrRefCount</a>(value);
<a name='L52'>            <b>return</b> 1;
<a name='L53'>        <font color='red'>}</font>
<a name='L54'>    <font color='red'>}</font> <b>else</b> <b>if</b> (subject-&gt;encoding == <a href='../S/32.html#L136' title='Defined at 136 in src/redis.h.'>REDIS_ENCODING_INTSET</a>) <font color='red'>{</font>
<a name='L55'>        <b>if</b> (<a href='../S/71.html#L262' title='Defined at 262 in src/object.c.'>isObjectRepresentableAsLongLong</a>(value,&amp;llval) == <a href='../D/848.html' title='Multiple defined in 2 places.'>REDIS_OK</a>) <font color='red'>{</font>
<a name='L56'>            <a href='../D/4431.html' title='Multiple defined in 2 places.'>uint8_t</a> success = 0;
<a name='L57'>            subject-&gt;ptr = <a href='../S/44.html#L204' title='Defined at 204 in src/intset.c.'>intsetAdd</a>(subject-&gt;ptr,llval,&amp;success);
<a name='L58'>            <b>if</b> (success) <font color='red'>{</font>
<a name='L59'>                <i><font color='green'>/* Convert to regular set when the intset contains</font></i>
<a name='L60'><i><font color='green'>                 * too many entries. */</font></i>
<a name='L61'>                <b>if</b> (<a href='../S/44.html#L275' title='Defined at 275 in src/intset.c.'>intsetLen</a>(subject-&gt;ptr) &gt; server.set_max_intset_entries)
<a name='L62'>                    <a href='../S/92.html#L221' title='Defined at 221 in src/t_set.c.'>setTypeConvert</a>(subject,<a href='../D/785.html' title='Multiple defined in 2 places.'>REDIS_ENCODING_HT</a>);
<a name='L63'>                <b>return</b> 1;
<a name='L64'>            <font color='red'>}</font>
<a name='L65'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L66'>            <i><font color='green'>/* Failed to get integer from object, convert to regular set. */</font></i>
<a name='L67'>            <a href='../S/92.html#L221' title='Defined at 221 in src/t_set.c.'>setTypeConvert</a>(subject,<a href='../D/785.html' title='Multiple defined in 2 places.'>REDIS_ENCODING_HT</a>);
<a name='L68'>
<a name='L69'>            <i><font color='green'>/* The set *was* an intset and this value is not integer</font></i>
<a name='L70'><i><font color='green'>             * encodable, so dictAdd should always work. */</font></i>
<a name='L71'>            <a href='../S/32.html#L298' title='Defined at 298 in src/redis.h.'>redisAssertWithInfo</a>(NULL,value,<a href='../D/2061.html' title='Multiple defined in 2 places.'>dictAdd</a>(subject-&gt;ptr,value,NULL) == <a href='../D/124.html' title='Multiple defined in 2 places.'>DICT_OK</a>);
<a name='L72'>            <a href='../S/71.html#L214' title='Defined at 214 in src/object.c.'>incrRefCount</a>(value);
<a name='L73'>            <b>return</b> 1;
<a name='L74'>        <font color='red'>}</font>
<a name='L75'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L76'>        <a href='../S/32.html#L300' title='Defined at 300 in src/redis.h.'>redisPanic</a>("Unknown set encoding");
<a name='L77'>    <font color='red'>}</font>
<a name='L78'>    <b>return</b> 0;
<a name='L79'><font color='red'>}</font>
<a name='L80'>
<a name='L81'><b>int</b> <a href='../R/3745.html' title='Multiple refered from 5 places.'>setTypeRemove</a>(robj *setobj, robj *value) <font color='red'>{</font>
<a name='L82'>    <b>long</b> <b>long</b> llval;
<a name='L83'>    <b>if</b> (<a href='../S/282.html#L161' title='Defined at 161 in deps/lua/src/lobject.h.'>setobj</a>-&gt;encoding == <a href='../D/785.html' title='Multiple defined in 2 places.'>REDIS_ENCODING_HT</a>) <font color='red'>{</font>
<a name='L84'>        <b>if</b> (<a href='../D/2066.html' title='Multiple defined in 2 places.'>dictDelete</a>(<a href='../S/282.html#L161' title='Defined at 161 in deps/lua/src/lobject.h.'>setobj</a>-&gt;ptr,value) == <a href='../D/124.html' title='Multiple defined in 2 places.'>DICT_OK</a>) <font color='red'>{</font>
<a name='L85'>            <b>if</b> (<a href='../S/35.html#L562' title='Defined at 562 in src/redis.c.'>htNeedsResize</a>(<a href='../S/282.html#L161' title='Defined at 161 in deps/lua/src/lobject.h.'>setobj</a>-&gt;ptr)) <a href='../S/29.html#L198' title='Defined at 198 in src/dict.c.'>dictResize</a>(<a href='../S/282.html#L161' title='Defined at 161 in deps/lua/src/lobject.h.'>setobj</a>-&gt;ptr);
<a name='L86'>            <b>return</b> 1;
<a name='L87'>        <font color='red'>}</font>
<a name='L88'>    <font color='red'>}</font> <b>else</b> <b>if</b> (<a href='../S/282.html#L161' title='Defined at 161 in deps/lua/src/lobject.h.'>setobj</a>-&gt;encoding == <a href='../S/32.html#L136' title='Defined at 136 in src/redis.h.'>REDIS_ENCODING_INTSET</a>) <font color='red'>{</font>
<a name='L89'>        <b>if</b> (<a href='../S/71.html#L262' title='Defined at 262 in src/object.c.'>isObjectRepresentableAsLongLong</a>(value,&amp;llval) == <a href='../D/848.html' title='Multiple defined in 2 places.'>REDIS_OK</a>) <font color='red'>{</font>
<a name='L90'>            <b>int</b> success;
<a name='L91'>            <a href='../S/282.html#L161' title='Defined at 161 in deps/lua/src/lobject.h.'>setobj</a>-&gt;ptr = <a href='../S/44.html#L234' title='Defined at 234 in src/intset.c.'>intsetRemove</a>(<a href='../S/282.html#L161' title='Defined at 161 in deps/lua/src/lobject.h.'>setobj</a>-&gt;ptr,llval,&amp;success);
<a name='L92'>            <b>if</b> (success) <b>return</b> 1;
<a name='L93'>        <font color='red'>}</font>
<a name='L94'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L95'>        <a href='../S/32.html#L300' title='Defined at 300 in src/redis.h.'>redisPanic</a>("Unknown set encoding");
<a name='L96'>    <font color='red'>}</font>
<a name='L97'>    <b>return</b> 0;
<a name='L98'><font color='red'>}</font>
<a name='L99'>
<a name='L100'><b>int</b> <a href='../R/3739.html' title='Multiple refered from 4 places.'>setTypeIsMember</a>(robj *subject, robj *value) <font color='red'>{</font>
<a name='L101'>    <b>long</b> <b>long</b> llval;
<a name='L102'>    <b>if</b> (subject-&gt;encoding == <a href='../D/785.html' title='Multiple defined in 2 places.'>REDIS_ENCODING_HT</a>) <font color='red'>{</font>
<a name='L103'>        <b>return</b> <a href='../D/2076.html' title='Multiple defined in 2 places.'>dictFind</a>((<a href='../D/2060.html' title='Multiple defined in 4 places.'>dict</a>*)subject-&gt;ptr,value) != NULL;
<a name='L104'>    <font color='red'>}</font> <b>else</b> <b>if</b> (subject-&gt;encoding == <a href='../S/32.html#L136' title='Defined at 136 in src/redis.h.'>REDIS_ENCODING_INTSET</a>) <font color='red'>{</font>
<a name='L105'>        <b>if</b> (<a href='../S/71.html#L262' title='Defined at 262 in src/object.c.'>isObjectRepresentableAsLongLong</a>(value,&amp;llval) == <a href='../D/848.html' title='Multiple defined in 2 places.'>REDIS_OK</a>) <font color='red'>{</font>
<a name='L106'>            <b>return</b> <a href='../S/44.html#L254' title='Defined at 254 in src/intset.c.'>intsetFind</a>((<a href='../D/2513.html' title='Multiple defined in 2 places.'>intset</a>*)subject-&gt;ptr,llval);
<a name='L107'>        <font color='red'>}</font>
<a name='L108'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L109'>        <a href='../S/32.html#L300' title='Defined at 300 in src/redis.h.'>redisPanic</a>("Unknown set encoding");
<a name='L110'>    <font color='red'>}</font>
<a name='L111'>    <b>return</b> 0;
<a name='L112'><font color='red'>}</font>
<a name='L113'>
<a name='L114'><a href='../S/32.html#L729' title='Defined at 729 in src/redis.h.'>setTypeIterator</a> *<a href='../R/3738.html' title='Multiple refered from 8 places.'>setTypeInitIterator</a>(robj *subject) <font color='red'>{</font>
<a name='L115'>    <a href='../S/32.html#L729' title='Defined at 729 in src/redis.h.'>setTypeIterator</a> *si = <a href='../S/39.html#L121' title='Defined at 121 in src/zmalloc.c.'>zmalloc</a>(<b>sizeof</b>(<a href='../S/32.html#L729' title='Defined at 729 in src/redis.h.'>setTypeIterator</a>));
<a name='L116'>    si-&gt;subject = subject;
<a name='L117'>    si-&gt;encoding = subject-&gt;encoding;
<a name='L118'>    <b>if</b> (si-&gt;encoding == <a href='../D/785.html' title='Multiple defined in 2 places.'>REDIS_ENCODING_HT</a>) <font color='red'>{</font>
<a name='L119'>        si-&gt;di = <a href='../D/2087.html' title='Multiple defined in 2 places.'>dictGetIterator</a>(subject-&gt;ptr);
<a name='L120'>    <font color='red'>}</font> <b>else</b> <b>if</b> (si-&gt;encoding == <a href='../S/32.html#L136' title='Defined at 136 in src/redis.h.'>REDIS_ENCODING_INTSET</a>) <font color='red'>{</font>
<a name='L121'>        si-&gt;ii = 0;
<a name='L122'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L123'>        <a href='../S/32.html#L300' title='Defined at 300 in src/redis.h.'>redisPanic</a>("Unknown set encoding");
<a name='L124'>    <font color='red'>}</font>
<a name='L125'>    <b>return</b> si;
<a name='L126'><font color='red'>}</font>
<a name='L127'>
<a name='L128'><b>void</b> <a href='../R/3744.html' title='Multiple refered from 8 places.'>setTypeReleaseIterator</a>(setTypeIterator *si) <font color='red'>{</font>
<a name='L129'>    <b>if</b> (si-&gt;encoding == <a href='../D/785.html' title='Multiple defined in 2 places.'>REDIS_ENCODING_HT</a>)
<a name='L130'>        <a href='../D/2109.html' title='Multiple defined in 2 places.'>dictReleaseIterator</a>(si-&gt;di);
<a name='L131'>    <a href='../S/39.html#L192' title='Defined at 192 in src/zmalloc.c.'>zfree</a>(si);
<a name='L132'><font color='red'>}</font>
<a name='L133'>
<a name='L134'><i><font color='green'>/* Move to the next entry in the set. Returns the object at the current</font></i>
<a name='L135'><i><font color='green'> * position.</font></i>
<a name='L136'><i><font color='green'> *</font></i>
<a name='L137'><i><font color='green'> * Since set elements can be internally be stored as redis objects or</font></i>
<a name='L138'><i><font color='green'> * simple arrays of integers, setTypeNext returns the encoding of the</font></i>
<a name='L139'><i><font color='green'> * set object you are iterating, and will populate the appropriate pointer</font></i>
<a name='L140'><i><font color='green'> * (eobj) or (llobj) accordingly.</font></i>
<a name='L141'><i><font color='green'> *</font></i>
<a name='L142'><i><font color='green'> * When there are no longer elements -1 is returned.</font></i>
<a name='L143'><i><font color='green'> * Returned objects ref count is not incremented, so this function is</font></i>
<a name='L144'><i><font color='green'> * copy on write friendly. */</font></i>
<a name='L145'><b>int</b> <a href='../R/3741.html' title='Multiple refered from 5 places.'>setTypeNext</a>(setTypeIterator *si, robj **objele, <a href='../S/160.html#L89' title='Defined at 89 in deps/jemalloc/include/msvc_compat/stdint.h.'>int64_t</a> *llele) <font color='red'>{</font>
<a name='L146'>    <b>if</b> (si-&gt;encoding == <a href='../D/785.html' title='Multiple defined in 2 places.'>REDIS_ENCODING_HT</a>) <font color='red'>{</font>
<a name='L147'>        <a href='../D/2073.html' title='Multiple defined in 4 places.'>dictEntry</a> *de = <a href='../D/2101.html' title='Multiple defined in 2 places.'>dictNext</a>(si-&gt;di);
<a name='L148'>        <b>if</b> (de == NULL) <b>return</b> -1;
<a name='L149'>        *objele = <a href='../S/88.html#L131' title='Defined at 131 in src/dict.h.'>dictGetKey</a>(de);
<a name='L150'>    <font color='red'>}</font> <b>else</b> <b>if</b> (si-&gt;encoding == <a href='../S/32.html#L136' title='Defined at 136 in src/redis.h.'>REDIS_ENCODING_INTSET</a>) <font color='red'>{</font>
<a name='L151'>        <b>if</b> (!<a href='../S/44.html#L266' title='Defined at 266 in src/intset.c.'>intsetGet</a>(si-&gt;subject-&gt;ptr,si-&gt;ii++,llele))
<a name='L152'>            <b>return</b> -1;
<a name='L153'>    <font color='red'>}</font>
<a name='L154'>    <b>return</b> si-&gt;encoding;
<a name='L155'><font color='red'>}</font>
<a name='L156'>
<a name='L157'><i><font color='green'>/* The not copy on write friendly version but easy to use version</font></i>
<a name='L158'><i><font color='green'> * of setTypeNext() is setTypeNextObject(), returning new objects</font></i>
<a name='L159'><i><font color='green'> * or incrementing the ref count of returned objects. So if you don't</font></i>
<a name='L160'><i><font color='green'> * retain a pointer to this object you should call decrRefCount() against it.</font></i>
<a name='L161'><i><font color='green'> *</font></i>
<a name='L162'><i><font color='green'> * This function is the way to go for write operations where COW is not</font></i>
<a name='L163'><i><font color='green'> * an issue as the result will be anyway of incrementing the ref count. */</font></i>
<a name='L164'><a href='../S/32.html#L318' title='Defined at 318 in src/redis.h.'>robj</a> *<a href='../R/3742.html' title='Multiple refered from 5 places.'>setTypeNextObject</a>(setTypeIterator *si) <font color='red'>{</font>
<a name='L165'>    <a href='../S/160.html#L89' title='Defined at 89 in deps/jemalloc/include/msvc_compat/stdint.h.'>int64_t</a> intele;
<a name='L166'>    <a href='../S/32.html#L318' title='Defined at 318 in src/redis.h.'>robj</a> *objele;
<a name='L167'>    <b>int</b> encoding;
<a name='L168'>
<a name='L169'>    encoding = <a href='../S/92.html#L145' title='Defined at 145 in src/t_set.c.'>setTypeNext</a>(si,&amp;objele,&amp;intele);
<a name='L170'>    <b>switch</b>(encoding) <font color='red'>{</font>
<a name='L171'>        <b>case</b> -1:    <b>return</b> NULL;
<a name='L172'>        <b>case</b> <a href='../S/32.html#L136' title='Defined at 136 in src/redis.h.'>REDIS_ENCODING_INTSET</a>:
<a name='L173'>            <b>return</b> <a href='../S/71.html#L51' title='Defined at 51 in src/object.c.'>createStringObjectFromLongLong</a>(intele);
<a name='L174'>        <b>case</b> <a href='../D/785.html' title='Multiple defined in 2 places.'>REDIS_ENCODING_HT</a>:
<a name='L175'>            <a href='../S/71.html#L214' title='Defined at 214 in src/object.c.'>incrRefCount</a>(objele);
<a name='L176'>            <b>return</b> objele;
<a name='L177'>        <b>default</b>:
<a name='L178'>            <a href='../S/32.html#L300' title='Defined at 300 in src/redis.h.'>redisPanic</a>("Unsupported encoding");
<a name='L179'>    <font color='red'>}</font>
<a name='L180'>    <b>return</b> NULL; <i><font color='green'>/* just to suppress warnings */</font></i>
<a name='L181'><font color='red'>}</font>
<a name='L182'>
<a name='L183'><i><font color='green'>/* Return random element from a non empty set.</font></i>
<a name='L184'><i><font color='green'> * The returned element can be a int64_t value if the set is encoded</font></i>
<a name='L185'><i><font color='green'> * as an "intset" blob of integers, or a redis object if the set</font></i>
<a name='L186'><i><font color='green'> * is a regular set.</font></i>
<a name='L187'><i><font color='green'> *</font></i>
<a name='L188'><i><font color='green'> * The caller provides both pointers to be populated with the right</font></i>
<a name='L189'><i><font color='green'> * object. The return value of the function is the object-&gt;encoding</font></i>
<a name='L190'><i><font color='green'> * field of the object and is used by the caller to check if the</font></i>
<a name='L191'><i><font color='green'> * int64_t pointer or the redis object pointere was populated.</font></i>
<a name='L192'><i><font color='green'> *</font></i>
<a name='L193'><i><font color='green'> * When an object is returned (the set was a real set) the ref count</font></i>
<a name='L194'><i><font color='green'> * of the object is not incremented so this function can be considered</font></i>
<a name='L195'><i><font color='green'> * copy on write friendly. */</font></i>
<a name='L196'><b>int</b> <a href='../R/3743.html' title='Multiple refered from 5 places.'>setTypeRandomElement</a>(robj *setobj, robj **objele, <a href='../S/160.html#L89' title='Defined at 89 in deps/jemalloc/include/msvc_compat/stdint.h.'>int64_t</a> *llele) <font color='red'>{</font>
<a name='L197'>    <b>if</b> (<a href='../S/282.html#L161' title='Defined at 161 in deps/lua/src/lobject.h.'>setobj</a>-&gt;encoding == <a href='../D/785.html' title='Multiple defined in 2 places.'>REDIS_ENCODING_HT</a>) <font color='red'>{</font>
<a name='L198'>        <a href='../D/2073.html' title='Multiple defined in 4 places.'>dictEntry</a> *de = <a href='../S/29.html#L568' title='Defined at 568 in src/dict.c.'>dictGetRandomKey</a>(<a href='../S/282.html#L161' title='Defined at 161 in deps/lua/src/lobject.h.'>setobj</a>-&gt;ptr);
<a name='L199'>        *objele = <a href='../S/88.html#L131' title='Defined at 131 in src/dict.h.'>dictGetKey</a>(de);
<a name='L200'>    <font color='red'>}</font> <b>else</b> <b>if</b> (<a href='../S/282.html#L161' title='Defined at 161 in deps/lua/src/lobject.h.'>setobj</a>-&gt;encoding == <a href='../S/32.html#L136' title='Defined at 136 in src/redis.h.'>REDIS_ENCODING_INTSET</a>) <font color='red'>{</font>
<a name='L201'>        *llele = <a href='../S/44.html#L260' title='Defined at 260 in src/intset.c.'>intsetRandom</a>(<a href='../S/282.html#L161' title='Defined at 161 in deps/lua/src/lobject.h.'>setobj</a>-&gt;ptr);
<a name='L202'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L203'>        <a href='../S/32.html#L300' title='Defined at 300 in src/redis.h.'>redisPanic</a>("Unknown set encoding");
<a name='L204'>    <font color='red'>}</font>
<a name='L205'>    <b>return</b> <a href='../S/282.html#L161' title='Defined at 161 in deps/lua/src/lobject.h.'>setobj</a>-&gt;encoding;
<a name='L206'><font color='red'>}</font>
<a name='L207'>
<a name='L208'><b>unsigned</b> <b>long</b> <a href='../R/3746.html' title='Multiple refered from 14 places.'>setTypeSize</a>(robj *subject) <font color='red'>{</font>
<a name='L209'>    <b>if</b> (subject-&gt;encoding == <a href='../D/785.html' title='Multiple defined in 2 places.'>REDIS_ENCODING_HT</a>) <font color='red'>{</font>
<a name='L210'>        <b>return</b> <a href='../D/2125.html' title='Multiple defined in 2 places.'>dictSize</a>((<a href='../D/2060.html' title='Multiple defined in 4 places.'>dict</a>*)subject-&gt;ptr);
<a name='L211'>    <font color='red'>}</font> <b>else</b> <b>if</b> (subject-&gt;encoding == <a href='../S/32.html#L136' title='Defined at 136 in src/redis.h.'>REDIS_ENCODING_INTSET</a>) <font color='red'>{</font>
<a name='L212'>        <b>return</b> <a href='../S/44.html#L275' title='Defined at 275 in src/intset.c.'>intsetLen</a>((<a href='../D/2513.html' title='Multiple defined in 2 places.'>intset</a>*)subject-&gt;ptr);
<a name='L213'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L214'>        <a href='../S/32.html#L300' title='Defined at 300 in src/redis.h.'>redisPanic</a>("Unknown set encoding");
<a name='L215'>    <font color='red'>}</font>
<a name='L216'><font color='red'>}</font>
<a name='L217'>
<a name='L218'><i><font color='green'>/* Convert the set to specified encoding. The resulting dict (when converting</font></i>
<a name='L219'><i><font color='green'> * to a hash table) is presized to hold the number of elements in the original</font></i>
<a name='L220'><i><font color='green'> * set. */</font></i>
<a name='L221'><b>void</b> <a href='../R/3736.html' title='Multiple refered from 5 places.'>setTypeConvert</a>(robj *setobj, <b>int</b> enc) <font color='red'>{</font>
<a name='L222'>    <a href='../S/32.html#L729' title='Defined at 729 in src/redis.h.'>setTypeIterator</a> *si;
<a name='L223'>    <a href='../S/32.html#L298' title='Defined at 298 in src/redis.h.'>redisAssertWithInfo</a>(NULL,<a href='../S/282.html#L161' title='Defined at 161 in deps/lua/src/lobject.h.'>setobj</a>,<a href='../S/282.html#L161' title='Defined at 161 in deps/lua/src/lobject.h.'>setobj</a>-&gt;type == <a href='../D/908.html' title='Multiple defined in 2 places.'>REDIS_SET</a> &amp;&amp;
<a name='L224'>                             <a href='../S/282.html#L161' title='Defined at 161 in deps/lua/src/lobject.h.'>setobj</a>-&gt;encoding == <a href='../S/32.html#L136' title='Defined at 136 in src/redis.h.'>REDIS_ENCODING_INTSET</a>);
<a name='L225'>
<a name='L226'>    <b>if</b> (enc == <a href='../D/785.html' title='Multiple defined in 2 places.'>REDIS_ENCODING_HT</a>) <font color='red'>{</font>
<a name='L227'>        <a href='../S/160.html#L89' title='Defined at 89 in deps/jemalloc/include/msvc_compat/stdint.h.'>int64_t</a> intele;
<a name='L228'>        <a href='../D/2060.html' title='Multiple defined in 4 places.'>dict</a> *d = <a href='../D/2065.html' title='Multiple defined in 2 places.'>dictCreate</a>(&amp;setDictType,NULL);
<a name='L229'>        <a href='../S/32.html#L318' title='Defined at 318 in src/redis.h.'>robj</a> *element;
<a name='L230'>
<a name='L231'>        <i><font color='green'>/* Presize the dict to avoid rehashing */</font></i>
<a name='L232'>        <a href='../D/2074.html' title='Multiple defined in 2 places.'>dictExpand</a>(d,<a href='../S/44.html#L275' title='Defined at 275 in src/intset.c.'>intsetLen</a>(<a href='../S/282.html#L161' title='Defined at 161 in deps/lua/src/lobject.h.'>setobj</a>-&gt;ptr));
<a name='L233'>
<a name='L234'>        <i><font color='green'>/* To add the elements we extract integers and create redis objects */</font></i>
<a name='L235'>        si = <a href='../S/92.html#L114' title='Defined at 114 in src/t_set.c.'>setTypeInitIterator</a>(<a href='../S/282.html#L161' title='Defined at 161 in deps/lua/src/lobject.h.'>setobj</a>);
<a name='L236'>        <b>while</b> (<a href='../S/92.html#L145' title='Defined at 145 in src/t_set.c.'>setTypeNext</a>(si,NULL,&amp;intele) != -1) <font color='red'>{</font>
<a name='L237'>            element = <a href='../S/71.html#L51' title='Defined at 51 in src/object.c.'>createStringObjectFromLongLong</a>(intele);
<a name='L238'>            <a href='../S/32.html#L298' title='Defined at 298 in src/redis.h.'>redisAssertWithInfo</a>(NULL,element,<a href='../D/2061.html' title='Multiple defined in 2 places.'>dictAdd</a>(d,element,NULL) == <a href='../D/124.html' title='Multiple defined in 2 places.'>DICT_OK</a>);
<a name='L239'>        <font color='red'>}</font>
<a name='L240'>        <a href='../S/92.html#L128' title='Defined at 128 in src/t_set.c.'>setTypeReleaseIterator</a>(si);
<a name='L241'>
<a name='L242'>        <a href='../S/282.html#L161' title='Defined at 161 in deps/lua/src/lobject.h.'>setobj</a>-&gt;encoding = <a href='../D/785.html' title='Multiple defined in 2 places.'>REDIS_ENCODING_HT</a>;
<a name='L243'>        <a href='../S/39.html#L192' title='Defined at 192 in src/zmalloc.c.'>zfree</a>(<a href='../S/282.html#L161' title='Defined at 161 in deps/lua/src/lobject.h.'>setobj</a>-&gt;ptr);
<a name='L244'>        <a href='../S/282.html#L161' title='Defined at 161 in deps/lua/src/lobject.h.'>setobj</a>-&gt;ptr = d;
<a name='L245'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L246'>        <a href='../S/32.html#L300' title='Defined at 300 in src/redis.h.'>redisPanic</a>("Unsupported set conversion");
<a name='L247'>    <font color='red'>}</font>
<a name='L248'><font color='red'>}</font>
<a name='L249'>
<a name='L250'><b>void</b> <a href='../R/3600.html' title='Multiple refered from 2 places.'>saddCommand</a>(redisClient *c) <font color='red'>{</font>
<a name='L251'>    <a href='../S/32.html#L318' title='Defined at 318 in src/redis.h.'>robj</a> *set;
<a name='L252'>    <b>int</b> j, added = 0;
<a name='L253'>
<a name='L254'>    set = <a href='../S/31.html#L70' title='Defined at 70 in src/db.c.'>lookupKeyWrite</a>(c-&gt;db,c-&gt;argv[1]);
<a name='L255'>    <b>if</b> (set == NULL) <font color='red'>{</font>
<a name='L256'>        set = <a href='../S/92.html#L41' title='Defined at 41 in src/t_set.c.'>setTypeCreate</a>(c-&gt;argv[2]);
<a name='L257'>        <a href='../S/31.html#L91' title='Defined at 91 in src/db.c.'>dbAdd</a>(c-&gt;db,c-&gt;argv[1],set);
<a name='L258'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L259'>        <b>if</b> (set-&gt;type != <a href='../D/908.html' title='Multiple defined in 2 places.'>REDIS_SET</a>) <font color='red'>{</font>
<a name='L260'>            <a href='../S/86.html#L268' title='Defined at 268 in src/networking.c.'>addReply</a>(c,shared.wrongtypeerr);
<a name='L261'>            <b>return</b>;
<a name='L262'>        <font color='red'>}</font>
<a name='L263'>    <font color='red'>}</font>
<a name='L264'>
<a name='L265'>    <b>for</b> (j = 2; j &lt; c-&gt;argc; j++) <font color='red'>{</font>
<a name='L266'>        c-&gt;argv[j] = <a href='../S/71.html#L273' title='Defined at 273 in src/object.c.'>tryObjectEncoding</a>(c-&gt;argv[j]);
<a name='L267'>        <b>if</b> (<a href='../S/92.html#L47' title='Defined at 47 in src/t_set.c.'>setTypeAdd</a>(set,c-&gt;argv[j])) added++;
<a name='L268'>    <font color='red'>}</font>
<a name='L269'>    <b>if</b> (added) <a href='../S/31.html#L197' title='Defined at 197 in src/db.c.'>signalModifiedKey</a>(c-&gt;db,c-&gt;argv[1]);
<a name='L270'>    server.dirty += added;
<a name='L271'>    <a href='../S/86.html#L439' title='Defined at 439 in src/networking.c.'>addReplyLongLong</a>(c,added);
<a name='L272'><font color='red'>}</font>
<a name='L273'>
<a name='L274'><b>void</b> <a href='../R/3828.html' title='Multiple refered from 2 places.'>sremCommand</a>(redisClient *c) <font color='red'>{</font>
<a name='L275'>    <a href='../S/32.html#L318' title='Defined at 318 in src/redis.h.'>robj</a> *set;
<a name='L276'>    <b>int</b> j, deleted = 0;
<a name='L277'>
<a name='L278'>    <b>if</b> ((set = <a href='../S/31.html#L81' title='Defined at 81 in src/db.c.'>lookupKeyWriteOrReply</a>(c,c-&gt;argv[1],shared.czero)) == NULL ||
<a name='L279'>        <a href='../D/1818.html' title='Multiple defined in 2 places.'>checkType</a>(c,set,<a href='../D/908.html' title='Multiple defined in 2 places.'>REDIS_SET</a>)) <b>return</b>;
<a name='L280'>
<a name='L281'>    <b>for</b> (j = 2; j &lt; c-&gt;argc; j++) <font color='red'>{</font>
<a name='L282'>        <b>if</b> (<a href='../S/92.html#L81' title='Defined at 81 in src/t_set.c.'>setTypeRemove</a>(set,c-&gt;argv[j])) <font color='red'>{</font>
<a name='L283'>            deleted++;
<a name='L284'>            <b>if</b> (<a href='../S/92.html#L208' title='Defined at 208 in src/t_set.c.'>setTypeSize</a>(set) == 0) <font color='red'>{</font>
<a name='L285'>                <a href='../S/31.html#L158' title='Defined at 158 in src/db.c.'>dbDelete</a>(c-&gt;db,c-&gt;argv[1]);
<a name='L286'>                <b>break</b>;
<a name='L287'>            <font color='red'>}</font>
<a name='L288'>        <font color='red'>}</font>
<a name='L289'>    <font color='red'>}</font>
<a name='L290'>    <b>if</b> (deleted) <font color='red'>{</font>
<a name='L291'>        <a href='../S/31.html#L197' title='Defined at 197 in src/db.c.'>signalModifiedKey</a>(c-&gt;db,c-&gt;argv[1]);
<a name='L292'>        server.dirty += deleted;
<a name='L293'>    <font color='red'>}</font>
<a name='L294'>    <a href='../S/86.html#L439' title='Defined at 439 in src/networking.c.'>addReplyLongLong</a>(c,deleted);
<a name='L295'><font color='red'>}</font>
<a name='L296'>
<a name='L297'><b>void</b> <a href='../R/3820.html' title='Multiple refered from 2 places.'>smoveCommand</a>(redisClient *c) <font color='red'>{</font>
<a name='L298'>    <a href='../S/32.html#L318' title='Defined at 318 in src/redis.h.'>robj</a> *srcset, *dstset, *ele;
<a name='L299'>    srcset = <a href='../S/31.html#L70' title='Defined at 70 in src/db.c.'>lookupKeyWrite</a>(c-&gt;db,c-&gt;argv[1]);
<a name='L300'>    dstset = <a href='../S/31.html#L70' title='Defined at 70 in src/db.c.'>lookupKeyWrite</a>(c-&gt;db,c-&gt;argv[2]);
<a name='L301'>    ele = c-&gt;argv[3] = <a href='../S/71.html#L273' title='Defined at 273 in src/object.c.'>tryObjectEncoding</a>(c-&gt;argv[3]);
<a name='L302'>
<a name='L303'>    <i><font color='green'>/* If the source key does not exist return 0 */</font></i>
<a name='L304'>    <b>if</b> (srcset == NULL) <font color='red'>{</font>
<a name='L305'>        <a href='../S/86.html#L268' title='Defined at 268 in src/networking.c.'>addReply</a>(c,shared.czero);
<a name='L306'>        <b>return</b>;
<a name='L307'>    <font color='red'>}</font>
<a name='L308'>
<a name='L309'>    <i><font color='green'>/* If the source key has the wrong type, or the destination key</font></i>
<a name='L310'><i><font color='green'>     * is set and has the wrong type, return with an error. */</font></i>
<a name='L311'>    <b>if</b> (<a href='../D/1818.html' title='Multiple defined in 2 places.'>checkType</a>(c,srcset,<a href='../D/908.html' title='Multiple defined in 2 places.'>REDIS_SET</a>) ||
<a name='L312'>        (dstset &amp;&amp; <a href='../D/1818.html' title='Multiple defined in 2 places.'>checkType</a>(c,dstset,<a href='../D/908.html' title='Multiple defined in 2 places.'>REDIS_SET</a>))) <b>return</b>;
<a name='L313'>
<a name='L314'>    <i><font color='green'>/* If srcset and dstset are equal, SMOVE is a no-op */</font></i>
<a name='L315'>    <b>if</b> (srcset == dstset) <font color='red'>{</font>
<a name='L316'>        <a href='../S/86.html#L268' title='Defined at 268 in src/networking.c.'>addReply</a>(c,shared.cone);
<a name='L317'>        <b>return</b>;
<a name='L318'>    <font color='red'>}</font>
<a name='L319'>
<a name='L320'>    <i><font color='green'>/* If the element cannot be removed from the src set, return 0. */</font></i>
<a name='L321'>    <b>if</b> (!<a href='../S/92.html#L81' title='Defined at 81 in src/t_set.c.'>setTypeRemove</a>(srcset,ele)) <font color='red'>{</font>
<a name='L322'>        <a href='../S/86.html#L268' title='Defined at 268 in src/networking.c.'>addReply</a>(c,shared.czero);
<a name='L323'>        <b>return</b>;
<a name='L324'>    <font color='red'>}</font>
<a name='L325'>
<a name='L326'>    <i><font color='green'>/* Remove the src set from the database when empty */</font></i>
<a name='L327'>    <b>if</b> (<a href='../S/92.html#L208' title='Defined at 208 in src/t_set.c.'>setTypeSize</a>(srcset) == 0) <a href='../S/31.html#L158' title='Defined at 158 in src/db.c.'>dbDelete</a>(c-&gt;db,c-&gt;argv[1]);
<a name='L328'>    <a href='../S/31.html#L197' title='Defined at 197 in src/db.c.'>signalModifiedKey</a>(c-&gt;db,c-&gt;argv[1]);
<a name='L329'>    <a href='../S/31.html#L197' title='Defined at 197 in src/db.c.'>signalModifiedKey</a>(c-&gt;db,c-&gt;argv[2]);
<a name='L330'>    server.dirty++;
<a name='L331'>
<a name='L332'>    <i><font color='green'>/* Create the destination set when it doesn't exist */</font></i>
<a name='L333'>    <b>if</b> (!dstset) <font color='red'>{</font>
<a name='L334'>        dstset = <a href='../S/92.html#L41' title='Defined at 41 in src/t_set.c.'>setTypeCreate</a>(ele);
<a name='L335'>        <a href='../S/31.html#L91' title='Defined at 91 in src/db.c.'>dbAdd</a>(c-&gt;db,c-&gt;argv[2],dstset);
<a name='L336'>    <font color='red'>}</font>
<a name='L337'>
<a name='L338'>    <i><font color='green'>/* An extra key has changed when ele was successfully added to dstset */</font></i>
<a name='L339'>    <b>if</b> (<a href='../S/92.html#L47' title='Defined at 47 in src/t_set.c.'>setTypeAdd</a>(dstset,ele)) server.dirty++;
<a name='L340'>    <a href='../S/86.html#L268' title='Defined at 268 in src/networking.c.'>addReply</a>(c,shared.cone);
<a name='L341'><font color='red'>}</font>
<a name='L342'>
<a name='L343'><b>void</b> <a href='../R/3804.html' title='Multiple refered from 2 places.'>sismemberCommand</a>(redisClient *c) <font color='red'>{</font>
<a name='L344'>    <a href='../S/32.html#L318' title='Defined at 318 in src/redis.h.'>robj</a> *set;
<a name='L345'>
<a name='L346'>    <b>if</b> ((set = <a href='../S/31.html#L75' title='Defined at 75 in src/db.c.'>lookupKeyReadOrReply</a>(c,c-&gt;argv[1],shared.czero)) == NULL ||
<a name='L347'>        <a href='../D/1818.html' title='Multiple defined in 2 places.'>checkType</a>(c,set,<a href='../D/908.html' title='Multiple defined in 2 places.'>REDIS_SET</a>)) <b>return</b>;
<a name='L348'>
<a name='L349'>    c-&gt;argv[2] = <a href='../S/71.html#L273' title='Defined at 273 in src/object.c.'>tryObjectEncoding</a>(c-&gt;argv[2]);
<a name='L350'>    <b>if</b> (<a href='../S/92.html#L100' title='Defined at 100 in src/t_set.c.'>setTypeIsMember</a>(set,c-&gt;argv[2]))
<a name='L351'>        <a href='../S/86.html#L268' title='Defined at 268 in src/networking.c.'>addReply</a>(c,shared.cone);
<a name='L352'>    <b>else</b>
<a name='L353'>        <a href='../S/86.html#L268' title='Defined at 268 in src/networking.c.'>addReply</a>(c,shared.czero);
<a name='L354'><font color='red'>}</font>
<a name='L355'>
<a name='L356'><b>void</b> <a href='../R/3609.html' title='Multiple refered from 2 places.'>scardCommand</a>(redisClient *c) <font color='red'>{</font>
<a name='L357'>    <a href='../S/32.html#L318' title='Defined at 318 in src/redis.h.'>robj</a> *o;
<a name='L358'>
<a name='L359'>    <b>if</b> ((o = <a href='../S/31.html#L75' title='Defined at 75 in src/db.c.'>lookupKeyReadOrReply</a>(c,c-&gt;argv[1],shared.czero)) == NULL ||
<a name='L360'>        <a href='../D/1818.html' title='Multiple defined in 2 places.'>checkType</a>(c,o,<a href='../D/908.html' title='Multiple defined in 2 places.'>REDIS_SET</a>)) <b>return</b>;
<a name='L361'>
<a name='L362'>    <a href='../S/86.html#L439' title='Defined at 439 in src/networking.c.'>addReplyLongLong</a>(c,<a href='../S/92.html#L208' title='Defined at 208 in src/t_set.c.'>setTypeSize</a>(o));
<a name='L363'><font color='red'>}</font>
<a name='L364'>
<a name='L365'><b>void</b> <a href='../R/3825.html' title='Multiple refered from 2 places.'>spopCommand</a>(redisClient *c) <font color='red'>{</font>
<a name='L366'>    <a href='../S/32.html#L318' title='Defined at 318 in src/redis.h.'>robj</a> *set, *ele, *aux;
<a name='L367'>    <a href='../S/160.html#L89' title='Defined at 89 in deps/jemalloc/include/msvc_compat/stdint.h.'>int64_t</a> llele;
<a name='L368'>    <b>int</b> encoding;
<a name='L369'>
<a name='L370'>    <b>if</b> ((set = <a href='../S/31.html#L81' title='Defined at 81 in src/db.c.'>lookupKeyWriteOrReply</a>(c,c-&gt;argv[1],shared.nullbulk)) == NULL ||
<a name='L371'>        <a href='../D/1818.html' title='Multiple defined in 2 places.'>checkType</a>(c,set,<a href='../D/908.html' title='Multiple defined in 2 places.'>REDIS_SET</a>)) <b>return</b>;
<a name='L372'>
<a name='L373'>    encoding = <a href='../S/92.html#L196' title='Defined at 196 in src/t_set.c.'>setTypeRandomElement</a>(set,&amp;ele,&amp;llele);
<a name='L374'>    <b>if</b> (encoding == <a href='../S/32.html#L136' title='Defined at 136 in src/redis.h.'>REDIS_ENCODING_INTSET</a>) <font color='red'>{</font>
<a name='L375'>        ele = <a href='../S/71.html#L51' title='Defined at 51 in src/object.c.'>createStringObjectFromLongLong</a>(llele);
<a name='L376'>        set-&gt;ptr = <a href='../S/44.html#L234' title='Defined at 234 in src/intset.c.'>intsetRemove</a>(set-&gt;ptr,llele,NULL);
<a name='L377'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L378'>        <a href='../S/71.html#L214' title='Defined at 214 in src/object.c.'>incrRefCount</a>(ele);
<a name='L379'>        <a href='../S/92.html#L81' title='Defined at 81 in src/t_set.c.'>setTypeRemove</a>(set,ele);
<a name='L380'>    <font color='red'>}</font>
<a name='L381'>
<a name='L382'>    <i><font color='green'>/* Replicate/AOF this command as an SREM operation */</font></i>
<a name='L383'>    aux = <a href='../D/1986.html' title='Multiple defined in 2 places.'>createStringObject</a>("SREM",4);
<a name='L384'>    <a href='../S/86.html#L1199' title='Defined at 1199 in src/networking.c.'>rewriteClientCommandVector</a>(c,3,aux,c-&gt;argv[1],ele);
<a name='L385'>    <a href='../S/71.html#L218' title='Defined at 218 in src/object.c.'>decrRefCount</a>(ele);
<a name='L386'>    <a href='../S/71.html#L218' title='Defined at 218 in src/object.c.'>decrRefCount</a>(aux);
<a name='L387'>
<a name='L388'>    <a href='../S/86.html#L475' title='Defined at 475 in src/networking.c.'>addReplyBulk</a>(c,ele);
<a name='L389'>    <b>if</b> (<a href='../S/92.html#L208' title='Defined at 208 in src/t_set.c.'>setTypeSize</a>(set) == 0) <a href='../S/31.html#L158' title='Defined at 158 in src/db.c.'>dbDelete</a>(c-&gt;db,c-&gt;argv[1]);
<a name='L390'>    <a href='../S/31.html#L197' title='Defined at 197 in src/db.c.'>signalModifiedKey</a>(c-&gt;db,c-&gt;argv[1]);
<a name='L391'>    server.dirty++;
<a name='L392'><font color='red'>}</font>
<a name='L393'>
<a name='L394'><i><font color='green'>/* handle the "SRANDMEMBER key &lt;count&gt;" variant. The normal version of the</font></i>
<a name='L395'><i><font color='green'> * command is handled by the srandmemberCommand() function itself. */</font></i>
<a name='L396'>
<a name='L397'><i><font color='green'>/* How many times bigger should be the set compared to the requested size</font></i>
<a name='L398'><i><font color='green'> * for us to don't use the "remove elements" strategy? Read later in the</font></i>
<a name='L399'><i><font color='green'> * implementation for more info. */</font></i>
<a name='L400'><font color='darkred'>#define</font> <a href='../S/92.html#L469' title='Refered from 469 in src/t_set.c.'>SRANDMEMBER_SUB_STRATEGY_MUL</a> 3
<a name='L401'>
<a name='L402'><b>void</b> <a href='../S/92.html#L546' title='Refered from 546 in src/t_set.c.'>srandmemberWithCountCommand</a>(redisClient *c) <font color='red'>{</font>
<a name='L403'>    <b>long</b> l;
<a name='L404'>    <b>unsigned</b> <b>long</b> count, size;
<a name='L405'>    <b>int</b> uniq = 1;
<a name='L406'>    <a href='../S/32.html#L318' title='Defined at 318 in src/redis.h.'>robj</a> *set, *ele;
<a name='L407'>    <a href='../S/160.html#L89' title='Defined at 89 in deps/jemalloc/include/msvc_compat/stdint.h.'>int64_t</a> llele;
<a name='L408'>    <b>int</b> encoding;
<a name='L409'>
<a name='L410'>    <a href='../D/2060.html' title='Multiple defined in 4 places.'>dict</a> *d;
<a name='L411'>
<a name='L412'>    <b>if</b> (<a href='../S/71.html#L498' title='Defined at 498 in src/object.c.'>getLongFromObjectOrReply</a>(c,c-&gt;argv[2],&amp;l,NULL) != <a href='../D/848.html' title='Multiple defined in 2 places.'>REDIS_OK</a>) <b>return</b>;
<a name='L413'>    <b>if</b> (l &gt;= 0) <font color='red'>{</font>
<a name='L414'>        count = (<b>unsigned</b>) l;
<a name='L415'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L416'>        <i><font color='green'>/* A negative count means: return the same elements multiple times</font></i>
<a name='L417'><i><font color='green'>         * (i.e. don't remove the extracted element after every extraction). */</font></i>
<a name='L418'>        count = -l;
<a name='L419'>        uniq = 0;
<a name='L420'>    <font color='red'>}</font>
<a name='L421'>
<a name='L422'>    <b>if</b> ((set = <a href='../S/31.html#L75' title='Defined at 75 in src/db.c.'>lookupKeyReadOrReply</a>(c,c-&gt;argv[1],shared.emptymultibulk))
<a name='L423'>        == NULL || <a href='../D/1818.html' title='Multiple defined in 2 places.'>checkType</a>(c,set,<a href='../D/908.html' title='Multiple defined in 2 places.'>REDIS_SET</a>)) <b>return</b>;
<a name='L424'>    size = <a href='../S/92.html#L208' title='Defined at 208 in src/t_set.c.'>setTypeSize</a>(set);
<a name='L425'>
<a name='L426'>    <i><font color='green'>/* If count is zero, serve it ASAP to avoid special cases later. */</font></i>
<a name='L427'>    <b>if</b> (count == 0) <font color='red'>{</font>
<a name='L428'>        <a href='../S/86.html#L268' title='Defined at 268 in src/networking.c.'>addReply</a>(c,shared.emptymultibulk);
<a name='L429'>        <b>return</b>;
<a name='L430'>    <font color='red'>}</font>
<a name='L431'>
<a name='L432'>    <i><font color='green'>/* CASE 1: The count was negative, so the extraction method is just:</font></i>
<a name='L433'><i><font color='green'>     * "return N random elements" sampling the whole set every time.</font></i>
<a name='L434'><i><font color='green'>     * This case is trivial and can be served without auxiliary data</font></i>
<a name='L435'><i><font color='green'>     * structures. */</font></i>
<a name='L436'>    <b>if</b> (!uniq) <font color='red'>{</font>
<a name='L437'>        <a href='../S/86.html#L448' title='Defined at 448 in src/networking.c.'>addReplyMultiBulkLen</a>(c,count);
<a name='L438'>        <b>while</b>(count--) <font color='red'>{</font>
<a name='L439'>            encoding = <a href='../S/92.html#L196' title='Defined at 196 in src/t_set.c.'>setTypeRandomElement</a>(set,&amp;ele,&amp;llele);
<a name='L440'>            <b>if</b> (encoding == <a href='../S/32.html#L136' title='Defined at 136 in src/redis.h.'>REDIS_ENCODING_INTSET</a>) <font color='red'>{</font>
<a name='L441'>                <a href='../S/86.html#L498' title='Defined at 498 in src/networking.c.'>addReplyBulkLongLong</a>(c,llele);
<a name='L442'>            <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L443'>                <a href='../S/86.html#L475' title='Defined at 475 in src/networking.c.'>addReplyBulk</a>(c,ele);
<a name='L444'>            <font color='red'>}</font>
<a name='L445'>        <font color='red'>}</font>
<a name='L446'>        <b>return</b>;
<a name='L447'>    <font color='red'>}</font>
<a name='L448'>
<a name='L449'>    <i><font color='green'>/* CASE 2:</font></i>
<a name='L450'><i><font color='green'>     * The number of requested elements is greater than the number of</font></i>
<a name='L451'><i><font color='green'>     * elements inside the set: simply return the whole set. */</font></i>
<a name='L452'>    <b>if</b> (count &gt;= size) <font color='red'>{</font>
<a name='L453'>        <a href='../S/92.html#L710' title='Defined at 710 in src/t_set.c.'>sunionDiffGenericCommand</a>(c,c-&gt;argv,c-&gt;argc-1,NULL,<a href='../D/852.html' title='Multiple defined in 2 places.'>REDIS_OP_UNION</a>);
<a name='L454'>        <b>return</b>;
<a name='L455'>    <font color='red'>}</font>
<a name='L456'>
<a name='L457'>    <i><font color='green'>/* For CASE 3 and CASE 4 we need an auxiliary dictionary. */</font></i>
<a name='L458'>    d = <a href='../D/2065.html' title='Multiple defined in 2 places.'>dictCreate</a>(&amp;setDictType,NULL);
<a name='L459'>
<a name='L460'>    <i><font color='green'>/* CASE 3:</font></i>
<a name='L461'><i><font color='green'>     * The number of elements inside the set is not greater than</font></i>
<a name='L462'><i><font color='green'>     * SRANDMEMBER_SUB_STRATEGY_MUL times the number of requested elements.</font></i>
<a name='L463'><i><font color='green'>     * In this case we create a set from scratch with all the elements, and</font></i>
<a name='L464'><i><font color='green'>     * subtract random elements to reach the requested number of elements.</font></i>
<a name='L465'><i><font color='green'>     *</font></i>
<a name='L466'><i><font color='green'>     * This is done because if the number of requsted elements is just</font></i>
<a name='L467'><i><font color='green'>     * a bit less than the number of elements in the set, the natural approach</font></i>
<a name='L468'><i><font color='green'>     * used into CASE 3 is highly inefficient. */</font></i>
<a name='L469'>    <b>if</b> (count*<a href='../S/92.html#L400' title='Defined at 400 in src/t_set.c.'>SRANDMEMBER_SUB_STRATEGY_MUL</a> &gt; size) <font color='red'>{</font>
<a name='L470'>        <a href='../S/32.html#L729' title='Defined at 729 in src/redis.h.'>setTypeIterator</a> *si;
<a name='L471'>
<a name='L472'>        <i><font color='green'>/* Add all the elements into the temporary dictionary. */</font></i>
<a name='L473'>        si = <a href='../S/92.html#L114' title='Defined at 114 in src/t_set.c.'>setTypeInitIterator</a>(set);
<a name='L474'>        <b>while</b>((encoding = <a href='../S/92.html#L145' title='Defined at 145 in src/t_set.c.'>setTypeNext</a>(si,&amp;ele,&amp;llele)) != -1) <font color='red'>{</font>
<a name='L475'>            <b>int</b> retval;
<a name='L476'>
<a name='L477'>            <b>if</b> (encoding == <a href='../S/32.html#L136' title='Defined at 136 in src/redis.h.'>REDIS_ENCODING_INTSET</a>) <font color='red'>{</font>
<a name='L478'>                retval = <a href='../D/2061.html' title='Multiple defined in 2 places.'>dictAdd</a>(d,<a href='../S/71.html#L51' title='Defined at 51 in src/object.c.'>createStringObjectFromLongLong</a>(llele),NULL);
<a name='L479'>            <font color='red'>}</font> <b>else</b> <b>if</b> (ele-&gt;encoding == <a href='../D/789.html' title='Multiple defined in 2 places.'>REDIS_ENCODING_RAW</a>) <font color='red'>{</font>
<a name='L480'>                retval = <a href='../D/2061.html' title='Multiple defined in 2 places.'>dictAdd</a>(d,<a href='../S/71.html#L92' title='Defined at 92 in src/object.c.'>dupStringObject</a>(ele),NULL);
<a name='L481'>            <font color='red'>}</font> <b>else</b> <b>if</b> (ele-&gt;encoding == <a href='../D/786.html' title='Multiple defined in 2 places.'>REDIS_ENCODING_INT</a>) <font color='red'>{</font>
<a name='L482'>                retval = <a href='../D/2061.html' title='Multiple defined in 2 places.'>dictAdd</a>(d,
<a name='L483'>                    <a href='../S/71.html#L51' title='Defined at 51 in src/object.c.'>createStringObjectFromLongLong</a>((<b>long</b>)ele-&gt;ptr),NULL);
<a name='L484'>            <font color='red'>}</font>
<a name='L485'>            <a href='../S/32.html#L299' title='Defined at 299 in src/redis.h.'>redisAssert</a>(retval == <a href='../D/124.html' title='Multiple defined in 2 places.'>DICT_OK</a>);
<a name='L486'>        <font color='red'>}</font>
<a name='L487'>        <a href='../S/92.html#L128' title='Defined at 128 in src/t_set.c.'>setTypeReleaseIterator</a>(si);
<a name='L488'>        <a href='../S/32.html#L299' title='Defined at 299 in src/redis.h.'>redisAssert</a>(<a href='../D/2125.html' title='Multiple defined in 2 places.'>dictSize</a>(d) == size);
<a name='L489'>
<a name='L490'>        <i><font color='green'>/* Remove random elements to reach the right count. */</font></i>
<a name='L491'>        <b>while</b>(size &gt; count) <font color='red'>{</font>
<a name='L492'>            <a href='../D/2073.html' title='Multiple defined in 4 places.'>dictEntry</a> *de;
<a name='L493'>
<a name='L494'>            de = <a href='../S/29.html#L568' title='Defined at 568 in src/dict.c.'>dictGetRandomKey</a>(d);
<a name='L495'>            <a href='../D/2066.html' title='Multiple defined in 2 places.'>dictDelete</a>(d,<a href='../S/88.html#L131' title='Defined at 131 in src/dict.h.'>dictGetKey</a>(de));
<a name='L496'>            size--;
<a name='L497'>        <font color='red'>}</font>
<a name='L498'>    <font color='red'>}</font>
<a name='L499'>    
<a name='L500'>    <i><font color='green'>/* CASE 4: We have a big set compared to the requested number of elements.</font></i>
<a name='L501'><i><font color='green'>     * In this case we can simply get random elements from the set and add</font></i>
<a name='L502'><i><font color='green'>     * to the temporary set, trying to eventually get enough unique elements</font></i>
<a name='L503'><i><font color='green'>     * to reach the specified count. */</font></i>
<a name='L504'>    <b>else</b> <font color='red'>{</font>
<a name='L505'>        <b>unsigned</b> <b>long</b> added = 0;
<a name='L506'>
<a name='L507'>        <b>while</b>(added &lt; count) <font color='red'>{</font>
<a name='L508'>            encoding = <a href='../S/92.html#L196' title='Defined at 196 in src/t_set.c.'>setTypeRandomElement</a>(set,&amp;ele,&amp;llele);
<a name='L509'>            <b>if</b> (encoding == <a href='../S/32.html#L136' title='Defined at 136 in src/redis.h.'>REDIS_ENCODING_INTSET</a>) <font color='red'>{</font>
<a name='L510'>                ele = <a href='../S/71.html#L51' title='Defined at 51 in src/object.c.'>createStringObjectFromLongLong</a>(llele);
<a name='L511'>            <font color='red'>}</font> <b>else</b> <b>if</b> (ele-&gt;encoding == <a href='../D/789.html' title='Multiple defined in 2 places.'>REDIS_ENCODING_RAW</a>) <font color='red'>{</font>
<a name='L512'>                ele = <a href='../S/71.html#L92' title='Defined at 92 in src/object.c.'>dupStringObject</a>(ele);
<a name='L513'>            <font color='red'>}</font> <b>else</b> <b>if</b> (ele-&gt;encoding == <a href='../D/786.html' title='Multiple defined in 2 places.'>REDIS_ENCODING_INT</a>) <font color='red'>{</font>
<a name='L514'>                ele = <a href='../S/71.html#L51' title='Defined at 51 in src/object.c.'>createStringObjectFromLongLong</a>((<b>long</b>)ele-&gt;ptr);
<a name='L515'>            <font color='red'>}</font>
<a name='L516'>            <i><font color='green'>/* Try to add the object to the dictionary. If it already exists</font></i>
<a name='L517'><i><font color='green'>             * free it, otherwise increment the number of objects we have</font></i>
<a name='L518'><i><font color='green'>             * in the result dictionary. */</font></i>
<a name='L519'>            <b>if</b> (<a href='../D/2061.html' title='Multiple defined in 2 places.'>dictAdd</a>(d,ele,NULL) == <a href='../D/124.html' title='Multiple defined in 2 places.'>DICT_OK</a>)
<a name='L520'>                added++;
<a name='L521'>            <b>else</b>
<a name='L522'>                <a href='../S/71.html#L218' title='Defined at 218 in src/object.c.'>decrRefCount</a>(ele);
<a name='L523'>        <font color='red'>}</font>
<a name='L524'>    <font color='red'>}</font>
<a name='L525'>
<a name='L526'>    <i><font color='green'>/* CASE 3 &amp; 4: send the result to the user. */</font></i>
<a name='L527'>    <font color='red'>{</font>
<a name='L528'>        <a href='../D/2099.html' title='Multiple defined in 4 places.'>dictIterator</a> *di;
<a name='L529'>        <a href='../D/2073.html' title='Multiple defined in 4 places.'>dictEntry</a> *de;
<a name='L530'>
<a name='L531'>        <a href='../S/86.html#L448' title='Defined at 448 in src/networking.c.'>addReplyMultiBulkLen</a>(c,count);
<a name='L532'>        di = <a href='../D/2087.html' title='Multiple defined in 2 places.'>dictGetIterator</a>(d);
<a name='L533'>        <b>while</b>((de = <a href='../D/2101.html' title='Multiple defined in 2 places.'>dictNext</a>(di)) != NULL)
<a name='L534'>            <a href='../S/86.html#L475' title='Defined at 475 in src/networking.c.'>addReplyBulk</a>(c,<a href='../S/88.html#L131' title='Defined at 131 in src/dict.h.'>dictGetKey</a>(de));
<a name='L535'>        <a href='../D/2109.html' title='Multiple defined in 2 places.'>dictReleaseIterator</a>(di);
<a name='L536'>        <a href='../D/2108.html' title='Multiple defined in 2 places.'>dictRelease</a>(d);
<a name='L537'>    <font color='red'>}</font>
<a name='L538'><font color='red'>}</font>
<a name='L539'>
<a name='L540'><b>void</b> <a href='../R/3826.html' title='Multiple refered from 2 places.'>srandmemberCommand</a>(redisClient *c) <font color='red'>{</font>
<a name='L541'>    <a href='../S/32.html#L318' title='Defined at 318 in src/redis.h.'>robj</a> *set, *ele;
<a name='L542'>    <a href='../S/160.html#L89' title='Defined at 89 in deps/jemalloc/include/msvc_compat/stdint.h.'>int64_t</a> llele;
<a name='L543'>    <b>int</b> encoding;
<a name='L544'>
<a name='L545'>    <b>if</b> (c-&gt;argc == 3) <font color='red'>{</font>
<a name='L546'>        <a href='../S/92.html#L402' title='Defined at 402 in src/t_set.c.'>srandmemberWithCountCommand</a>(c);
<a name='L547'>        <b>return</b>;
<a name='L548'>    <font color='red'>}</font> <b>else</b> <b>if</b> (c-&gt;argc &gt; 3) <font color='red'>{</font>
<a name='L549'>        <a href='../S/86.html#L268' title='Defined at 268 in src/networking.c.'>addReply</a>(c,shared.syntaxerr);
<a name='L550'>        <b>return</b>;
<a name='L551'>    <font color='red'>}</font>
<a name='L552'>
<a name='L553'>    <b>if</b> ((set = <a href='../S/31.html#L75' title='Defined at 75 in src/db.c.'>lookupKeyReadOrReply</a>(c,c-&gt;argv[1],shared.nullbulk)) == NULL ||
<a name='L554'>        <a href='../D/1818.html' title='Multiple defined in 2 places.'>checkType</a>(c,set,<a href='../D/908.html' title='Multiple defined in 2 places.'>REDIS_SET</a>)) <b>return</b>;
<a name='L555'>
<a name='L556'>    encoding = <a href='../S/92.html#L196' title='Defined at 196 in src/t_set.c.'>setTypeRandomElement</a>(set,&amp;ele,&amp;llele);
<a name='L557'>    <b>if</b> (encoding == <a href='../S/32.html#L136' title='Defined at 136 in src/redis.h.'>REDIS_ENCODING_INTSET</a>) <font color='red'>{</font>
<a name='L558'>        <a href='../S/86.html#L498' title='Defined at 498 in src/networking.c.'>addReplyBulkLongLong</a>(c,llele);
<a name='L559'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L560'>        <a href='../S/86.html#L475' title='Defined at 475 in src/networking.c.'>addReplyBulk</a>(c,ele);
<a name='L561'>    <font color='red'>}</font>
<a name='L562'><font color='red'>}</font>
<a name='L563'>
<a name='L564'><b>int</b> <a href='../S/92.html#L602' title='Refered from 602 in src/t_set.c.'>qsortCompareSetsByCardinality</a>(<b>const</b> <b>void</b> *s1, <b>const</b> <b>void</b> *s2) <font color='red'>{</font>
<a name='L565'>    <b>return</b> <a href='../S/92.html#L208' title='Defined at 208 in src/t_set.c.'>setTypeSize</a>(*(<a href='../S/32.html#L318' title='Defined at 318 in src/redis.h.'>robj</a>**)s1)-<a href='../S/92.html#L208' title='Defined at 208 in src/t_set.c.'>setTypeSize</a>(*(<a href='../S/32.html#L318' title='Defined at 318 in src/redis.h.'>robj</a>**)s2);
<a name='L566'><font color='red'>}</font>
<a name='L567'>
<a name='L568'><b>void</b> <a href='../R/3802.html' title='Multiple refered from 2 places.'>sinterGenericCommand</a>(redisClient *c, robj **setkeys, <b>unsigned</b> <b>long</b> setnum, robj *dstkey) <font color='red'>{</font>
<a name='L569'>    <a href='../S/32.html#L318' title='Defined at 318 in src/redis.h.'>robj</a> **sets = <a href='../S/39.html#L121' title='Defined at 121 in src/zmalloc.c.'>zmalloc</a>(<b>sizeof</b>(<a href='../S/32.html#L318' title='Defined at 318 in src/redis.h.'>robj</a>*)*setnum);
<a name='L570'>    <a href='../S/32.html#L729' title='Defined at 729 in src/redis.h.'>setTypeIterator</a> *si;
<a name='L571'>    <a href='../S/32.html#L318' title='Defined at 318 in src/redis.h.'>robj</a> *eleobj, *dstset = NULL;
<a name='L572'>    <a href='../S/160.html#L89' title='Defined at 89 in deps/jemalloc/include/msvc_compat/stdint.h.'>int64_t</a> intobj;
<a name='L573'>    <b>void</b> *replylen = NULL;
<a name='L574'>    <b>unsigned</b> <b>long</b> j, cardinality = 0;
<a name='L575'>    <b>int</b> encoding;
<a name='L576'>
<a name='L577'>    <b>for</b> (j = 0; j &lt; setnum; j++) <font color='red'>{</font>
<a name='L578'>        <a href='../S/32.html#L318' title='Defined at 318 in src/redis.h.'>robj</a> *<a href='../S/282.html#L161' title='Defined at 161 in deps/lua/src/lobject.h.'>setobj</a> = dstkey ?
<a name='L579'>            <a href='../S/31.html#L70' title='Defined at 70 in src/db.c.'>lookupKeyWrite</a>(c-&gt;db,setkeys[j]) :
<a name='L580'>            <a href='../S/31.html#L58' title='Defined at 58 in src/db.c.'>lookupKeyRead</a>(c-&gt;db,setkeys[j]);
<a name='L581'>        <b>if</b> (!<a href='../S/282.html#L161' title='Defined at 161 in deps/lua/src/lobject.h.'>setobj</a>) <font color='red'>{</font>
<a name='L582'>            <a href='../S/39.html#L192' title='Defined at 192 in src/zmalloc.c.'>zfree</a>(sets);
<a name='L583'>            <b>if</b> (dstkey) <font color='red'>{</font>
<a name='L584'>                <b>if</b> (<a href='../S/31.html#L158' title='Defined at 158 in src/db.c.'>dbDelete</a>(c-&gt;db,dstkey)) <font color='red'>{</font>
<a name='L585'>                    <a href='../S/31.html#L197' title='Defined at 197 in src/db.c.'>signalModifiedKey</a>(c-&gt;db,dstkey);
<a name='L586'>                    server.dirty++;
<a name='L587'>                <font color='red'>}</font>
<a name='L588'>                <a href='../S/86.html#L268' title='Defined at 268 in src/networking.c.'>addReply</a>(c,shared.czero);
<a name='L589'>            <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L590'>                <a href='../S/86.html#L268' title='Defined at 268 in src/networking.c.'>addReply</a>(c,shared.emptymultibulk);
<a name='L591'>            <font color='red'>}</font>
<a name='L592'>            <b>return</b>;
<a name='L593'>        <font color='red'>}</font>
<a name='L594'>        <b>if</b> (<a href='../D/1818.html' title='Multiple defined in 2 places.'>checkType</a>(c,<a href='../S/282.html#L161' title='Defined at 161 in deps/lua/src/lobject.h.'>setobj</a>,<a href='../D/908.html' title='Multiple defined in 2 places.'>REDIS_SET</a>)) <font color='red'>{</font>
<a name='L595'>            <a href='../S/39.html#L192' title='Defined at 192 in src/zmalloc.c.'>zfree</a>(sets);
<a name='L596'>            <b>return</b>;
<a name='L597'>        <font color='red'>}</font>
<a name='L598'>        sets[j] = <a href='../S/282.html#L161' title='Defined at 161 in deps/lua/src/lobject.h.'>setobj</a>;
<a name='L599'>    <font color='red'>}</font>
<a name='L600'>    <i><font color='green'>/* Sort sets from the smallest to largest, this will improve our</font></i>
<a name='L601'><i><font color='green'>     * algorithm's performace */</font></i>
<a name='L602'>    qsort(sets,setnum,<b>sizeof</b>(<a href='../S/32.html#L318' title='Defined at 318 in src/redis.h.'>robj</a>*),<a href='../S/92.html#L564' title='Defined at 564 in src/t_set.c.'>qsortCompareSetsByCardinality</a>);
<a name='L603'>
<a name='L604'>    <i><font color='green'>/* The first thing we should output is the total number of elements...</font></i>
<a name='L605'><i><font color='green'>     * since this is a multi-bulk write, but at this stage we don't know</font></i>
<a name='L606'><i><font color='green'>     * the intersection set size, so we use a trick, append an empty object</font></i>
<a name='L607'><i><font color='green'>     * to the output list and save the pointer to later modify it with the</font></i>
<a name='L608'><i><font color='green'>     * right length */</font></i>
<a name='L609'>    <b>if</b> (!dstkey) <font color='red'>{</font>
<a name='L610'>        replylen = <a href='../S/86.html#L371' title='Defined at 371 in src/networking.c.'>addDeferredMultiBulkLength</a>(c);
<a name='L611'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L612'>        <i><font color='green'>/* If we have a target key where to store the resulting set</font></i>
<a name='L613'><i><font color='green'>         * create this key with an empty set inside */</font></i>
<a name='L614'>        dstset = <a href='../S/71.html#L119' title='Defined at 119 in src/object.c.'>createIntsetObject</a>();
<a name='L615'>    <font color='red'>}</font>
<a name='L616'>
<a name='L617'>    <i><font color='green'>/* Iterate all the elements of the first (smallest) set, and test</font></i>
<a name='L618'><i><font color='green'>     * the element against all the other sets, if at least one set does</font></i>
<a name='L619'><i><font color='green'>     * not include the element it is discarded */</font></i>
<a name='L620'>    si = <a href='../S/92.html#L114' title='Defined at 114 in src/t_set.c.'>setTypeInitIterator</a>(sets[0]);
<a name='L621'>    <b>while</b>((encoding = <a href='../S/92.html#L145' title='Defined at 145 in src/t_set.c.'>setTypeNext</a>(si,&amp;eleobj,&amp;intobj)) != -1) <font color='red'>{</font>
<a name='L622'>        <b>for</b> (j = 1; j &lt; setnum; j++) <font color='red'>{</font>
<a name='L623'>            <b>if</b> (sets[j] == sets[0]) <b>continue</b>;
<a name='L624'>            <b>if</b> (encoding == <a href='../S/32.html#L136' title='Defined at 136 in src/redis.h.'>REDIS_ENCODING_INTSET</a>) <font color='red'>{</font>
<a name='L625'>                <i><font color='green'>/* intset with intset is simple... and fast */</font></i>
<a name='L626'>                <b>if</b> (sets[j]-&gt;encoding == <a href='../S/32.html#L136' title='Defined at 136 in src/redis.h.'>REDIS_ENCODING_INTSET</a> &amp;&amp;
<a name='L627'>                    !<a href='../S/44.html#L254' title='Defined at 254 in src/intset.c.'>intsetFind</a>((<a href='../D/2513.html' title='Multiple defined in 2 places.'>intset</a>*)sets[j]-&gt;ptr,intobj))
<a name='L628'>                <font color='red'>{</font>
<a name='L629'>                    <b>break</b>;
<a name='L630'>                <i><font color='green'>/* in order to compare an integer with an object we</font></i>
<a name='L631'><i><font color='green'>                 * have to use the generic function, creating an object</font></i>
<a name='L632'><i><font color='green'>                 * for this */</font></i>
<a name='L633'>                <font color='red'>}</font> <b>else</b> <b>if</b> (sets[j]-&gt;encoding == <a href='../D/785.html' title='Multiple defined in 2 places.'>REDIS_ENCODING_HT</a>) <font color='red'>{</font>
<a name='L634'>                    eleobj = <a href='../S/71.html#L51' title='Defined at 51 in src/object.c.'>createStringObjectFromLongLong</a>(intobj);
<a name='L635'>                    <b>if</b> (!<a href='../S/92.html#L100' title='Defined at 100 in src/t_set.c.'>setTypeIsMember</a>(sets[j],eleobj)) <font color='red'>{</font>
<a name='L636'>                        <a href='../S/71.html#L218' title='Defined at 218 in src/object.c.'>decrRefCount</a>(eleobj);
<a name='L637'>                        <b>break</b>;
<a name='L638'>                    <font color='red'>}</font>
<a name='L639'>                    <a href='../S/71.html#L218' title='Defined at 218 in src/object.c.'>decrRefCount</a>(eleobj);
<a name='L640'>                <font color='red'>}</font>
<a name='L641'>            <font color='red'>}</font> <b>else</b> <b>if</b> (encoding == <a href='../D/785.html' title='Multiple defined in 2 places.'>REDIS_ENCODING_HT</a>) <font color='red'>{</font>
<a name='L642'>                <i><font color='green'>/* Optimization... if the source object is integer</font></i>
<a name='L643'><i><font color='green'>                 * encoded AND the target set is an intset, we can get</font></i>
<a name='L644'><i><font color='green'>                 * a much faster path. */</font></i>
<a name='L645'>                <b>if</b> (eleobj-&gt;encoding == <a href='../D/786.html' title='Multiple defined in 2 places.'>REDIS_ENCODING_INT</a> &amp;&amp;
<a name='L646'>                    sets[j]-&gt;encoding == <a href='../S/32.html#L136' title='Defined at 136 in src/redis.h.'>REDIS_ENCODING_INTSET</a> &amp;&amp;
<a name='L647'>                    !<a href='../S/44.html#L254' title='Defined at 254 in src/intset.c.'>intsetFind</a>((<a href='../D/2513.html' title='Multiple defined in 2 places.'>intset</a>*)sets[j]-&gt;ptr,(<b>long</b>)eleobj-&gt;ptr))
<a name='L648'>                <font color='red'>{</font>
<a name='L649'>                    <b>break</b>;
<a name='L650'>                <i><font color='green'>/* else... object to object check is easy as we use the</font></i>
<a name='L651'><i><font color='green'>                 * type agnostic API here. */</font></i>
<a name='L652'>                <font color='red'>}</font> <b>else</b> <b>if</b> (!<a href='../S/92.html#L100' title='Defined at 100 in src/t_set.c.'>setTypeIsMember</a>(sets[j],eleobj)) <font color='red'>{</font>
<a name='L653'>                    <b>break</b>;
<a name='L654'>                <font color='red'>}</font>
<a name='L655'>            <font color='red'>}</font>
<a name='L656'>        <font color='red'>}</font>
<a name='L657'>
<a name='L658'>        <i><font color='green'>/* Only take action when all sets contain the member */</font></i>
<a name='L659'>        <b>if</b> (j == setnum) <font color='red'>{</font>
<a name='L660'>            <b>if</b> (!dstkey) <font color='red'>{</font>
<a name='L661'>                <b>if</b> (encoding == <a href='../D/785.html' title='Multiple defined in 2 places.'>REDIS_ENCODING_HT</a>)
<a name='L662'>                    <a href='../S/86.html#L475' title='Defined at 475 in src/networking.c.'>addReplyBulk</a>(c,eleobj);
<a name='L663'>                <b>else</b>
<a name='L664'>                    <a href='../S/86.html#L498' title='Defined at 498 in src/networking.c.'>addReplyBulkLongLong</a>(c,intobj);
<a name='L665'>                cardinality++;
<a name='L666'>            <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L667'>                <b>if</b> (encoding == <a href='../S/32.html#L136' title='Defined at 136 in src/redis.h.'>REDIS_ENCODING_INTSET</a>) <font color='red'>{</font>
<a name='L668'>                    eleobj = <a href='../S/71.html#L51' title='Defined at 51 in src/object.c.'>createStringObjectFromLongLong</a>(intobj);
<a name='L669'>                    <a href='../S/92.html#L47' title='Defined at 47 in src/t_set.c.'>setTypeAdd</a>(dstset,eleobj);
<a name='L670'>                    <a href='../S/71.html#L218' title='Defined at 218 in src/object.c.'>decrRefCount</a>(eleobj);
<a name='L671'>                <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L672'>                    <a href='../S/92.html#L47' title='Defined at 47 in src/t_set.c.'>setTypeAdd</a>(dstset,eleobj);
<a name='L673'>                <font color='red'>}</font>
<a name='L674'>            <font color='red'>}</font>
<a name='L675'>        <font color='red'>}</font>
<a name='L676'>    <font color='red'>}</font>
<a name='L677'>    <a href='../S/92.html#L128' title='Defined at 128 in src/t_set.c.'>setTypeReleaseIterator</a>(si);
<a name='L678'>
<a name='L679'>    <b>if</b> (dstkey) <font color='red'>{</font>
<a name='L680'>        <i><font color='green'>/* Store the resulting set into the target, if the intersection</font></i>
<a name='L681'><i><font color='green'>         * is not an empty set. */</font></i>
<a name='L682'>        <a href='../S/31.html#L158' title='Defined at 158 in src/db.c.'>dbDelete</a>(c-&gt;db,dstkey);
<a name='L683'>        <b>if</b> (<a href='../S/92.html#L208' title='Defined at 208 in src/t_set.c.'>setTypeSize</a>(dstset) &gt; 0) <font color='red'>{</font>
<a name='L684'>            <a href='../S/31.html#L91' title='Defined at 91 in src/db.c.'>dbAdd</a>(c-&gt;db,dstkey,dstset);
<a name='L685'>            <a href='../S/86.html#L439' title='Defined at 439 in src/networking.c.'>addReplyLongLong</a>(c,<a href='../S/92.html#L208' title='Defined at 208 in src/t_set.c.'>setTypeSize</a>(dstset));
<a name='L686'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L687'>            <a href='../S/71.html#L218' title='Defined at 218 in src/object.c.'>decrRefCount</a>(dstset);
<a name='L688'>            <a href='../S/86.html#L268' title='Defined at 268 in src/networking.c.'>addReply</a>(c,shared.czero);
<a name='L689'>        <font color='red'>}</font>
<a name='L690'>        <a href='../S/31.html#L197' title='Defined at 197 in src/db.c.'>signalModifiedKey</a>(c-&gt;db,dstkey);
<a name='L691'>        server.dirty++;
<a name='L692'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L693'>        <a href='../S/86.html#L381' title='Defined at 381 in src/networking.c.'>setDeferredMultiBulkLength</a>(c,replylen,cardinality);
<a name='L694'>    <font color='red'>}</font>
<a name='L695'>    <a href='../S/39.html#L192' title='Defined at 192 in src/zmalloc.c.'>zfree</a>(sets);
<a name='L696'><font color='red'>}</font>
<a name='L697'>
<a name='L698'><b>void</b> <a href='../R/3801.html' title='Multiple refered from 3 places.'>sinterCommand</a>(redisClient *c) <font color='red'>{</font>
<a name='L699'>    <a href='../S/92.html#L568' title='Defined at 568 in src/t_set.c.'>sinterGenericCommand</a>(c,c-&gt;argv+1,c-&gt;argc-1,NULL);
<a name='L700'><font color='red'>}</font>
<a name='L701'>
<a name='L702'><b>void</b> <a href='../R/3803.html' title='Multiple refered from 2 places.'>sinterstoreCommand</a>(redisClient *c) <font color='red'>{</font>
<a name='L703'>    <a href='../S/92.html#L568' title='Defined at 568 in src/t_set.c.'>sinterGenericCommand</a>(c,c-&gt;argv+2,c-&gt;argc-2,c-&gt;argv[1]);
<a name='L704'><font color='red'>}</font>
<a name='L705'>
<a name='L706'><font color='darkred'>#define</font> <a href='../R/713.html' title='Multiple refered from 6 places.'>REDIS_OP_UNION</a> 0
<a name='L707'><font color='darkred'>#define</font> <a href='../R/711.html' title='Multiple refered from 5 places.'>REDIS_OP_DIFF</a> 1
<a name='L708'><font color='darkred'>#define</font> <a href='../R/712.html' title='Multiple refered from 2 places.'>REDIS_OP_INTER</a> 2
<a name='L709'>
<a name='L710'><b>void</b> <a href='../R/3898.html' title='Multiple refered from 6 places.'>sunionDiffGenericCommand</a>(redisClient *c, robj **setkeys, <b>int</b> setnum, robj *dstkey, <b>int</b> op) <font color='red'>{</font>
<a name='L711'>    <a href='../S/32.html#L318' title='Defined at 318 in src/redis.h.'>robj</a> **sets = <a href='../S/39.html#L121' title='Defined at 121 in src/zmalloc.c.'>zmalloc</a>(<b>sizeof</b>(<a href='../S/32.html#L318' title='Defined at 318 in src/redis.h.'>robj</a>*)*setnum);
<a name='L712'>    <a href='../S/32.html#L729' title='Defined at 729 in src/redis.h.'>setTypeIterator</a> *si;
<a name='L713'>    <a href='../S/32.html#L318' title='Defined at 318 in src/redis.h.'>robj</a> *ele, *dstset = NULL;
<a name='L714'>    <b>int</b> j, cardinality = 0;
<a name='L715'>
<a name='L716'>    <b>for</b> (j = 0; j &lt; setnum; j++) <font color='red'>{</font>
<a name='L717'>        <a href='../S/32.html#L318' title='Defined at 318 in src/redis.h.'>robj</a> *<a href='../S/282.html#L161' title='Defined at 161 in deps/lua/src/lobject.h.'>setobj</a> = dstkey ?
<a name='L718'>            <a href='../S/31.html#L70' title='Defined at 70 in src/db.c.'>lookupKeyWrite</a>(c-&gt;db,setkeys[j]) :
<a name='L719'>            <a href='../S/31.html#L58' title='Defined at 58 in src/db.c.'>lookupKeyRead</a>(c-&gt;db,setkeys[j]);
<a name='L720'>        <b>if</b> (!<a href='../S/282.html#L161' title='Defined at 161 in deps/lua/src/lobject.h.'>setobj</a>) <font color='red'>{</font>
<a name='L721'>            sets[j] = NULL;
<a name='L722'>            <b>continue</b>;
<a name='L723'>        <font color='red'>}</font>
<a name='L724'>        <b>if</b> (<a href='../D/1818.html' title='Multiple defined in 2 places.'>checkType</a>(c,<a href='../S/282.html#L161' title='Defined at 161 in deps/lua/src/lobject.h.'>setobj</a>,<a href='../D/908.html' title='Multiple defined in 2 places.'>REDIS_SET</a>)) <font color='red'>{</font>
<a name='L725'>            <a href='../S/39.html#L192' title='Defined at 192 in src/zmalloc.c.'>zfree</a>(sets);
<a name='L726'>            <b>return</b>;
<a name='L727'>        <font color='red'>}</font>
<a name='L728'>        sets[j] = <a href='../S/282.html#L161' title='Defined at 161 in deps/lua/src/lobject.h.'>setobj</a>;
<a name='L729'>    <font color='red'>}</font>
<a name='L730'>
<a name='L731'>    <i><font color='green'>/* We need a temp set object to store our union. If the dstkey</font></i>
<a name='L732'><i><font color='green'>     * is not NULL (that is, we are inside an SUNIONSTORE operation) then</font></i>
<a name='L733'><i><font color='green'>     * this set object will be the resulting object to set into the target key*/</font></i>
<a name='L734'>    dstset = <a href='../S/71.html#L119' title='Defined at 119 in src/object.c.'>createIntsetObject</a>();
<a name='L735'>
<a name='L736'>    <i><font color='green'>/* Iterate all the elements of all the sets, add every element a single</font></i>
<a name='L737'><i><font color='green'>     * time to the result set */</font></i>
<a name='L738'>    <b>for</b> (j = 0; j &lt; setnum; j++) <font color='red'>{</font>
<a name='L739'>        <b>if</b> (op == <a href='../D/850.html' title='Multiple defined in 2 places.'>REDIS_OP_DIFF</a> &amp;&amp; j == 0 &amp;&amp; !sets[j]) <b>break</b>; <i><font color='green'>/* result set is empty */</font></i>
<a name='L740'>        <b>if</b> (!sets[j]) <b>continue</b>; <i><font color='green'>/* non existing keys are like empty sets */</font></i>
<a name='L741'>
<a name='L742'>        si = <a href='../S/92.html#L114' title='Defined at 114 in src/t_set.c.'>setTypeInitIterator</a>(sets[j]);
<a name='L743'>        <b>while</b>((ele = <a href='../S/92.html#L164' title='Defined at 164 in src/t_set.c.'>setTypeNextObject</a>(si)) != NULL) <font color='red'>{</font>
<a name='L744'>            <b>if</b> (op == <a href='../D/852.html' title='Multiple defined in 2 places.'>REDIS_OP_UNION</a> || j == 0) <font color='red'>{</font>
<a name='L745'>                <b>if</b> (<a href='../S/92.html#L47' title='Defined at 47 in src/t_set.c.'>setTypeAdd</a>(dstset,ele)) <font color='red'>{</font>
<a name='L746'>                    cardinality++;
<a name='L747'>                <font color='red'>}</font>
<a name='L748'>            <font color='red'>}</font> <b>else</b> <b>if</b> (op == <a href='../D/850.html' title='Multiple defined in 2 places.'>REDIS_OP_DIFF</a>) <font color='red'>{</font>
<a name='L749'>                <b>if</b> (<a href='../S/92.html#L81' title='Defined at 81 in src/t_set.c.'>setTypeRemove</a>(dstset,ele)) <font color='red'>{</font>
<a name='L750'>                    cardinality--;
<a name='L751'>                <font color='red'>}</font>
<a name='L752'>            <font color='red'>}</font>
<a name='L753'>            <a href='../S/71.html#L218' title='Defined at 218 in src/object.c.'>decrRefCount</a>(ele);
<a name='L754'>        <font color='red'>}</font>
<a name='L755'>        <a href='../S/92.html#L128' title='Defined at 128 in src/t_set.c.'>setTypeReleaseIterator</a>(si);
<a name='L756'>
<a name='L757'>        <i><font color='green'>/* Exit when result set is empty. */</font></i>
<a name='L758'>        <b>if</b> (op == <a href='../D/850.html' title='Multiple defined in 2 places.'>REDIS_OP_DIFF</a> &amp;&amp; cardinality == 0) <b>break</b>;
<a name='L759'>    <font color='red'>}</font>
<a name='L760'>
<a name='L761'>    <i><font color='green'>/* Output the content of the resulting set, if not in STORE mode */</font></i>
<a name='L762'>    <b>if</b> (!dstkey) <font color='red'>{</font>
<a name='L763'>        <a href='../S/86.html#L448' title='Defined at 448 in src/networking.c.'>addReplyMultiBulkLen</a>(c,cardinality);
<a name='L764'>        si = <a href='../S/92.html#L114' title='Defined at 114 in src/t_set.c.'>setTypeInitIterator</a>(dstset);
<a name='L765'>        <b>while</b>((ele = <a href='../S/92.html#L164' title='Defined at 164 in src/t_set.c.'>setTypeNextObject</a>(si)) != NULL) <font color='red'>{</font>
<a name='L766'>            <a href='../S/86.html#L475' title='Defined at 475 in src/networking.c.'>addReplyBulk</a>(c,ele);
<a name='L767'>            <a href='../S/71.html#L218' title='Defined at 218 in src/object.c.'>decrRefCount</a>(ele);
<a name='L768'>        <font color='red'>}</font>
<a name='L769'>        <a href='../S/92.html#L128' title='Defined at 128 in src/t_set.c.'>setTypeReleaseIterator</a>(si);
<a name='L770'>        <a href='../S/71.html#L218' title='Defined at 218 in src/object.c.'>decrRefCount</a>(dstset);
<a name='L771'>    <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L772'>        <i><font color='green'>/* If we have a target key where to store the resulting set</font></i>
<a name='L773'><i><font color='green'>         * create this key with the result set inside */</font></i>
<a name='L774'>        <a href='../S/31.html#L158' title='Defined at 158 in src/db.c.'>dbDelete</a>(c-&gt;db,dstkey);
<a name='L775'>        <b>if</b> (<a href='../S/92.html#L208' title='Defined at 208 in src/t_set.c.'>setTypeSize</a>(dstset) &gt; 0) <font color='red'>{</font>
<a name='L776'>            <a href='../S/31.html#L91' title='Defined at 91 in src/db.c.'>dbAdd</a>(c-&gt;db,dstkey,dstset);
<a name='L777'>            <a href='../S/86.html#L439' title='Defined at 439 in src/networking.c.'>addReplyLongLong</a>(c,<a href='../S/92.html#L208' title='Defined at 208 in src/t_set.c.'>setTypeSize</a>(dstset));
<a name='L778'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L779'>            <a href='../S/71.html#L218' title='Defined at 218 in src/object.c.'>decrRefCount</a>(dstset);
<a name='L780'>            <a href='../S/86.html#L268' title='Defined at 268 in src/networking.c.'>addReply</a>(c,shared.czero);
<a name='L781'>        <font color='red'>}</font>
<a name='L782'>        <a href='../S/31.html#L197' title='Defined at 197 in src/db.c.'>signalModifiedKey</a>(c-&gt;db,dstkey);
<a name='L783'>        server.dirty++;
<a name='L784'>    <font color='red'>}</font>
<a name='L785'>    <a href='../S/39.html#L192' title='Defined at 192 in src/zmalloc.c.'>zfree</a>(sets);
<a name='L786'><font color='red'>}</font>
<a name='L787'>
<a name='L788'><b>void</b> <a href='../R/3897.html' title='Multiple refered from 2 places.'>sunionCommand</a>(redisClient *c) <font color='red'>{</font>
<a name='L789'>    <a href='../S/92.html#L710' title='Defined at 710 in src/t_set.c.'>sunionDiffGenericCommand</a>(c,c-&gt;argv+1,c-&gt;argc-1,NULL,<a href='../D/852.html' title='Multiple defined in 2 places.'>REDIS_OP_UNION</a>);
<a name='L790'><font color='red'>}</font>
<a name='L791'>
<a name='L792'><b>void</b> <a href='../R/3899.html' title='Multiple refered from 2 places.'>sunionstoreCommand</a>(redisClient *c) <font color='red'>{</font>
<a name='L793'>    <a href='../S/92.html#L710' title='Defined at 710 in src/t_set.c.'>sunionDiffGenericCommand</a>(c,c-&gt;argv+2,c-&gt;argc-2,c-&gt;argv[1],<a href='../D/852.html' title='Multiple defined in 2 places.'>REDIS_OP_UNION</a>);
<a name='L794'><font color='red'>}</font>
<a name='L795'>
<a name='L796'><b>void</b> <a href='../R/3615.html' title='Multiple refered from 2 places.'>sdiffCommand</a>(redisClient *c) <font color='red'>{</font>
<a name='L797'>    <a href='../S/92.html#L710' title='Defined at 710 in src/t_set.c.'>sunionDiffGenericCommand</a>(c,c-&gt;argv+1,c-&gt;argc-1,NULL,<a href='../D/850.html' title='Multiple defined in 2 places.'>REDIS_OP_DIFF</a>);
<a name='L798'><font color='red'>}</font>
<a name='L799'>
<a name='L800'><b>void</b> <a href='../R/3616.html' title='Multiple refered from 2 places.'>sdiffstoreCommand</a>(redisClient *c) <font color='red'>{</font>
<a name='L801'>    <a href='../S/92.html#L710' title='Defined at 710 in src/t_set.c.'>sunionDiffGenericCommand</a>(c,c-&gt;argv+2,c-&gt;argc-2,c-&gt;argv[1],<a href='../D/850.html' title='Multiple defined in 2 places.'>REDIS_OP_DIFF</a>);
<a name='L802'><font color='red'>}</font>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L41'>[^]</a><a href='#L800'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
