<html>
<head>
<title>deps/lua/src/ldebug.c</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.7.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/387.html'>deps</a>/<a href='../files/398.html'>lua</a>/<a href='../files/400.html'>src</a>/ldebug.c</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L36'>[^]</a><a href='#L631'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L36' title='Defined at 36.'>currentpc</a>
<li><a href='#L44' title='Defined at 44.'>currentline</a>
<li><a href='#L56' title='Defined at 56.'>lua_sethook</a>
<li><a href='#L69' title='Defined at 69.'>lua_gethook</a>
<li><a href='#L74' title='Defined at 74.'>lua_gethookmask</a>
<li><a href='#L79' title='Defined at 79.'>lua_gethookcount</a>
<li><a href='#L84' title='Defined at 84.'>lua_getstack</a>
<li><a href='#L107' title='Defined at 107.'>getluaproto</a>
<li><a href='#L112' title='Defined at 112.'>findlocal</a>
<li><a href='#L127' title='Defined at 127.'>lua_getlocal</a>
<li><a href='#L138' title='Defined at 138.'>lua_setlocal</a>
<li><a href='#L150' title='Defined at 150.'>funcinfo</a>
<li><a href='#L167' title='Defined at 167.'>info_tailcall</a>
<li><a href='#L177' title='Defined at 177.'>collectvalidlines</a>
<li><a href='#L193' title='Defined at 193.'>auxgetinfo</a>
<li><a href='#L232' title='Defined at 232.'>lua_getinfo</a>
<li><a href='#L276' title='Defined at 276.'>precheck</a>
<li><a href='#L290' title='Defined at 290.'>luaG_checkopenop</a>
<li><a href='#L304' title='Defined at 304.'>checkArgMode</a>
<li><a href='#L317' title='Defined at 317.'>symbexec</a>
<li><a href='#L484' title='Defined at 484.'>luaG_checkcode</a>
<li><a href='#L489' title='Defined at 489.'>kname</a>
<li><a href='#L497' title='Defined at 497.'>getobjname</a>
<li><a href='#L544' title='Defined at 544.'>getfuncname</a>
<li><a href='#L559' title='Defined at 559.'>isinstack</a>
<li><a href='#L567' title='Defined at 567.'>luaG_typeerror</a>
<li><a href='#L581' title='Defined at 581.'>luaG_concaterror</a>
<li><a href='#L588' title='Defined at 588.'>luaG_aritherror</a>
<li><a href='#L596' title='Defined at 596.'>luaG_ordererror</a>
<li><a href='#L607' title='Defined at 607.'>addinfo</a>
<li><a href='#L618' title='Defined at 618.'>luaG_errormsg</a>
<li><a href='#L631' title='Defined at 631.'>luaG_runerror</a>
</ol>
<hr>
<pre>
<a name='L1'><i><font color='green'>/*</font></i>
<a name='L2'><i><font color='green'>** $Id: ldebug.c,v 2.29.1.6 2008/05/08 16:56:26 roberto Exp $</font></i>
<a name='L3'><i><font color='green'>** Debug Interface</font></i>
<a name='L4'><i><font color='green'>** See Copyright Notice in lua.h</font></i>
<a name='L5'><i><font color='green'>*/</font></i>
<a name='L6'>
<a name='L7'>
<a name='L8'><font color='darkred'>#include</font> &lt;stdarg.h&gt;
<a name='L9'><font color='darkred'>#include</font> &lt;stddef.h&gt;
<a name='L10'><font color='darkred'>#include</font> &lt;string.h&gt;
<a name='L11'>
<a name='L12'>
<a name='L13'><font color='darkred'>#define</font> ldebug_c
<a name='L14'><font color='darkred'>#define</font> <a href='../R/303.html' title='Multiple refered from 2 places.'>LUA_CORE</a>
<a name='L15'>
<a name='L16'><font color='darkred'>#include</font> "<a href='266.html'>lua.h</a>"
<a name='L17'>
<a name='L18'><font color='darkred'>#include</font> "<a href='288.html'>lapi.h</a>"
<a name='L19'><font color='darkred'>#include</font> "<a href='314.html'>lcode.h</a>"
<a name='L20'><font color='darkred'>#include</font> "<a href='264.html'>ldebug.h</a>"
<a name='L21'><font color='darkred'>#include</font> "<a href='296.html'>ldo.h</a>"
<a name='L22'><font color='darkred'>#include</font> "<a href='257.html'>lfunc.h</a>"
<a name='L23'><font color='darkred'>#include</font> "<a href='282.html'>lobject.h</a>"
<a name='L24'><font color='darkred'>#include</font> "<a href='273.html'>lopcodes.h</a>"
<a name='L25'><font color='darkred'>#include</font> "<a href='298.html'>lstate.h</a>"
<a name='L26'><font color='darkred'>#include</font> "<a href='268.html'>lstring.h</a>"
<a name='L27'><font color='darkred'>#include</font> "<a href='281.html'>ltable.h</a>"
<a name='L28'><font color='darkred'>#include</font> "<a href='307.html'>ltm.h</a>"
<a name='L29'><font color='darkred'>#include</font> "<a href='262.html'>lvm.h</a>"
<a name='L30'>
<a name='L31'>
<a name='L32'>
<a name='L33'><b>static</b> <b>const</b> <b>char</b> *<a href='../S/299.html#L544' title='Defined at 544 in deps/lua/src/ldebug.c.'>getfuncname</a> (lua_State *L, CallInfo *ci, <b>const</b> <b>char</b> **name);
<a name='L34'>
<a name='L35'>
<a name='L36'><b>static</b> <b>int</b> <a href='../R/1752.html' title='Multiple refered from 4 places.'>currentpc</a> (lua_State *L, CallInfo *ci) <font color='red'>{</font>
<a name='L37'>  <b>if</b> (!<a href='../S/298.html#L62' title='Defined at 62 in deps/lua/src/lstate.h.'>isLua</a>(ci)) <b>return</b> -1;  <i><font color='green'>/* function is not a Lua function? */</font></i>
<a name='L38'>  <b>if</b> (ci == L-&gt;ci)
<a name='L39'>    ci-&gt;savedpc = L-&gt;savedpc;
<a name='L40'>  <b>return</b> <a href='../S/264.html#L14' title='Defined at 14 in deps/lua/src/ldebug.h.'>pcRel</a>(ci-&gt;savedpc, <a href='../S/298.html#L60' title='Defined at 60 in deps/lua/src/lstate.h.'>ci_func</a>(ci)-&gt;l.p);
<a name='L41'><font color='red'>}</font>
<a name='L42'>
<a name='L43'>
<a name='L44'><b>static</b> <b>int</b> <a href='../R/1751.html' title='Multiple refered from 12 places.'>currentline</a> (lua_State *L, CallInfo *ci) <font color='red'>{</font>
<a name='L45'>  <b>int</b> pc = <a href='../S/299.html#L36' title='Defined at 36 in deps/lua/src/ldebug.c.'>currentpc</a>(L, ci);
<a name='L46'>  <b>if</b> (pc &lt; 0)
<a name='L47'>    <b>return</b> -1;  <i><font color='green'>/* only active lua functions have current-line information */</font></i>
<a name='L48'>  <b>else</b>
<a name='L49'>    <b>return</b> <a href='../S/264.html#L16' title='Defined at 16 in deps/lua/src/ldebug.h.'>getline</a>(<a href='../S/298.html#L60' title='Defined at 60 in deps/lua/src/lstate.h.'>ci_func</a>(ci)-&gt;l.p, pc);
<a name='L50'><font color='red'>}</font>
<a name='L51'>
<a name='L52'>
<a name='L53'><i><font color='green'>/*</font></i>
<a name='L54'><i><font color='green'>** this function can be called asynchronous (e.g. during a signal)</font></i>
<a name='L55'><i><font color='green'>*/</font></i>
<a name='L56'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>int</b> <a href='../R/2845.html' title='Multiple refered from 7 places.'>lua_sethook</a> (lua_State *L, lua_Hook func, <b>int</b> mask, <b>int</b> count) <font color='red'>{</font>
<a name='L57'>  <b>if</b> (func == NULL || mask == 0) <font color='red'>{</font>  <i><font color='green'>/* turn off hooks? */</font></i>
<a name='L58'>    mask = 0;
<a name='L59'>    func = NULL;
<a name='L60'>  <font color='red'>}</font>
<a name='L61'>  L-&gt;hook = func;
<a name='L62'>  L-&gt;basehookcount = count;
<a name='L63'>  <a href='../S/264.html#L18' title='Defined at 18 in deps/lua/src/ldebug.h.'>resethookcount</a>(L);
<a name='L64'>  L-&gt;hookmask = <a href='../S/310.html#L78' title='Defined at 78 in deps/lua/src/llimits.h.'>cast_byte</a>(mask);
<a name='L65'>  <b>return</b> 1;
<a name='L66'><font color='red'>}</font>
<a name='L67'>
<a name='L68'>
<a name='L69'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> lua_Hook <a href='../R/2774.html' title='Multiple refered from 2 places.'>lua_gethook</a> (lua_State *L) <font color='red'>{</font>
<a name='L70'>  <b>return</b> L-&gt;hook;
<a name='L71'><font color='red'>}</font>
<a name='L72'>
<a name='L73'>
<a name='L74'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>int</b> <a href='../R/2776.html' title='Multiple refered from 2 places.'>lua_gethookmask</a> (lua_State *L) <font color='red'>{</font>
<a name='L75'>  <b>return</b> L-&gt;hookmask;
<a name='L76'><font color='red'>}</font>
<a name='L77'>
<a name='L78'>
<a name='L79'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>int</b> <a href='../R/2775.html' title='Multiple refered from 2 places.'>lua_gethookcount</a> (lua_State *L) <font color='red'>{</font>
<a name='L80'>  <b>return</b> L-&gt;basehookcount;
<a name='L81'><font color='red'>}</font>
<a name='L82'>
<a name='L83'>
<a name='L84'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>int</b> <a href='../R/2780.html' title='Multiple refered from 12 places.'>lua_getstack</a> (lua_State *L, <b>int</b> level, lua_Debug *ar) <font color='red'>{</font>
<a name='L85'>  <b>int</b> status;
<a name='L86'>  <a href='../D/107.html' title='Multiple defined in 2 places.'>CallInfo</a> *ci;
<a name='L87'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L88'>  <b>for</b> (ci = L-&gt;ci; level &gt; 0 &amp;&amp; ci &gt; L-&gt;base_ci; ci--) <font color='red'>{</font>
<a name='L89'>    level--;
<a name='L90'>    <b>if</b> (<a href='../S/298.html#L61' title='Defined at 61 in deps/lua/src/lstate.h.'>f_isLua</a>(ci))  <i><font color='green'>/* Lua function? */</font></i>
<a name='L91'>      level -= ci-&gt;tailcalls;  <i><font color='green'>/* skip lost tail calls */</font></i>
<a name='L92'>  <font color='red'>}</font>
<a name='L93'>  <b>if</b> (level == 0 &amp;&amp; ci &gt; L-&gt;base_ci) <font color='red'>{</font>  <i><font color='green'>/* level found? */</font></i>
<a name='L94'>    status = 1;
<a name='L95'>    ar-&gt;i_ci = <a href='../S/310.html#L80' title='Defined at 80 in deps/lua/src/llimits.h.'>cast_int</a>(ci - L-&gt;base_ci);
<a name='L96'>  <font color='red'>}</font>
<a name='L97'>  <b>else</b> <b>if</b> (level &lt; 0) <font color='red'>{</font>  <i><font color='green'>/* level is of a lost tail call? */</font></i>
<a name='L98'>    status = 1;
<a name='L99'>    ar-&gt;i_ci = 0;
<a name='L100'>  <font color='red'>}</font>
<a name='L101'>  <b>else</b> status = 0;  <i><font color='green'>/* no such level */</font></i>
<a name='L102'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L103'>  <b>return</b> status;
<a name='L104'><font color='red'>}</font>
<a name='L105'>
<a name='L106'>
<a name='L107'><b>static</b> <a href='../D/722.html' title='Multiple defined in 2 places.'>Proto</a> *<a href='../R/2088.html' title='Multiple refered from 2 places.'>getluaproto</a> (CallInfo *ci) <font color='red'>{</font>
<a name='L108'>  <b>return</b> (<a href='../S/298.html#L62' title='Defined at 62 in deps/lua/src/lstate.h.'>isLua</a>(ci) ? <a href='../S/298.html#L60' title='Defined at 60 in deps/lua/src/lstate.h.'>ci_func</a>(ci)-&gt;l.p : NULL);
<a name='L109'><font color='red'>}</font>
<a name='L110'>
<a name='L111'>
<a name='L112'><b>static</b> <b>const</b> <b>char</b> *<a href='../R/1978.html' title='Multiple refered from 2 places.'>findlocal</a> (lua_State *L, CallInfo *ci, <b>int</b> n) <font color='red'>{</font>
<a name='L113'>  <b>const</b> <b>char</b> *name;
<a name='L114'>  <a href='../D/722.html' title='Multiple defined in 2 places.'>Proto</a> *fp = <a href='../S/299.html#L107' title='Defined at 107 in deps/lua/src/ldebug.c.'>getluaproto</a>(ci);
<a name='L115'>  <b>if</b> (fp &amp;&amp; (name = <a href='../S/258.html#L163' title='Defined at 163 in deps/lua/src/lfunc.c.'>luaF_getlocalname</a>(fp, n, <a href='../S/299.html#L36' title='Defined at 36 in deps/lua/src/ldebug.c.'>currentpc</a>(L, ci))) != NULL)
<a name='L116'>    <b>return</b> name;  <i><font color='green'>/* is a local variable in a Lua function */</font></i>
<a name='L117'>  <b>else</b> <font color='red'>{</font>
<a name='L118'>    <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> limit = (ci == L-&gt;ci) ? L-&gt;top : (ci+1)-&gt;func;
<a name='L119'>    <b>if</b> (limit - ci-&gt;base &gt;= n &amp;&amp; n &gt; 0)  <i><font color='green'>/* is 'n' inside 'ci' stack? */</font></i>
<a name='L120'>      <b>return</b> "(*temporary)";
<a name='L121'>    <b>else</b>
<a name='L122'>      <b>return</b> NULL;
<a name='L123'>  <font color='red'>}</font>
<a name='L124'><font color='red'>}</font>
<a name='L125'>
<a name='L126'>
<a name='L127'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>const</b> <b>char</b> *<a href='../R/2778.html' title='Multiple refered from 2 places.'>lua_getlocal</a> (lua_State *L, <b>const</b> lua_Debug *ar, <b>int</b> n) <font color='red'>{</font>
<a name='L128'>  <a href='../D/107.html' title='Multiple defined in 2 places.'>CallInfo</a> *ci = L-&gt;base_ci + ar-&gt;i_ci;
<a name='L129'>  <b>const</b> <b>char</b> *name = <a href='../S/299.html#L112' title='Defined at 112 in deps/lua/src/ldebug.c.'>findlocal</a>(L, ci, n);
<a name='L130'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L131'>  <b>if</b> (name)
<a name='L132'>      <a href='../S/272.html#L89' title='Defined at 89 in deps/lua/src/lapi.c.'>luaA_pushobject</a>(L, ci-&gt;base + (n - 1));
<a name='L133'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L134'>  <b>return</b> name;
<a name='L135'><font color='red'>}</font>
<a name='L136'>
<a name='L137'>
<a name='L138'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>const</b> <b>char</b> *<a href='../R/2847.html' title='Multiple refered from 2 places.'>lua_setlocal</a> (lua_State *L, <b>const</b> lua_Debug *ar, <b>int</b> n) <font color='red'>{</font>
<a name='L139'>  <a href='../D/107.html' title='Multiple defined in 2 places.'>CallInfo</a> *ci = L-&gt;base_ci + ar-&gt;i_ci;
<a name='L140'>  <b>const</b> <b>char</b> *name = <a href='../S/299.html#L112' title='Defined at 112 in deps/lua/src/ldebug.c.'>findlocal</a>(L, ci, n);
<a name='L141'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L142'>  <b>if</b> (name)
<a name='L143'>      <a href='../S/282.html#L172' title='Defined at 172 in deps/lua/src/lobject.h.'>setobjs2s</a>(L, ci-&gt;base + (n - 1), L-&gt;top - 1);
<a name='L144'>  L-&gt;top--;  <i><font color='green'>/* pop value */</font></i>
<a name='L145'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L146'>  <b>return</b> name;
<a name='L147'><font color='red'>}</font>
<a name='L148'>
<a name='L149'>
<a name='L150'><b>static</b> <b>void</b> <a href='../S/299.html#L203' title='Refered from 203 in deps/lua/src/ldebug.c.'>funcinfo</a> (lua_Debug *ar, Closure *cl) <font color='red'>{</font>
<a name='L151'>  <b>if</b> (cl-&gt;c.isC) <font color='red'>{</font>
<a name='L152'>    ar-&gt;source = "=[C]";
<a name='L153'>    ar-&gt;linedefined = -1;
<a name='L154'>    ar-&gt;lastlinedefined = -1;
<a name='L155'>    ar-&gt;what = "C";
<a name='L156'>  <font color='red'>}</font>
<a name='L157'>  <b>else</b> <font color='red'>{</font>
<a name='L158'>    ar-&gt;source = <a href='../S/282.html#L210' title='Defined at 210 in deps/lua/src/lobject.h.'>getstr</a>(cl-&gt;l.p-&gt;source);
<a name='L159'>    ar-&gt;linedefined = cl-&gt;l.p-&gt;linedefined;
<a name='L160'>    ar-&gt;lastlinedefined = cl-&gt;l.p-&gt;lastlinedefined;
<a name='L161'>    ar-&gt;what = (ar-&gt;linedefined == 0) ? "main" : "Lua";
<a name='L162'>  <font color='red'>}</font>
<a name='L163'>  <a href='../S/311.html#L182' title='Defined at 182 in deps/lua/src/lobject.c.'>luaO_chunkid</a>(ar-&gt;short_src, ar-&gt;source, <a href='../S/317.html#L210' title='Defined at 210 in deps/lua/src/luaconf.h.'>LUA_IDSIZE</a>);
<a name='L164'><font color='red'>}</font>
<a name='L165'>
<a name='L166'>
<a name='L167'><b>static</b> <b>void</b> <a href='../S/299.html#L197' title='Refered from 197 in deps/lua/src/ldebug.c.'>info_tailcall</a> (lua_Debug *ar) <font color='red'>{</font>
<a name='L168'>  ar-&gt;name = ar-&gt;namewhat = "";
<a name='L169'>  ar-&gt;what = "tail";
<a name='L170'>  ar-&gt;lastlinedefined = ar-&gt;linedefined = ar-&gt;<a href='../S/299.html#L44' title='Defined at 44 in deps/lua/src/ldebug.c.'>currentline</a> = -1;
<a name='L171'>  ar-&gt;source = "=(tail call)";
<a name='L172'>  <a href='../S/311.html#L182' title='Defined at 182 in deps/lua/src/lobject.c.'>luaO_chunkid</a>(ar-&gt;short_src, ar-&gt;source, <a href='../S/317.html#L210' title='Defined at 210 in deps/lua/src/luaconf.h.'>LUA_IDSIZE</a>);
<a name='L173'>  ar-&gt;nups = 0;
<a name='L174'><font color='red'>}</font>
<a name='L175'>
<a name='L176'>
<a name='L177'><b>static</b> <b>void</b> <a href='../S/299.html#L256' title='Refered from 256 in deps/lua/src/ldebug.c.'>collectvalidlines</a> (lua_State *L, Closure *f) <font color='red'>{</font>
<a name='L178'>  <b>if</b> (f == NULL || f-&gt;c.isC) <font color='red'>{</font>
<a name='L179'>    <a href='../S/282.html#L117' title='Defined at 117 in deps/lua/src/lobject.h.'>setnilvalue</a>(L-&gt;top);
<a name='L180'>  <font color='red'>}</font>
<a name='L181'>  <b>else</b> <font color='red'>{</font>
<a name='L182'>    <a href='../D/1237.html' title='Multiple defined in 2 places.'>Table</a> *t = <a href='../S/259.html#L358' title='Defined at 358 in deps/lua/src/ltable.c.'>luaH_new</a>(L, 0, 0);
<a name='L183'>    <b>int</b> *lineinfo = f-&gt;l.p-&gt;lineinfo;
<a name='L184'>    <b>int</b> i;
<a name='L185'>    <b>for</b> (i=0; i&lt;f-&gt;l.p-&gt;sizelineinfo; i++)
<a name='L186'>      <a href='../S/282.html#L125' title='Defined at 125 in deps/lua/src/lobject.h.'>setbvalue</a>(<a href='../S/259.html#L508' title='Defined at 508 in deps/lua/src/ltable.c.'>luaH_setnum</a>(L, t, lineinfo[i]), 1);
<a name='L187'>    <a href='../S/282.html#L148' title='Defined at 148 in deps/lua/src/lobject.h.'>sethvalue</a>(L, L-&gt;top, t); 
<a name='L188'>  <font color='red'>}</font>
<a name='L189'>  <a href='../S/296.html#L22' title='Defined at 22 in deps/lua/src/ldo.h.'>incr_top</a>(L);
<a name='L190'><font color='red'>}</font>
<a name='L191'>
<a name='L192'>
<a name='L193'><b>static</b> <b>int</b> <a href='../S/299.html#L249' title='Refered from 249 in deps/lua/src/ldebug.c.'>auxgetinfo</a> (lua_State *L, <b>const</b> <b>char</b> *what, lua_Debug *ar,
<a name='L194'>                    Closure *f, CallInfo *ci) <font color='red'>{</font>
<a name='L195'>  <b>int</b> status = 1;
<a name='L196'>  <b>if</b> (f == NULL) <font color='red'>{</font>
<a name='L197'>    <a href='../S/299.html#L167' title='Defined at 167 in deps/lua/src/ldebug.c.'>info_tailcall</a>(ar);
<a name='L198'>    <b>return</b> status;
<a name='L199'>  <font color='red'>}</font>
<a name='L200'>  <b>for</b> (; *what; what++) <font color='red'>{</font>
<a name='L201'>    <b>switch</b> (*what) <font color='red'>{</font>
<a name='L202'>      <b>case</b> 'S': <font color='red'>{</font>
<a name='L203'>        <a href='../S/299.html#L150' title='Defined at 150 in deps/lua/src/ldebug.c.'>funcinfo</a>(ar, f);
<a name='L204'>        <b>break</b>;
<a name='L205'>      <font color='red'>}</font>
<a name='L206'>      <b>case</b> 'l': <font color='red'>{</font>
<a name='L207'>        ar-&gt;<a href='../S/299.html#L44' title='Defined at 44 in deps/lua/src/ldebug.c.'>currentline</a> = (ci) ? <a href='../S/299.html#L44' title='Defined at 44 in deps/lua/src/ldebug.c.'>currentline</a>(L, ci) : -1;
<a name='L208'>        <b>break</b>;
<a name='L209'>      <font color='red'>}</font>
<a name='L210'>      <b>case</b> 'u': <font color='red'>{</font>
<a name='L211'>        ar-&gt;nups = f-&gt;c.nupvalues;
<a name='L212'>        <b>break</b>;
<a name='L213'>      <font color='red'>}</font>
<a name='L214'>      <b>case</b> 'n': <font color='red'>{</font>
<a name='L215'>        ar-&gt;namewhat = (ci) ? <a href='../S/299.html#L544' title='Defined at 544 in deps/lua/src/ldebug.c.'>getfuncname</a>(L, ci, &amp;ar-&gt;name) : NULL;
<a name='L216'>        <b>if</b> (ar-&gt;namewhat == NULL) <font color='red'>{</font>
<a name='L217'>          ar-&gt;namewhat = "";  <i><font color='green'>/* not found */</font></i>
<a name='L218'>          ar-&gt;name = NULL;
<a name='L219'>        <font color='red'>}</font>
<a name='L220'>        <b>break</b>;
<a name='L221'>      <font color='red'>}</font>
<a name='L222'>      <b>case</b> 'L':
<a name='L223'>      <b>case</b> 'f':  <i><font color='green'>/* handled by lua_getinfo */</font></i>
<a name='L224'>        <b>break</b>;
<a name='L225'>      <b>default</b>: status = 0;  <i><font color='green'>/* invalid option */</font></i>
<a name='L226'>    <font color='red'>}</font>
<a name='L227'>  <font color='red'>}</font>
<a name='L228'>  <b>return</b> status;
<a name='L229'><font color='red'>}</font>
<a name='L230'>
<a name='L231'>
<a name='L232'><a href='../D/337.html' title='Multiple defined in 3 places.'>LUA_API</a> <b>int</b> <a href='../R/2777.html' title='Multiple refered from 8 places.'>lua_getinfo</a> (lua_State *L, <b>const</b> <b>char</b> *what, lua_Debug *ar) <font color='red'>{</font>
<a name='L233'>  <b>int</b> status;
<a name='L234'>  <a href='../D/109.html' title='Multiple defined in 2 places.'>Closure</a> *f = NULL;
<a name='L235'>  <a href='../D/107.html' title='Multiple defined in 2 places.'>CallInfo</a> *ci = NULL;
<a name='L236'>  <a href='../S/310.html#L110' title='Defined at 110 in deps/lua/src/llimits.h.'>lua_lock</a>(L);
<a name='L237'>  <b>if</b> (*what == '&gt;') <font color='red'>{</font>
<a name='L238'>    <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> func = L-&gt;top - 1;
<a name='L239'>    <a href='../D/3215.html' title='Multiple defined in 2 places.'>luai_apicheck</a>(L, <a href='../S/282.html#L83' title='Defined at 83 in deps/lua/src/lobject.h.'>ttisfunction</a>(func));
<a name='L240'>    what++;  <i><font color='green'>/* skip the '&gt;' */</font></i>
<a name='L241'>    f = <a href='../S/282.html#L98' title='Defined at 98 in deps/lua/src/lobject.h.'>clvalue</a>(func);
<a name='L242'>    L-&gt;top--;  <i><font color='green'>/* pop function */</font></i>
<a name='L243'>  <font color='red'>}</font>
<a name='L244'>  <b>else</b> <b>if</b> (ar-&gt;i_ci != 0) <font color='red'>{</font>  <i><font color='green'>/* no tail call? */</font></i>
<a name='L245'>    ci = L-&gt;base_ci + ar-&gt;i_ci;
<a name='L246'>    <a href='../D/3090.html' title='Multiple defined in 2 places.'>lua_assert</a>(<a href='../S/282.html#L83' title='Defined at 83 in deps/lua/src/lobject.h.'>ttisfunction</a>(ci-&gt;func));
<a name='L247'>    f = <a href='../S/282.html#L98' title='Defined at 98 in deps/lua/src/lobject.h.'>clvalue</a>(ci-&gt;func);
<a name='L248'>  <font color='red'>}</font>
<a name='L249'>  status = <a href='../S/299.html#L193' title='Defined at 193 in deps/lua/src/ldebug.c.'>auxgetinfo</a>(L, what, ar, f, ci);
<a name='L250'>  <b>if</b> (strchr(what, 'f')) <font color='red'>{</font>
<a name='L251'>    <b>if</b> (f == NULL) <a href='../S/282.html#L117' title='Defined at 117 in deps/lua/src/lobject.h.'>setnilvalue</a>(L-&gt;top);
<a name='L252'>    <b>else</b> <a href='../S/282.html#L143' title='Defined at 143 in deps/lua/src/lobject.h.'>setclvalue</a>(L, L-&gt;top, f);
<a name='L253'>    <a href='../S/296.html#L22' title='Defined at 22 in deps/lua/src/ldo.h.'>incr_top</a>(L);
<a name='L254'>  <font color='red'>}</font>
<a name='L255'>  <b>if</b> (strchr(what, 'L'))
<a name='L256'>    <a href='../S/299.html#L177' title='Defined at 177 in deps/lua/src/ldebug.c.'>collectvalidlines</a>(L, f);
<a name='L257'>  <a href='../S/310.html#L111' title='Defined at 111 in deps/lua/src/llimits.h.'>lua_unlock</a>(L);
<a name='L258'>  <b>return</b> status;
<a name='L259'><font color='red'>}</font>
<a name='L260'>
<a name='L261'>
<a name='L262'><i><font color='green'>/*</font></i>
<a name='L263'><i><font color='green'>** {======================================================</font></i>
<a name='L264'><i><font color='green'>** Symbolic Execution and code checker</font></i>
<a name='L265'><i><font color='green'>** =======================================================</font></i>
<a name='L266'><i><font color='green'>*/</font></i>
<a name='L267'>
<a name='L268'><font color='darkred'>#define</font> <a href='../R/1537.html' title='Multiple refered from 37 places.'>check</a>(x)                <b>if</b> (!(x)) <b>return</b> 0;
<a name='L269'>
<a name='L270'><font color='darkred'>#define</font> checkjump(pt,pc)        <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>(0 &lt;= pc &amp;&amp; pc &lt; pt-&gt;sizecode)
<a name='L271'>
<a name='L272'><font color='darkred'>#define</font> <a href='../R/1557.html' title='Multiple refered from 10 places.'>checkreg</a>(pt,reg)        <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>((reg) &lt; (pt)-&gt;maxstacksize)
<a name='L273'>
<a name='L274'>
<a name='L275'>
<a name='L276'><b>static</b> <b>int</b> <a href='../S/299.html#L321' title='Refered from 321 in deps/lua/src/ldebug.c.'>precheck</a> (<b>const</b> Proto *pt) <font color='red'>{</font>
<a name='L277'>  <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>(pt-&gt;maxstacksize &lt;= <a href='../S/310.html#L93' title='Defined at 93 in deps/lua/src/llimits.h.'>MAXSTACK</a>);
<a name='L278'>  <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>(pt-&gt;numparams+(pt-&gt;is_vararg &amp; <a href='../S/282.html#L257' title='Defined at 257 in deps/lua/src/lobject.h.'>VARARG_HASARG</a>) &lt;= pt-&gt;maxstacksize);
<a name='L279'>  <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>(!(pt-&gt;is_vararg &amp; <a href='../S/282.html#L259' title='Defined at 259 in deps/lua/src/lobject.h.'>VARARG_NEEDSARG</a>) ||
<a name='L280'>              (pt-&gt;is_vararg &amp; <a href='../S/282.html#L257' title='Defined at 257 in deps/lua/src/lobject.h.'>VARARG_HASARG</a>));
<a name='L281'>  <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>(pt-&gt;sizeupvalues &lt;= pt-&gt;nups);
<a name='L282'>  <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>(pt-&gt;sizelineinfo == pt-&gt;sizecode || pt-&gt;sizelineinfo == 0);
<a name='L283'>  <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>(pt-&gt;sizecode &gt; 0 &amp;&amp; <a href='../S/273.html#L80' title='Defined at 80 in deps/lua/src/lopcodes.h.'>GET_OPCODE</a>(pt-&gt;code[pt-&gt;sizecode-1]) == <a href='../S/273.html#L194' title='Defined at 194 in deps/lua/src/lopcodes.h.'>OP_RETURN</a>);
<a name='L284'>  <b>return</b> 1;
<a name='L285'><font color='red'>}</font>
<a name='L286'>
<a name='L287'>
<a name='L288'><font color='darkred'>#define</font> <a href='../R/1556.html' title='Multiple refered from 2 places.'>checkopenop</a>(pt,pc)      <a href='../S/299.html#L290' title='Defined at 290 in deps/lua/src/ldebug.c.'>luaG_checkopenop</a>((pt)-&gt;code[(pc)+1])
<a name='L289'>
<a name='L290'><b>int</b> <a href='../R/2569.html' title='Multiple refered from 3 places.'>luaG_checkopenop</a> (Instruction i) <font color='red'>{</font>
<a name='L291'>  <b>switch</b> (<a href='../S/273.html#L80' title='Defined at 80 in deps/lua/src/lopcodes.h.'>GET_OPCODE</a>(i)) <font color='red'>{</font>
<a name='L292'>    <b>case</b> <a href='../S/273.html#L192' title='Defined at 192 in deps/lua/src/lopcodes.h.'>OP_CALL</a>:
<a name='L293'>    <b>case</b> <a href='../S/273.html#L193' title='Defined at 193 in deps/lua/src/lopcodes.h.'>OP_TAILCALL</a>:
<a name='L294'>    <b>case</b> <a href='../S/273.html#L194' title='Defined at 194 in deps/lua/src/lopcodes.h.'>OP_RETURN</a>:
<a name='L295'>    <b>case</b> <a href='../S/273.html#L202' title='Defined at 202 in deps/lua/src/lopcodes.h.'>OP_SETLIST</a>: <font color='red'>{</font>
<a name='L296'>      <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>(<a href='../S/273.html#L88' title='Defined at 88 in deps/lua/src/lopcodes.h.'>GETARG_B</a>(i) == 0);
<a name='L297'>      <b>return</b> 1;
<a name='L298'>    <font color='red'>}</font>
<a name='L299'>    <b>default</b>: <b>return</b> 0;  <i><font color='green'>/* invalid instruction after an open call */</font></i>
<a name='L300'>  <font color='red'>}</font>
<a name='L301'><font color='red'>}</font>
<a name='L302'>
<a name='L303'>
<a name='L304'><b>static</b> <b>int</b> <a href='../R/1538.html' title='Multiple refered from 2 places.'>checkArgMode</a> (<b>const</b> Proto *pt, <b>int</b> r, <b>enum</b> OpArgMask mode) <font color='red'>{</font>
<a name='L305'>  <b>switch</b> (mode) <font color='red'>{</font>
<a name='L306'>    <b>case</b> <a href='../S/273.html#L246' title='Defined at 246 in deps/lua/src/lopcodes.h.'>OpArgN</a>: <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>(r == 0); <b>break</b>;
<a name='L307'>    <b>case</b> <a href='../S/273.html#L247' title='Defined at 247 in deps/lua/src/lopcodes.h.'>OpArgU</a>: <b>break</b>;
<a name='L308'>    <b>case</b> <a href='../S/273.html#L248' title='Defined at 248 in deps/lua/src/lopcodes.h.'>OpArgR</a>: <a href='../D/1832.html' title='Multiple defined in 2 places.'>checkreg</a>(pt, r); <b>break</b>;
<a name='L309'>    <b>case</b> <a href='../S/273.html#L249' title='Defined at 249 in deps/lua/src/lopcodes.h.'>OpArgK</a>:
<a name='L310'>      <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>(<a href='../S/273.html#L122' title='Defined at 122 in deps/lua/src/lopcodes.h.'>ISK</a>(r) ? <a href='../S/273.html#L125' title='Defined at 125 in deps/lua/src/lopcodes.h.'>INDEXK</a>(r) &lt; pt-&gt;sizek : r &lt; pt-&gt;maxstacksize);
<a name='L311'>      <b>break</b>;
<a name='L312'>  <font color='red'>}</font>
<a name='L313'>  <b>return</b> 1;
<a name='L314'><font color='red'>}</font>
<a name='L315'>
<a name='L316'>
<a name='L317'><b>static</b> <a href='../S/310.html#L88' title='Defined at 88 in deps/lua/src/llimits.h.'>Instruction</a> <a href='../R/3906.html' title='Multiple refered from 2 places.'>symbexec</a> (<b>const</b> Proto *pt, <b>int</b> lastpc, <b>int</b> reg) <font color='red'>{</font>
<a name='L318'>  <b>int</b> pc;
<a name='L319'>  <b>int</b> last;  <i><font color='green'>/* stores position of last instruction that changed `reg' */</font></i>
<a name='L320'>  last = pt-&gt;sizecode-1;  <i><font color='green'>/* points to final return (a `neutral' instruction) */</font></i>
<a name='L321'>  <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>(<a href='../S/299.html#L276' title='Defined at 276 in deps/lua/src/ldebug.c.'>precheck</a>(pt));
<a name='L322'>  <b>for</b> (pc = 0; pc &lt; lastpc; pc++) <font color='red'>{</font>
<a name='L323'>    <a href='../S/310.html#L88' title='Defined at 88 in deps/lua/src/llimits.h.'>Instruction</a> i = pt-&gt;code[pc];
<a name='L324'>    <a href='../S/273.html#L208' title='Defined at 208 in deps/lua/src/lopcodes.h.'>OpCode</a> op = <a href='../S/273.html#L80' title='Defined at 80 in deps/lua/src/lopcodes.h.'>GET_OPCODE</a>(i);
<a name='L325'>    <b>int</b> a = <a href='../S/273.html#L84' title='Defined at 84 in deps/lua/src/lopcodes.h.'>GETARG_A</a>(i);
<a name='L326'>    <b>int</b> b = 0;
<a name='L327'>    <b>int</b> c = 0;
<a name='L328'>    <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>(op &lt; <a href='../S/273.html#L211' title='Defined at 211 in deps/lua/src/lopcodes.h.'>NUM_OPCODES</a>);
<a name='L329'>    <a href='../D/1832.html' title='Multiple defined in 2 places.'>checkreg</a>(pt, a);
<a name='L330'>    <b>switch</b> (<a href='../S/273.html#L254' title='Defined at 254 in deps/lua/src/lopcodes.h.'>getOpMode</a>(op)) <font color='red'>{</font>
<a name='L331'>      <b>case</b> <a href='../S/273.html#L31' title='Defined at 31 in deps/lua/src/lopcodes.h.'>iABC</a>: <font color='red'>{</font>
<a name='L332'>        b = <a href='../S/273.html#L88' title='Defined at 88 in deps/lua/src/lopcodes.h.'>GETARG_B</a>(i);
<a name='L333'>        c = <a href='../S/273.html#L92' title='Defined at 92 in deps/lua/src/lopcodes.h.'>GETARG_C</a>(i);
<a name='L334'>        <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>(<a href='../S/299.html#L304' title='Defined at 304 in deps/lua/src/ldebug.c.'>checkArgMode</a>(pt, b, <a href='../S/273.html#L255' title='Defined at 255 in deps/lua/src/lopcodes.h.'>getBMode</a>(op)));
<a name='L335'>        <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>(<a href='../S/299.html#L304' title='Defined at 304 in deps/lua/src/ldebug.c.'>checkArgMode</a>(pt, c, <a href='../S/273.html#L256' title='Defined at 256 in deps/lua/src/lopcodes.h.'>getCMode</a>(op)));
<a name='L336'>        <b>break</b>;
<a name='L337'>      <font color='red'>}</font>
<a name='L338'>      <b>case</b> <a href='../S/273.html#L31' title='Defined at 31 in deps/lua/src/lopcodes.h.'>iABx</a>: <font color='red'>{</font>
<a name='L339'>        b = <a href='../S/273.html#L96' title='Defined at 96 in deps/lua/src/lopcodes.h.'>GETARG_Bx</a>(i);
<a name='L340'>        <b>if</b> (<a href='../S/273.html#L255' title='Defined at 255 in deps/lua/src/lopcodes.h.'>getBMode</a>(op) == <a href='../S/273.html#L249' title='Defined at 249 in deps/lua/src/lopcodes.h.'>OpArgK</a>) <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>(b &lt; pt-&gt;sizek);
<a name='L341'>        <b>break</b>;
<a name='L342'>      <font color='red'>}</font>
<a name='L343'>      <b>case</b> <a href='../S/273.html#L31' title='Defined at 31 in deps/lua/src/lopcodes.h.'>iAsBx</a>: <font color='red'>{</font>
<a name='L344'>        b = <a href='../S/273.html#L100' title='Defined at 100 in deps/lua/src/lopcodes.h.'>GETARG_sBx</a>(i);
<a name='L345'>        <b>if</b> (<a href='../S/273.html#L255' title='Defined at 255 in deps/lua/src/lopcodes.h.'>getBMode</a>(op) == <a href='../S/273.html#L248' title='Defined at 248 in deps/lua/src/lopcodes.h.'>OpArgR</a>) <font color='red'>{</font>
<a name='L346'>          <b>int</b> dest = pc+1+b;
<a name='L347'>          <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>(0 &lt;= dest &amp;&amp; dest &lt; pt-&gt;sizecode);
<a name='L348'>          <b>if</b> (dest &gt; 0) <font color='red'>{</font>
<a name='L349'>            <b>int</b> j;
<a name='L350'>            <i><font color='green'>/* check that it does not jump to a setlist count; this</font></i>
<a name='L351'><i><font color='green'>               is tricky, because the count from a previous setlist may</font></i>
<a name='L352'><i><font color='green'>               have the same value of an invalid setlist; so, we must</font></i>
<a name='L353'><i><font color='green'>               go all the way back to the first of them (if any) */</font></i>
<a name='L354'>            <b>for</b> (j = 0; j &lt; dest; j++) <font color='red'>{</font>
<a name='L355'>              <a href='../S/310.html#L88' title='Defined at 88 in deps/lua/src/llimits.h.'>Instruction</a> d = pt-&gt;code[dest-1-j];
<a name='L356'>              <b>if</b> (!(<a href='../S/273.html#L80' title='Defined at 80 in deps/lua/src/lopcodes.h.'>GET_OPCODE</a>(d) == <a href='../S/273.html#L202' title='Defined at 202 in deps/lua/src/lopcodes.h.'>OP_SETLIST</a> &amp;&amp; <a href='../S/273.html#L92' title='Defined at 92 in deps/lua/src/lopcodes.h.'>GETARG_C</a>(d) == 0)) <b>break</b>;
<a name='L357'>            <font color='red'>}</font>
<a name='L358'>            <i><font color='green'>/* if 'j' is even, previous value is not a setlist (even if</font></i>
<a name='L359'><i><font color='green'>               it looks like one) */</font></i>
<a name='L360'>            <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>((j&amp;1) == 0);
<a name='L361'>          <font color='red'>}</font>
<a name='L362'>        <font color='red'>}</font>
<a name='L363'>        <b>break</b>;
<a name='L364'>      <font color='red'>}</font>
<a name='L365'>    <font color='red'>}</font>
<a name='L366'>    <b>if</b> (<a href='../S/273.html#L257' title='Defined at 257 in deps/lua/src/lopcodes.h.'>testAMode</a>(op)) <font color='red'>{</font>
<a name='L367'>      <b>if</b> (a == reg) last = pc;  <i><font color='green'>/* change register `a' */</font></i>
<a name='L368'>    <font color='red'>}</font>
<a name='L369'>    <b>if</b> (<a href='../S/273.html#L258' title='Defined at 258 in deps/lua/src/lopcodes.h.'>testTMode</a>(op)) <font color='red'>{</font>
<a name='L370'>      <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>(pc+2 &lt; pt-&gt;sizecode);  <i><font color='green'>/* check skip */</font></i>
<a name='L371'>      <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>(<a href='../S/273.html#L80' title='Defined at 80 in deps/lua/src/lopcodes.h.'>GET_OPCODE</a>(pt-&gt;code[pc+1]) == <a href='../S/273.html#L183' title='Defined at 183 in deps/lua/src/lopcodes.h.'>OP_JMP</a>);
<a name='L372'>    <font color='red'>}</font>
<a name='L373'>    <b>switch</b> (op) <font color='red'>{</font>
<a name='L374'>      <b>case</b> <a href='../S/273.html#L156' title='Defined at 156 in deps/lua/src/lopcodes.h.'>OP_LOADBOOL</a>: <font color='red'>{</font>
<a name='L375'>        <b>if</b> (c == 1) <font color='red'>{</font>  <i><font color='green'>/* does it jump? */</font></i>
<a name='L376'>          <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>(pc+2 &lt; pt-&gt;sizecode);  <i><font color='green'>/* check its jump */</font></i>
<a name='L377'>          <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>(<a href='../S/273.html#L80' title='Defined at 80 in deps/lua/src/lopcodes.h.'>GET_OPCODE</a>(pt-&gt;code[pc+1]) != <a href='../S/273.html#L202' title='Defined at 202 in deps/lua/src/lopcodes.h.'>OP_SETLIST</a> ||
<a name='L378'>                <a href='../S/273.html#L92' title='Defined at 92 in deps/lua/src/lopcodes.h.'>GETARG_C</a>(pt-&gt;code[pc+1]) != 0);
<a name='L379'>        <font color='red'>}</font>
<a name='L380'>        <b>break</b>;
<a name='L381'>      <font color='red'>}</font>
<a name='L382'>      <b>case</b> <a href='../S/273.html#L157' title='Defined at 157 in deps/lua/src/lopcodes.h.'>OP_LOADNIL</a>: <font color='red'>{</font>
<a name='L383'>        <b>if</b> (a &lt;= reg &amp;&amp; reg &lt;= b)
<a name='L384'>          last = pc;  <i><font color='green'>/* set registers from `a' to `b' */</font></i>
<a name='L385'>        <b>break</b>;
<a name='L386'>      <font color='red'>}</font>
<a name='L387'>      <b>case</b> <a href='../S/273.html#L158' title='Defined at 158 in deps/lua/src/lopcodes.h.'>OP_GETUPVAL</a>:
<a name='L388'>      <b>case</b> <a href='../S/273.html#L164' title='Defined at 164 in deps/lua/src/lopcodes.h.'>OP_SETUPVAL</a>: <font color='red'>{</font>
<a name='L389'>        <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>(b &lt; pt-&gt;nups);
<a name='L390'>        <b>break</b>;
<a name='L391'>      <font color='red'>}</font>
<a name='L392'>      <b>case</b> <a href='../S/273.html#L160' title='Defined at 160 in deps/lua/src/lopcodes.h.'>OP_GETGLOBAL</a>:
<a name='L393'>      <b>case</b> <a href='../S/273.html#L163' title='Defined at 163 in deps/lua/src/lopcodes.h.'>OP_SETGLOBAL</a>: <font color='red'>{</font>
<a name='L394'>        <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>(<a href='../S/282.html#L81' title='Defined at 81 in deps/lua/src/lobject.h.'>ttisstring</a>(&amp;pt-&gt;k[b]));
<a name='L395'>        <b>break</b>;
<a name='L396'>      <font color='red'>}</font>
<a name='L397'>      <b>case</b> <a href='../S/273.html#L169' title='Defined at 169 in deps/lua/src/lopcodes.h.'>OP_SELF</a>: <font color='red'>{</font>
<a name='L398'>        <a href='../D/1832.html' title='Multiple defined in 2 places.'>checkreg</a>(pt, a+1);
<a name='L399'>        <b>if</b> (reg == a+1) last = pc;
<a name='L400'>        <b>break</b>;
<a name='L401'>      <font color='red'>}</font>
<a name='L402'>      <b>case</b> <a href='../S/273.html#L181' title='Defined at 181 in deps/lua/src/lopcodes.h.'>OP_CONCAT</a>: <font color='red'>{</font>
<a name='L403'>        <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>(b &lt; c);  <i><font color='green'>/* at least two operands */</font></i>
<a name='L404'>        <b>break</b>;
<a name='L405'>      <font color='red'>}</font>
<a name='L406'>      <b>case</b> <a href='../S/273.html#L200' title='Defined at 200 in deps/lua/src/lopcodes.h.'>OP_TFORLOOP</a>: <font color='red'>{</font>
<a name='L407'>        <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>(c &gt;= 1);  <i><font color='green'>/* at least one result (control variable) */</font></i>
<a name='L408'>        <a href='../D/1832.html' title='Multiple defined in 2 places.'>checkreg</a>(pt, a+2+c);  <i><font color='green'>/* space for results */</font></i>
<a name='L409'>        <b>if</b> (reg &gt;= a+2) last = pc;  <i><font color='green'>/* affect all regs above its base */</font></i>
<a name='L410'>        <b>break</b>;
<a name='L411'>      <font color='red'>}</font>
<a name='L412'>      <b>case</b> <a href='../S/273.html#L196' title='Defined at 196 in deps/lua/src/lopcodes.h.'>OP_FORLOOP</a>:
<a name='L413'>      <b>case</b> <a href='../S/273.html#L198' title='Defined at 198 in deps/lua/src/lopcodes.h.'>OP_FORPREP</a>:
<a name='L414'>        <a href='../D/1832.html' title='Multiple defined in 2 places.'>checkreg</a>(pt, a+3);
<a name='L415'>        <i><font color='green'>/* go through */</font></i>
<a name='L416'>      <b>case</b> <a href='../S/273.html#L183' title='Defined at 183 in deps/lua/src/lopcodes.h.'>OP_JMP</a>: <font color='red'>{</font>
<a name='L417'>        <b>int</b> dest = pc+1+b;
<a name='L418'>        <i><font color='green'>/* not full check and jump is forward and do not skip `lastpc'? */</font></i>
<a name='L419'>        <b>if</b> (reg != <a href='../S/273.html#L136' title='Defined at 136 in deps/lua/src/lopcodes.h.'>NO_REG</a> &amp;&amp; pc &lt; dest &amp;&amp; dest &lt;= lastpc)
<a name='L420'>          pc += b;  <i><font color='green'>/* do the jump */</font></i>
<a name='L421'>        <b>break</b>;
<a name='L422'>      <font color='red'>}</font>
<a name='L423'>      <b>case</b> <a href='../S/273.html#L192' title='Defined at 192 in deps/lua/src/lopcodes.h.'>OP_CALL</a>:
<a name='L424'>      <b>case</b> <a href='../S/273.html#L193' title='Defined at 193 in deps/lua/src/lopcodes.h.'>OP_TAILCALL</a>: <font color='red'>{</font>
<a name='L425'>        <b>if</b> (b != 0) <font color='red'>{</font>
<a name='L426'>          <a href='../D/1832.html' title='Multiple defined in 2 places.'>checkreg</a>(pt, a+b-1);
<a name='L427'>        <font color='red'>}</font>
<a name='L428'>        c--;  <i><font color='green'>/* c = num. returns */</font></i>
<a name='L429'>        <b>if</b> (c == <a href='../S/266.html#L30' title='Defined at 30 in deps/lua/src/lua.h.'>LUA_MULTRET</a>) <font color='red'>{</font>
<a name='L430'>          <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>(<a href='../S/299.html#L288' title='Defined at 288 in deps/lua/src/ldebug.c.'>checkopenop</a>(pt, pc));
<a name='L431'>        <font color='red'>}</font>
<a name='L432'>        <b>else</b> <b>if</b> (c != 0)
<a name='L433'>          <a href='../D/1832.html' title='Multiple defined in 2 places.'>checkreg</a>(pt, a+c-1);
<a name='L434'>        <b>if</b> (reg &gt;= a) last = pc;  <i><font color='green'>/* affect all registers above base */</font></i>
<a name='L435'>        <b>break</b>;
<a name='L436'>      <font color='red'>}</font>
<a name='L437'>      <b>case</b> <a href='../S/273.html#L194' title='Defined at 194 in deps/lua/src/lopcodes.h.'>OP_RETURN</a>: <font color='red'>{</font>
<a name='L438'>        b--;  <i><font color='green'>/* b = num. returns */</font></i>
<a name='L439'>        <b>if</b> (b &gt; 0) <a href='../D/1832.html' title='Multiple defined in 2 places.'>checkreg</a>(pt, a+b-1);
<a name='L440'>        <b>break</b>;
<a name='L441'>      <font color='red'>}</font>
<a name='L442'>      <b>case</b> <a href='../S/273.html#L202' title='Defined at 202 in deps/lua/src/lopcodes.h.'>OP_SETLIST</a>: <font color='red'>{</font>
<a name='L443'>        <b>if</b> (b &gt; 0) <a href='../D/1832.html' title='Multiple defined in 2 places.'>checkreg</a>(pt, a + b);
<a name='L444'>        <b>if</b> (c == 0) <font color='red'>{</font>
<a name='L445'>          pc++;
<a name='L446'>          <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>(pc &lt; pt-&gt;sizecode - 1);
<a name='L447'>        <font color='red'>}</font>
<a name='L448'>        <b>break</b>;
<a name='L449'>      <font color='red'>}</font>
<a name='L450'>      <b>case</b> <a href='../S/273.html#L205' title='Defined at 205 in deps/lua/src/lopcodes.h.'>OP_CLOSURE</a>: <font color='red'>{</font>
<a name='L451'>        <b>int</b> nup, j;
<a name='L452'>        <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>(b &lt; pt-&gt;sizep);
<a name='L453'>        nup = pt-&gt;p[b]-&gt;nups;
<a name='L454'>        <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>(pc + nup &lt; pt-&gt;sizecode);
<a name='L455'>        <b>for</b> (j = 1; j &lt;= nup; j++) <font color='red'>{</font>
<a name='L456'>          <a href='../S/273.html#L208' title='Defined at 208 in deps/lua/src/lopcodes.h.'>OpCode</a> op1 = <a href='../S/273.html#L80' title='Defined at 80 in deps/lua/src/lopcodes.h.'>GET_OPCODE</a>(pt-&gt;code[pc + j]);
<a name='L457'>          <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>(op1 == <a href='../S/273.html#L158' title='Defined at 158 in deps/lua/src/lopcodes.h.'>OP_GETUPVAL</a> || op1 == <a href='../S/273.html#L154' title='Defined at 154 in deps/lua/src/lopcodes.h.'>OP_MOVE</a>);
<a name='L458'>        <font color='red'>}</font>
<a name='L459'>        <b>if</b> (reg != <a href='../S/273.html#L136' title='Defined at 136 in deps/lua/src/lopcodes.h.'>NO_REG</a>)  <i><font color='green'>/* tracing? */</font></i>
<a name='L460'>          pc += nup;  <i><font color='green'>/* do not 'execute' these pseudo-instructions */</font></i>
<a name='L461'>        <b>break</b>;
<a name='L462'>      <font color='red'>}</font>
<a name='L463'>      <b>case</b> <a href='../S/273.html#L207' title='Defined at 207 in deps/lua/src/lopcodes.h.'>OP_VARARG</a>: <font color='red'>{</font>
<a name='L464'>        <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>((pt-&gt;is_vararg &amp; <a href='../S/282.html#L258' title='Defined at 258 in deps/lua/src/lobject.h.'>VARARG_ISVARARG</a>) &amp;&amp;
<a name='L465'>             !(pt-&gt;is_vararg &amp; <a href='../S/282.html#L259' title='Defined at 259 in deps/lua/src/lobject.h.'>VARARG_NEEDSARG</a>));
<a name='L466'>        b--;
<a name='L467'>        <b>if</b> (b == <a href='../S/266.html#L30' title='Defined at 30 in deps/lua/src/lua.h.'>LUA_MULTRET</a>) <a href='../D/1811.html' title='Multiple defined in 3 places.'>check</a>(<a href='../S/299.html#L288' title='Defined at 288 in deps/lua/src/ldebug.c.'>checkopenop</a>(pt, pc));
<a name='L468'>        <a href='../D/1832.html' title='Multiple defined in 2 places.'>checkreg</a>(pt, a+b-1);
<a name='L469'>        <b>break</b>;
<a name='L470'>      <font color='red'>}</font>
<a name='L471'>      <b>default</b>: <b>break</b>;
<a name='L472'>    <font color='red'>}</font>
<a name='L473'>  <font color='red'>}</font>
<a name='L474'>  <b>return</b> pt-&gt;code[last];
<a name='L475'><font color='red'>}</font>
<a name='L476'>
<a name='L477'><font color='darkred'>#undef</font> <a href='../R/1537.html' title='Multiple refered from 37 places.'>check</a>
<a name='L478'><font color='darkred'>#undef</font> checkjump
<a name='L479'><font color='darkred'>#undef</font> <a href='../R/1557.html' title='Multiple refered from 10 places.'>checkreg</a>
<a name='L480'>
<a name='L481'><i><font color='green'>/* }====================================================== */</font></i>
<a name='L482'>
<a name='L483'>
<a name='L484'><b>int</b> <a href='../R/2568.html' title='Multiple refered from 3 places.'>luaG_checkcode</a> (<b>const</b> Proto *pt) <font color='red'>{</font>
<a name='L485'>  <b>return</b> (<a href='../S/299.html#L317' title='Defined at 317 in deps/lua/src/ldebug.c.'>symbexec</a>(pt, pt-&gt;sizecode, <a href='../S/273.html#L136' title='Defined at 136 in deps/lua/src/lopcodes.h.'>NO_REG</a>) != 0);
<a name='L486'><font color='red'>}</font>
<a name='L487'>
<a name='L488'>
<a name='L489'><b>static</b> <b>const</b> <b>char</b> *<a href='../R/2339.html' title='Multiple refered from 2 places.'>kname</a> (Proto *p, <b>int</b> c) <font color='red'>{</font>
<a name='L490'>  <b>if</b> (<a href='../S/273.html#L122' title='Defined at 122 in deps/lua/src/lopcodes.h.'>ISK</a>(c) &amp;&amp; <a href='../S/282.html#L81' title='Defined at 81 in deps/lua/src/lobject.h.'>ttisstring</a>(&amp;p-&gt;k[<a href='../S/273.html#L125' title='Defined at 125 in deps/lua/src/lopcodes.h.'>INDEXK</a>(c)]))
<a name='L491'>    <b>return</b> <a href='../S/282.html#L211' title='Defined at 211 in deps/lua/src/lobject.h.'>svalue</a>(&amp;p-&gt;k[<a href='../S/273.html#L125' title='Defined at 125 in deps/lua/src/lopcodes.h.'>INDEXK</a>(c)]);
<a name='L492'>  <b>else</b>
<a name='L493'>    <b>return</b> "?";
<a name='L494'><font color='red'>}</font>
<a name='L495'>
<a name='L496'>
<a name='L497'><b>static</b> <b>const</b> <b>char</b> *<a href='../R/2091.html' title='Multiple refered from 3 places.'>getobjname</a> (lua_State *L, CallInfo *ci, <b>int</b> stackpos,
<a name='L498'>                               <b>const</b> <b>char</b> **name) <font color='red'>{</font>
<a name='L499'>  <b>if</b> (<a href='../S/298.html#L62' title='Defined at 62 in deps/lua/src/lstate.h.'>isLua</a>(ci)) <font color='red'>{</font>  <i><font color='green'>/* a Lua function? */</font></i>
<a name='L500'>    <a href='../D/722.html' title='Multiple defined in 2 places.'>Proto</a> *p = <a href='../S/298.html#L60' title='Defined at 60 in deps/lua/src/lstate.h.'>ci_func</a>(ci)-&gt;l.p;
<a name='L501'>    <b>int</b> pc = <a href='../S/299.html#L36' title='Defined at 36 in deps/lua/src/ldebug.c.'>currentpc</a>(L, ci);
<a name='L502'>    <a href='../S/310.html#L88' title='Defined at 88 in deps/lua/src/llimits.h.'>Instruction</a> i;
<a name='L503'>    *name = <a href='../S/258.html#L163' title='Defined at 163 in deps/lua/src/lfunc.c.'>luaF_getlocalname</a>(p, stackpos+1, pc);
<a name='L504'>    <b>if</b> (*name)  <i><font color='green'>/* is a local? */</font></i>
<a name='L505'>      <b>return</b> "local";
<a name='L506'>    i = <a href='../S/299.html#L317' title='Defined at 317 in deps/lua/src/ldebug.c.'>symbexec</a>(p, pc, stackpos);  <i><font color='green'>/* try symbolic execution */</font></i>
<a name='L507'>    <a href='../D/3090.html' title='Multiple defined in 2 places.'>lua_assert</a>(pc != -1);
<a name='L508'>    <b>switch</b> (<a href='../S/273.html#L80' title='Defined at 80 in deps/lua/src/lopcodes.h.'>GET_OPCODE</a>(i)) <font color='red'>{</font>
<a name='L509'>      <b>case</b> <a href='../S/273.html#L160' title='Defined at 160 in deps/lua/src/lopcodes.h.'>OP_GETGLOBAL</a>: <font color='red'>{</font>
<a name='L510'>        <b>int</b> g = <a href='../S/273.html#L96' title='Defined at 96 in deps/lua/src/lopcodes.h.'>GETARG_Bx</a>(i);  <i><font color='green'>/* global index */</font></i>
<a name='L511'>        <a href='../D/3090.html' title='Multiple defined in 2 places.'>lua_assert</a>(<a href='../S/282.html#L81' title='Defined at 81 in deps/lua/src/lobject.h.'>ttisstring</a>(&amp;p-&gt;k[g]));
<a name='L512'>        *name = <a href='../S/282.html#L211' title='Defined at 211 in deps/lua/src/lobject.h.'>svalue</a>(&amp;p-&gt;k[g]);
<a name='L513'>        <b>return</b> "global";
<a name='L514'>      <font color='red'>}</font>
<a name='L515'>      <b>case</b> <a href='../S/273.html#L154' title='Defined at 154 in deps/lua/src/lopcodes.h.'>OP_MOVE</a>: <font color='red'>{</font>
<a name='L516'>        <b>int</b> a = <a href='../S/273.html#L84' title='Defined at 84 in deps/lua/src/lopcodes.h.'>GETARG_A</a>(i);
<a name='L517'>        <b>int</b> b = <a href='../S/273.html#L88' title='Defined at 88 in deps/lua/src/lopcodes.h.'>GETARG_B</a>(i);  <i><font color='green'>/* move from `b' to `a' */</font></i>
<a name='L518'>        <b>if</b> (b &lt; a)
<a name='L519'>          <b>return</b> <a href='../S/299.html#L497' title='Defined at 497 in deps/lua/src/ldebug.c.'>getobjname</a>(L, ci, b, name);  <i><font color='green'>/* get name for `b' */</font></i>
<a name='L520'>        <b>break</b>;
<a name='L521'>      <font color='red'>}</font>
<a name='L522'>      <b>case</b> <a href='../S/273.html#L161' title='Defined at 161 in deps/lua/src/lopcodes.h.'>OP_GETTABLE</a>: <font color='red'>{</font>
<a name='L523'>        <b>int</b> k = <a href='../S/273.html#L92' title='Defined at 92 in deps/lua/src/lopcodes.h.'>GETARG_C</a>(i);  <i><font color='green'>/* key index */</font></i>
<a name='L524'>        *name = <a href='../S/299.html#L489' title='Defined at 489 in deps/lua/src/ldebug.c.'>kname</a>(p, k);
<a name='L525'>        <b>return</b> "field";
<a name='L526'>      <font color='red'>}</font>
<a name='L527'>      <b>case</b> <a href='../S/273.html#L158' title='Defined at 158 in deps/lua/src/lopcodes.h.'>OP_GETUPVAL</a>: <font color='red'>{</font>
<a name='L528'>        <b>int</b> u = <a href='../S/273.html#L88' title='Defined at 88 in deps/lua/src/lopcodes.h.'>GETARG_B</a>(i);  <i><font color='green'>/* upvalue index */</font></i>
<a name='L529'>        *name = p-&gt;upvalues ? <a href='../S/282.html#L210' title='Defined at 210 in deps/lua/src/lobject.h.'>getstr</a>(p-&gt;upvalues[u]) : "?";
<a name='L530'>        <b>return</b> "upvalue";
<a name='L531'>      <font color='red'>}</font>
<a name='L532'>      <b>case</b> <a href='../S/273.html#L169' title='Defined at 169 in deps/lua/src/lopcodes.h.'>OP_SELF</a>: <font color='red'>{</font>
<a name='L533'>        <b>int</b> k = <a href='../S/273.html#L92' title='Defined at 92 in deps/lua/src/lopcodes.h.'>GETARG_C</a>(i);  <i><font color='green'>/* key index */</font></i>
<a name='L534'>        *name = <a href='../S/299.html#L489' title='Defined at 489 in deps/lua/src/ldebug.c.'>kname</a>(p, k);
<a name='L535'>        <b>return</b> "method";
<a name='L536'>      <font color='red'>}</font>
<a name='L537'>      <b>default</b>: <b>break</b>;
<a name='L538'>    <font color='red'>}</font>
<a name='L539'>  <font color='red'>}</font>
<a name='L540'>  <b>return</b> NULL;  <i><font color='green'>/* no useful name found */</font></i>
<a name='L541'><font color='red'>}</font>
<a name='L542'>
<a name='L543'>
<a name='L544'><b>static</b> <b>const</b> <b>char</b> *<a href='../R/2080.html' title='Multiple refered from 2 places.'>getfuncname</a> (lua_State *L, CallInfo *ci, <b>const</b> <b>char</b> **name) <font color='red'>{</font>
<a name='L545'>  <a href='../S/310.html#L88' title='Defined at 88 in deps/lua/src/llimits.h.'>Instruction</a> i;
<a name='L546'>  <b>if</b> ((<a href='../S/298.html#L62' title='Defined at 62 in deps/lua/src/lstate.h.'>isLua</a>(ci) &amp;&amp; ci-&gt;tailcalls &gt; 0) || !<a href='../S/298.html#L62' title='Defined at 62 in deps/lua/src/lstate.h.'>isLua</a>(ci - 1))
<a name='L547'>    <b>return</b> NULL;  <i><font color='green'>/* calling function is not Lua (or is unknown) */</font></i>
<a name='L548'>  ci--;  <i><font color='green'>/* calling function */</font></i>
<a name='L549'>  i = <a href='../S/298.html#L60' title='Defined at 60 in deps/lua/src/lstate.h.'>ci_func</a>(ci)-&gt;l.p-&gt;code[<a href='../S/299.html#L36' title='Defined at 36 in deps/lua/src/ldebug.c.'>currentpc</a>(L, ci)];
<a name='L550'>  <b>if</b> (<a href='../S/273.html#L80' title='Defined at 80 in deps/lua/src/lopcodes.h.'>GET_OPCODE</a>(i) == <a href='../S/273.html#L192' title='Defined at 192 in deps/lua/src/lopcodes.h.'>OP_CALL</a> || <a href='../S/273.html#L80' title='Defined at 80 in deps/lua/src/lopcodes.h.'>GET_OPCODE</a>(i) == <a href='../S/273.html#L193' title='Defined at 193 in deps/lua/src/lopcodes.h.'>OP_TAILCALL</a> ||
<a name='L551'>      <a href='../S/273.html#L80' title='Defined at 80 in deps/lua/src/lopcodes.h.'>GET_OPCODE</a>(i) == <a href='../S/273.html#L200' title='Defined at 200 in deps/lua/src/lopcodes.h.'>OP_TFORLOOP</a>)
<a name='L552'>    <b>return</b> <a href='../S/299.html#L497' title='Defined at 497 in deps/lua/src/ldebug.c.'>getobjname</a>(L, ci, <a href='../S/273.html#L84' title='Defined at 84 in deps/lua/src/lopcodes.h.'>GETARG_A</a>(i), name);
<a name='L553'>  <b>else</b>
<a name='L554'>    <b>return</b> NULL;  <i><font color='green'>/* no useful name can be found */</font></i>
<a name='L555'><font color='red'>}</font>
<a name='L556'>
<a name='L557'>
<a name='L558'><i><font color='green'>/* only ANSI way to check whether a pointer points to an array */</font></i>
<a name='L559'><b>static</b> <b>int</b> <a href='../S/299.html#L570' title='Refered from 570 in deps/lua/src/ldebug.c.'>isinstack</a> (CallInfo *ci, <b>const</b> TValue *o) <font color='red'>{</font>
<a name='L560'>  <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> p;
<a name='L561'>  <b>for</b> (p = ci-&gt;base; p &lt; ci-&gt;top; p++)
<a name='L562'>    <b>if</b> (o == p) <b>return</b> 1;
<a name='L563'>  <b>return</b> 0;
<a name='L564'><font color='red'>}</font>
<a name='L565'>
<a name='L566'>
<a name='L567'><b>void</b> <a href='../R/2574.html' title='Multiple refered from 7 places.'>luaG_typeerror</a> (lua_State *L, <b>const</b> TValue *o, <b>const</b> <b>char</b> *op) <font color='red'>{</font>
<a name='L568'>  <b>const</b> <b>char</b> *name = NULL;
<a name='L569'>  <b>const</b> <b>char</b> *t = luaT_typenames[<a href='../S/282.html#L90' title='Defined at 90 in deps/lua/src/lobject.h.'>ttype</a>(o)];
<a name='L570'>  <b>const</b> <b>char</b> *kind = (<a href='../S/299.html#L559' title='Defined at 559 in deps/lua/src/ldebug.c.'>isinstack</a>(L-&gt;ci, o)) ?
<a name='L571'>                         <a href='../S/299.html#L497' title='Defined at 497 in deps/lua/src/ldebug.c.'>getobjname</a>(L, L-&gt;ci, <a href='../S/310.html#L80' title='Defined at 80 in deps/lua/src/llimits.h.'>cast_int</a>(o - L-&gt;base), &amp;name) :
<a name='L572'>                         NULL;
<a name='L573'>  <b>if</b> (kind)
<a name='L574'>    <a href='../S/299.html#L631' title='Defined at 631 in deps/lua/src/ldebug.c.'>luaG_runerror</a>(L, "attempt to %s %s " <a href='../S/317.html#L202' title='Defined at 202 in deps/lua/src/luaconf.h.'>LUA_QS</a> " (a %s value)",
<a name='L575'>                op, kind, name, t);
<a name='L576'>  <b>else</b>
<a name='L577'>    <a href='../S/299.html#L631' title='Defined at 631 in deps/lua/src/ldebug.c.'>luaG_runerror</a>(L, "attempt to %s a %s value", op, t);
<a name='L578'><font color='red'>}</font>
<a name='L579'>
<a name='L580'>
<a name='L581'><b>void</b> <a href='../R/2570.html' title='Multiple refered from 2 places.'>luaG_concaterror</a> (lua_State *L, StkId p1, StkId p2) <font color='red'>{</font>
<a name='L582'>  <b>if</b> (<a href='../S/282.html#L81' title='Defined at 81 in deps/lua/src/lobject.h.'>ttisstring</a>(p1) || <a href='../S/282.html#L80' title='Defined at 80 in deps/lua/src/lobject.h.'>ttisnumber</a>(p1)) p1 = p2;
<a name='L583'>  <a href='../D/3090.html' title='Multiple defined in 2 places.'>lua_assert</a>(!<a href='../S/282.html#L81' title='Defined at 81 in deps/lua/src/lobject.h.'>ttisstring</a>(p1) &amp;&amp; !<a href='../S/282.html#L80' title='Defined at 80 in deps/lua/src/lobject.h.'>ttisnumber</a>(p1));
<a name='L584'>  <a href='../S/299.html#L567' title='Defined at 567 in deps/lua/src/ldebug.c.'>luaG_typeerror</a>(L, p1, "concatenate");
<a name='L585'><font color='red'>}</font>
<a name='L586'>
<a name='L587'>
<a name='L588'><b>void</b> <a href='../R/2567.html' title='Multiple refered from 2 places.'>luaG_aritherror</a> (lua_State *L, <b>const</b> TValue *p1, <b>const</b> TValue *p2) <font color='red'>{</font>
<a name='L589'>  <a href='../S/282.html#L75' title='Defined at 75 in deps/lua/src/lobject.h.'>TValue</a> temp;
<a name='L590'>  <b>if</b> (<a href='../S/290.html#L35' title='Defined at 35 in deps/lua/src/lvm.c.'>luaV_tonumber</a>(p1, &amp;temp) == NULL)
<a name='L591'>    p2 = p1;  <i><font color='green'>/* first operand is wrong */</font></i>
<a name='L592'>  <a href='../S/299.html#L567' title='Defined at 567 in deps/lua/src/ldebug.c.'>luaG_typeerror</a>(L, p2, "perform arithmetic on");
<a name='L593'><font color='red'>}</font>
<a name='L594'>
<a name='L595'>
<a name='L596'><b>int</b> <a href='../R/2572.html' title='Multiple refered from 5 places.'>luaG_ordererror</a> (lua_State *L, <b>const</b> TValue *p1, <b>const</b> TValue *p2) <font color='red'>{</font>
<a name='L597'>  <b>const</b> <b>char</b> *t1 = luaT_typenames[<a href='../S/282.html#L90' title='Defined at 90 in deps/lua/src/lobject.h.'>ttype</a>(p1)];
<a name='L598'>  <b>const</b> <b>char</b> *t2 = luaT_typenames[<a href='../S/282.html#L90' title='Defined at 90 in deps/lua/src/lobject.h.'>ttype</a>(p2)];
<a name='L599'>  <b>if</b> (t1[2] == t2[2])
<a name='L600'>    <a href='../S/299.html#L631' title='Defined at 631 in deps/lua/src/ldebug.c.'>luaG_runerror</a>(L, "attempt to compare two %s values", t1);
<a name='L601'>  <b>else</b>
<a name='L602'>    <a href='../S/299.html#L631' title='Defined at 631 in deps/lua/src/ldebug.c.'>luaG_runerror</a>(L, "attempt to compare %s with %s", t1, t2);
<a name='L603'>  <b>return</b> 0;
<a name='L604'><font color='red'>}</font>
<a name='L605'>
<a name='L606'>
<a name='L607'><b>static</b> <b>void</b> <a href='../S/299.html#L634' title='Refered from 634 in deps/lua/src/ldebug.c.'>addinfo</a> (lua_State *L, <b>const</b> <b>char</b> *msg) <font color='red'>{</font>
<a name='L608'>  <a href='../D/107.html' title='Multiple defined in 2 places.'>CallInfo</a> *ci = L-&gt;ci;
<a name='L609'>  <b>if</b> (<a href='../S/298.html#L62' title='Defined at 62 in deps/lua/src/lstate.h.'>isLua</a>(ci)) <font color='red'>{</font>  <i><font color='green'>/* is Lua code? */</font></i>
<a name='L610'>    <b>char</b> buff[<a href='../S/317.html#L210' title='Defined at 210 in deps/lua/src/luaconf.h.'>LUA_IDSIZE</a>];  <i><font color='green'>/* add file:line information */</font></i>
<a name='L611'>    <b>int</b> line = <a href='../S/299.html#L44' title='Defined at 44 in deps/lua/src/ldebug.c.'>currentline</a>(L, ci);
<a name='L612'>    <a href='../S/311.html#L182' title='Defined at 182 in deps/lua/src/lobject.c.'>luaO_chunkid</a>(buff, <a href='../S/282.html#L210' title='Defined at 210 in deps/lua/src/lobject.h.'>getstr</a>(<a href='../S/299.html#L107' title='Defined at 107 in deps/lua/src/ldebug.c.'>getluaproto</a>(ci)-&gt;source), <a href='../S/317.html#L210' title='Defined at 210 in deps/lua/src/luaconf.h.'>LUA_IDSIZE</a>);
<a name='L613'>    <a href='../S/311.html#L172' title='Defined at 172 in deps/lua/src/lobject.c.'>luaO_pushfstring</a>(L, "%s:%d: %s", buff, line, msg);
<a name='L614'>  <font color='red'>}</font>
<a name='L615'><font color='red'>}</font>
<a name='L616'>
<a name='L617'>
<a name='L618'><b>void</b> <a href='../R/2571.html' title='Multiple refered from 3 places.'>luaG_errormsg</a> (lua_State *L) <font color='red'>{</font>
<a name='L619'>  <b>if</b> (L-&gt;errfunc != 0) <font color='red'>{</font>  <i><font color='green'>/* is there an error handling function? */</font></i>
<a name='L620'>    <a href='../S/282.html#L193' title='Defined at 193 in deps/lua/src/lobject.h.'>StkId</a> errfunc = <a href='../S/296.html#L25' title='Defined at 25 in deps/lua/src/ldo.h.'>restorestack</a>(L, L-&gt;errfunc);
<a name='L621'>    <b>if</b> (!<a href='../S/282.html#L83' title='Defined at 83 in deps/lua/src/lobject.h.'>ttisfunction</a>(errfunc)) <a href='../S/297.html#L94' title='Defined at 94 in deps/lua/src/ldo.c.'>luaD_throw</a>(L, <a href='../S/266.html#L47' title='Defined at 47 in deps/lua/src/lua.h.'>LUA_ERRERR</a>);
<a name='L622'>    <a href='../S/282.html#L172' title='Defined at 172 in deps/lua/src/lobject.h.'>setobjs2s</a>(L, L-&gt;top, L-&gt;top - 1);  <i><font color='green'>/* move argument */</font></i>
<a name='L623'>    <a href='../S/282.html#L172' title='Defined at 172 in deps/lua/src/lobject.h.'>setobjs2s</a>(L, L-&gt;top - 1, errfunc);  <i><font color='green'>/* push function */</font></i>
<a name='L624'>    <a href='../S/296.html#L22' title='Defined at 22 in deps/lua/src/ldo.h.'>incr_top</a>(L);
<a name='L625'>    <a href='../S/297.html#L369' title='Defined at 369 in deps/lua/src/ldo.c.'>luaD_call</a>(L, L-&gt;top - 2, 1);  <i><font color='green'>/* call it */</font></i>
<a name='L626'>  <font color='red'>}</font>
<a name='L627'>  <a href='../S/297.html#L94' title='Defined at 94 in deps/lua/src/ldo.c.'>luaD_throw</a>(L, <a href='../S/266.html#L44' title='Defined at 44 in deps/lua/src/lua.h.'>LUA_ERRRUN</a>);
<a name='L628'><font color='red'>}</font>
<a name='L629'>
<a name='L630'>
<a name='L631'><b>void</b> <a href='../R/2573.html' title='Multiple refered from 21 places.'>luaG_runerror</a> (lua_State *L, <b>const</b> <b>char</b> *fmt, ...) <font color='red'>{</font>
<a name='L632'>  va_list argp;
<a name='L633'>  va_start(argp, fmt);
<a name='L634'>  <a href='../S/299.html#L607' title='Defined at 607 in deps/lua/src/ldebug.c.'>addinfo</a>(L, <a href='../S/311.html#L111' title='Defined at 111 in deps/lua/src/lobject.c.'>luaO_pushvfstring</a>(L, fmt, argp));
<a name='L635'>  va_end(argp);
<a name='L636'>  <a href='../S/299.html#L618' title='Defined at 618 in deps/lua/src/ldebug.c.'>luaG_errormsg</a>(L);
<a name='L637'><font color='red'>}</font>
<a name='L638'>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L36'>[^]</a><a href='#L631'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
