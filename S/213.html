<html>
<head>
<title>deps/jemalloc/src/jemalloc.c</title>
<meta name='robots' content='noindex,nofollow'>
<meta name='generator' content='GLOBAL-5.7.1'>
</head>
<body text='#191970' bgcolor='#f5f5dc' vlink='gray'>
<a name='TOP'><h2><a href='../mains.html'>root</a>/<a href='../files/387.html'>deps</a>/<a href='../files/390.html'>jemalloc</a>/<a href='../files/395.html'>src</a>/jemalloc.c</h2>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L59'>[^]</a><a href='#L1822'>[v]</a>[top]<a href='#BOTTOM'>[bottom]</a><a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
<hr>
<h2>DEFINITIONS</h2>
This source file includes following definitions.
<ol>
<li><a href='#L59' title='Defined at 59.'>JEMALLOC_ATTR</a>
<li><a href='#L118' title='Defined at 118.'>arenas_extend</a>
<li><a href='#L144' title='Defined at 144.'>choose_arena_hard</a>
<li><a href='#L204' title='Defined at 204.'>stats_print_atexit</a>
<li><a href='#L248' title='Defined at 248.'>malloc_ncpus</a>
<li><a href='#L271' title='Defined at 271.'>arenas_cleanup</a>
<li><a href='#L281' title='Defined at 281.'>malloc_init</a>
<li><a href='#L291' title='Defined at 291.'>malloc_conf_next</a>
<li><a href='#L367' title='Defined at 367.'>malloc_conf_error</a>
<li><a href='#L376' title='Defined at 376.'>malloc_conf_init</a>
<li><a href='#L637' title='Defined at 637.'>malloc_init_hard</a>
<li><a href='#L829' title='Defined at 829.'>je_malloc</a>
<li><a href='#L883' title='Defined at 883.'>JEMALLOC_ATTR</a>
<li><a href='#L978' title='Defined at 978.'>je_posix_memalign</a>
<li><a href='#L987' title='Defined at 987.'>je_aligned_alloc</a>
<li><a href='#L1002' title='Defined at 1002.'>je_calloc</a>
<li><a href='#L1077' title='Defined at 1077.'>je_realloc</a>
<li><a href='#L1224' title='Defined at 1224.'>je_free</a>
<li><a href='#L1258' title='Defined at 1258.'>je_memalign</a>
<li><a href='#L1269' title='Defined at 1269.'>je_valloc</a>
<li><a href='#L1312' title='Defined at 1312.'>je_malloc_usable_size</a>
<li><a href='#L1327' title='Defined at 1327.'>je_malloc_stats_print</a>
<li><a href='#L1335' title='Defined at 1335.'>je_mallctl</a>
<li><a href='#L1346' title='Defined at 1346.'>je_mallctlnametomib</a>
<li><a href='#L1356' title='Defined at 1356.'>je_mallctlbymib</a>
<li><a href='#L1376' title='Defined at 1376.'>iallocm</a>
<li><a href='#L1392' title='Defined at 1392.'>je_allocm</a>
<li><a href='#L1472' title='Defined at 1472.'>je_rallocm</a>
<li><a href='#L1600' title='Defined at 1600.'>je_sallocm</a>
<li><a href='#L1619' title='Defined at 1619.'>je_dallocm</a>
<li><a href='#L1655' title='Defined at 1655.'>je_nallocm</a>
<li><a href='#L1698' title='Defined at 1698.'>JEMALLOC_ATTR</a>
<li><a href='#L1708' title='Defined at 1708.'>jemalloc_prefork</a>
<li><a href='#L1737' title='Defined at 1737.'>jemalloc_postfork_parent</a>
<li><a href='#L1765' title='Defined at 1765.'>jemalloc_postfork_child</a>
<li><a href='#L1792' title='Defined at 1792.'>a0alloc</a>
<li><a href='#L1808' title='Defined at 1808.'>a0malloc</a>
<li><a href='#L1815' title='Defined at 1815.'>a0calloc</a>
<li><a href='#L1822' title='Defined at 1822.'>a0free</a>
</ol>
<hr>
<pre>
<a name='L1'><font color='darkred'>#define</font> JEMALLOC_C_
<a name='L2'><font color='darkred'>#include</font> "jemalloc/internal/jemalloc_internal.h"
<a name='L3'>
<a name='L4'><i><font color='green'>/******************************************************************************/</font></i>
<a name='L5'><i><font color='green'>/* Data. */</font></i>
<a name='L6'>
<a name='L7'><a href='../D/3287.html' title='Multiple defined in 5 places.'>malloc_tsd_data</a>(, arenas, <a href='../S/146.html#L51' title='Defined at 51 in deps/jemalloc/include/jemalloc/internal/arena.h.'>arena_t</a> *, NULL)
<a name='L8'>malloc_tsd_data(, thread_allocated, thread_allocated_t,
<a name='L9'>    THREAD_ALLOCATED_INITIALIZER)
<a name='L10'>
<a name='L11'><i><font color='green'>/* Runtime configuration options. */</font></i>
<a name='L12'><b>const</b> <b>char</b>      *je_malloc_conf;
<a name='L13'><font color='darkred'>#ifdef</font> JEMALLOC_DEBUG
<a name='L14'>bool    opt_abort = <a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>;
<a name='L15'><font color='darkred'>#  ifdef</font> JEMALLOC_FILL
<a name='L16'><a href='../S/159.html#L10' title='Defined at 10 in deps/jemalloc/include/msvc_compat/stdbool.h.'>bool</a>    <a href='../S/138.html#L239' title='Defined at 239 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_junk</a> = <a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>;
<a name='L17'><font color='darkred'>#  else</font>
<a name='L18'><a href='../S/159.html#L10' title='Defined at 10 in deps/jemalloc/include/msvc_compat/stdbool.h.'>bool</a>    <a href='../S/138.html#L239' title='Defined at 239 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_junk</a> = <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>;
<a name='L19'><font color='darkred'>#  endif</font>
<a name='L20'><font color='darkred'>#else</font>
<a name='L21'><a href='../S/159.html#L10' title='Defined at 10 in deps/jemalloc/include/msvc_compat/stdbool.h.'>bool</a>    <a href='../S/138.html#L238' title='Defined at 238 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_abort</a> = <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>;
<a name='L22'><a href='../S/159.html#L10' title='Defined at 10 in deps/jemalloc/include/msvc_compat/stdbool.h.'>bool</a>    <a href='../S/138.html#L239' title='Defined at 239 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_junk</a> = <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>;
<a name='L23'><font color='darkred'>#endif</font>
<a name='L24'>size_t  <a href='../S/138.html#L253' title='Defined at 253 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_quarantine</a> = ZU(0);
<a name='L25'><a href='../S/159.html#L10' title='Defined at 10 in deps/jemalloc/include/msvc_compat/stdbool.h.'>bool</a>    <a href='../S/138.html#L254' title='Defined at 254 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_redzone</a> = <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>;
<a name='L26'><a href='../S/159.html#L10' title='Defined at 10 in deps/jemalloc/include/msvc_compat/stdbool.h.'>bool</a>    <a href='../S/138.html#L257' title='Defined at 257 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_utrace</a> = <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>;
<a name='L27'><a href='../S/159.html#L10' title='Defined at 10 in deps/jemalloc/include/msvc_compat/stdbool.h.'>bool</a>    <a href='../S/138.html#L258' title='Defined at 258 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_valgrind</a> = <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>;
<a name='L28'><a href='../S/159.html#L10' title='Defined at 10 in deps/jemalloc/include/msvc_compat/stdbool.h.'>bool</a>    <a href='../S/138.html#L259' title='Defined at 259 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_xmalloc</a> = <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>;
<a name='L29'><a href='../S/159.html#L10' title='Defined at 10 in deps/jemalloc/include/msvc_compat/stdbool.h.'>bool</a>    <a href='../S/138.html#L260' title='Defined at 260 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_zero</a> = <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>;
<a name='L30'>size_t  <a href='../S/138.html#L245' title='Defined at 245 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_narenas</a> = 0;
<a name='L31'>
<a name='L32'><b>unsigned</b>        <a href='../S/138.html#L236' title='Defined at 236 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>ncpus</a>;
<a name='L33'>
<a name='L34'><a href='../S/144.html#L4' title='Defined at 4 in deps/jemalloc/include/jemalloc/internal/mutex.h.'>malloc_mutex_t</a>          <a href='../S/138.html#L60' title='Defined at 60 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas_lock</a>;
<a name='L35'><a href='../S/146.html#L51' title='Defined at 51 in deps/jemalloc/include/jemalloc/internal/arena.h.'>arena_t</a>                 **<a href='../S/138.html#L55' title='Defined at 55 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas</a>;
<a name='L36'><b>unsigned</b>                <a href='../S/138.html#L234' title='Defined at 234 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>narenas_total</a>;
<a name='L37'><b>unsigned</b>                <a href='../S/138.html#L233' title='Defined at 233 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>narenas_auto</a>;
<a name='L38'>
<a name='L39'><i><font color='green'>/* Set to true once the allocator has been initialized. */</font></i>
<a name='L40'><b>static</b> <a href='../S/159.html#L10' title='Defined at 10 in deps/jemalloc/include/msvc_compat/stdbool.h.'>bool</a>             malloc_initialized = <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>;
<a name='L41'>
<a name='L42'><font color='darkred'>#ifdef</font> JEMALLOC_THREADED_INIT
<a name='L43'><i><font color='green'>/* Used to let the initializing thread recursively allocate. */</font></i>
<a name='L44'><font color='darkred'>#  define</font> <a href='../R/466.html' title='Multiple refered from 3 places.'>NO_INITIALIZER</a>        ((<b>unsigned</b> <b>long</b>)0)
<a name='L45'><font color='darkred'>#  define</font> <a href='../S/213.html#L663' title='Refered from 663 in deps/jemalloc/src/jemalloc.c.'>INITIALIZER</a>           pthread_self()
<a name='L46'><font color='darkred'>#  define</font> <a href='../R/214.html' title='Multiple refered from 8 places.'>IS_INITIALIZER</a>        (malloc_initializer == pthread_self())
<a name='L47'><b>static</b> pthread_t                malloc_initializer = <a href='../D/517.html' title='Multiple defined in 2 places.'>NO_INITIALIZER</a>;
<a name='L48'><font color='darkred'>#else</font>
<a name='L49'><font color='darkred'>#  define</font> <a href='../R/466.html' title='Multiple refered from 3 places.'>NO_INITIALIZER</a>        <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>
<a name='L50'><font color='darkred'>#  define</font> <a href='../S/213.html#L663' title='Refered from 663 in deps/jemalloc/src/jemalloc.c.'>INITIALIZER</a>           <a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>
<a name='L51'><font color='darkred'>#  define</font> <a href='../R/214.html' title='Multiple refered from 8 places.'>IS_INITIALIZER</a>        malloc_initializer
<a name='L52'><b>static</b> <a href='../S/159.html#L10' title='Defined at 10 in deps/jemalloc/include/msvc_compat/stdbool.h.'>bool</a>                     malloc_initializer = <a href='../D/517.html' title='Multiple defined in 2 places.'>NO_INITIALIZER</a>;
<a name='L53'><font color='darkred'>#endif</font>
<a name='L54'>
<a name='L55'><i><font color='green'>/* Used to avoid initialization races. */</font></i>
<a name='L56'><font color='darkred'>#ifdef</font> _WIN32
<a name='L57'><b>static</b> <a href='../S/144.html#L4' title='Defined at 4 in deps/jemalloc/include/jemalloc/internal/mutex.h.'>malloc_mutex_t</a>   init_lock;
<a name='L58'>
<a name='L59'><a href='../R/219.html' title='Multiple refered from 11 places.'>JEMALLOC_ATTR</a>(constructor)
<a name='L60'><b>static</b> <b>void</b> WINAPI
<a name='L61'>_init_init_lock(<b>void</b>)
<a name='L62'><font color='red'>{</font>
<a name='L63'>
<a name='L64'>        <a href='../D/3272.html' title='Multiple defined in 2 places.'>malloc_mutex_init</a>(&amp;init_lock);
<a name='L65'><font color='red'>}</font>
<a name='L66'>
<a name='L67'><font color='darkred'>#ifdef</font> _MSC_VER
<a name='L68'><font color='darkred'>#  pragma</font> section(".CRT$XCU", read)
<a name='L69'>JEMALLOC_SECTION(".CRT$XCU") <a href='../D/250.html' title='Multiple defined in 8 places.'>JEMALLOC_ATTR</a>(used)
<a name='L70'><b>static</b> <b>const</b> <b>void</b> (WINAPI *init_init_lock)(<b>void</b>) = _init_init_lock;
<a name='L71'><font color='darkred'>#endif</font>
<a name='L72'>
<a name='L73'><font color='darkred'>#else</font>
<a name='L74'><b>static</b> <a href='../S/144.html#L4' title='Defined at 4 in deps/jemalloc/include/jemalloc/internal/mutex.h.'>malloc_mutex_t</a>   init_lock = <a href='../D/474.html' title='Multiple defined in 5 places.'>MALLOC_MUTEX_INITIALIZER</a>;
<a name='L75'><font color='darkred'>#endif</font>
<a name='L76'>
<a name='L77'><b>typedef</b> <b>struct</b> <font color='red'>{</font>
<a name='L78'>        <b>void</b>    *p;     <i><font color='green'>/* Input pointer (as in realloc(p, s)). */</font></i>
<a name='L79'>        size_t  s;      <i><font color='green'>/* Request size. */</font></i>
<a name='L80'>        <b>void</b>    *r;     <i><font color='green'>/* Result pointer. */</font></i>
<a name='L81'><font color='red'>}</font> <a href='../S/213.html#L86' title='Refered from 86 in deps/jemalloc/src/jemalloc.c.'>malloc_utrace_t</a>;
<a name='L82'>
<a name='L83'><font color='darkred'>#ifdef</font> JEMALLOC_UTRACE
<a name='L84'><font color='darkred'>#  define</font> <a href='../R/1018.html' title='Multiple refered from 11 places.'>UTRACE</a>(a, b, c) <b>do</b> <font color='red'>{</font>                                          \
<a name='L85'>        <b>if</b> (<a href='../S/138.html#L257' title='Defined at 257 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_utrace</a>) <font color='red'>{</font>                                               \
<a name='L86'>                <a href='../S/213.html#L81' title='Defined at 81 in deps/jemalloc/src/jemalloc.c.'>malloc_utrace_t</a> ut;                                     \
<a name='L87'>                ut.p = (a);                                             \
<a name='L88'>                ut.s = (b);                                             \
<a name='L89'>                ut.r = (c);                                             \
<a name='L90'>                utrace(&amp;ut, <b>sizeof</b>(ut));                                \
<a name='L91'>        <font color='red'>}</font>                                                               \
<a name='L92'><font color='red'>}</font> <b>while</b> (0)
<a name='L93'><font color='darkred'>#else</font>
<a name='L94'><font color='darkred'>#  define</font> <a href='../R/1018.html' title='Multiple refered from 11 places.'>UTRACE</a>(a, b, c)
<a name='L95'><font color='darkred'>#endif</font>
<a name='L96'>
<a name='L97'><i><font color='green'>/******************************************************************************/</font></i>
<a name='L98'><i><font color='green'>/* Function prototypes for non-inline static functions. */</font></i>
<a name='L99'>
<a name='L100'><b>static</b> <b>void</b>     <a href='../S/213.html#L204' title='Defined at 204 in deps/jemalloc/src/jemalloc.c.'>stats_print_atexit</a>(<b>void</b>);
<a name='L101'><b>static</b> <b>unsigned</b> <a href='../S/213.html#L248' title='Defined at 248 in deps/jemalloc/src/jemalloc.c.'>malloc_ncpus</a>(<b>void</b>);
<a name='L102'><b>static</b> <a href='../S/159.html#L10' title='Defined at 10 in deps/jemalloc/include/msvc_compat/stdbool.h.'>bool</a>     <a href='../S/213.html#L291' title='Defined at 291 in deps/jemalloc/src/jemalloc.c.'>malloc_conf_next</a>(<b>char</b> <b>const</b> **opts_p, <b>char</b> <b>const</b> **k_p,
<a name='L103'>    size_t *klen_p, <b>char</b> <b>const</b> **v_p, size_t *vlen_p);
<a name='L104'><b>static</b> <b>void</b>     <a href='../S/213.html#L367' title='Defined at 367 in deps/jemalloc/src/jemalloc.c.'>malloc_conf_error</a>(<b>const</b> <b>char</b> *msg, <b>const</b> <b>char</b> *k, size_t klen,
<a name='L105'>    <b>const</b> <b>char</b> *v, size_t vlen);
<a name='L106'><b>static</b> <b>void</b>     <a href='../S/213.html#L376' title='Defined at 376 in deps/jemalloc/src/jemalloc.c.'>malloc_conf_init</a>(<b>void</b>);
<a name='L107'><b>static</b> <a href='../S/159.html#L10' title='Defined at 10 in deps/jemalloc/include/msvc_compat/stdbool.h.'>bool</a>     <a href='../S/213.html#L637' title='Defined at 637 in deps/jemalloc/src/jemalloc.c.'>malloc_init_hard</a>(<b>void</b>);
<a name='L108'><b>static</b> <b>int</b>      imemalign(<b>void</b> **memptr, size_t alignment, size_t size,
<a name='L109'>    size_t min_alignment);
<a name='L110'>
<a name='L111'><i><font color='green'>/******************************************************************************/</font></i>
<a name='L112'><i><font color='green'>/*</font></i>
<a name='L113'><i><font color='green'> * Begin miscellaneous support functions.</font></i>
<a name='L114'><i><font color='green'> */</font></i>
<a name='L115'>
<a name='L116'><i><font color='green'>/* Create a new arena and insert it into the arenas array at index ind. */</font></i>
<a name='L117'><a href='../S/146.html#L51' title='Defined at 51 in deps/jemalloc/include/jemalloc/internal/arena.h.'>arena_t</a> *
<a name='L118'><a href='../R/1402.html' title='Multiple refered from 6 places.'>arenas_extend</a>(<b>unsigned</b> ind)
<a name='L119'><font color='red'>{</font>
<a name='L120'>        <a href='../S/146.html#L51' title='Defined at 51 in deps/jemalloc/include/jemalloc/internal/arena.h.'>arena_t</a> *ret;
<a name='L121'>
<a name='L122'>        ret = (<a href='../S/146.html#L51' title='Defined at 51 in deps/jemalloc/include/jemalloc/internal/arena.h.'>arena_t</a> *)<a href='../D/1715.html' title='Multiple defined in 2 places.'>base_alloc</a>(<b>sizeof</b>(<a href='../S/146.html#L51' title='Defined at 51 in deps/jemalloc/include/jemalloc/internal/arena.h.'>arena_t</a>));
<a name='L123'>        <b>if</b> (ret != NULL &amp;&amp; <a href='../D/1630.html' title='Multiple defined in 2 places.'>arena_new</a>(ret, ind) == <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>) <font color='red'>{</font>
<a name='L124'>                <a href='../S/138.html#L55' title='Defined at 55 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas</a>[ind] = ret;
<a name='L125'>                <b>return</b> (ret);
<a name='L126'>        <font color='red'>}</font>
<a name='L127'>        <i><font color='green'>/* Only reached if there is an OOM error. */</font></i>
<a name='L128'>
<a name='L129'>        <i><font color='green'>/*</font></i>
<a name='L130'><i><font color='green'>         * OOM here is quite inconvenient to propagate, since dealing with it</font></i>
<a name='L131'><i><font color='green'>         * would require a check for failure in the fast path.  Instead, punt</font></i>
<a name='L132'><i><font color='green'>         * by using arenas[0].  In practice, this is an extremely unlikely</font></i>
<a name='L133'><i><font color='green'>         * failure.</font></i>
<a name='L134'><i><font color='green'>         */</font></i>
<a name='L135'>        <a href='../D/3296.html' title='Multiple defined in 2 places.'>malloc_write</a>("&lt;jemalloc&gt;: Error initializing arena\n");
<a name='L136'>        <b>if</b> (<a href='../S/138.html#L238' title='Defined at 238 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_abort</a>)
<a name='L137'>                abort();
<a name='L138'>
<a name='L139'>        <b>return</b> (<a href='../S/138.html#L55' title='Defined at 55 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas</a>[0]);
<a name='L140'><font color='red'>}</font>
<a name='L141'>
<a name='L142'><i><font color='green'>/* Slow path, called only by choose_arena(). */</font></i>
<a name='L143'><a href='../S/146.html#L51' title='Defined at 51 in deps/jemalloc/include/jemalloc/internal/arena.h.'>arena_t</a> *
<a name='L144'><a href='../S/138.html#L95' title='Refered from 95 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>choose_arena_hard</a>(<b>void</b>)
<a name='L145'><font color='red'>{</font>
<a name='L146'>        <a href='../S/146.html#L51' title='Defined at 51 in deps/jemalloc/include/jemalloc/internal/arena.h.'>arena_t</a> *ret;
<a name='L147'>
<a name='L148'>        <b>if</b> (<a href='../S/138.html#L233' title='Defined at 233 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>narenas_auto</a> &gt; 1) <font color='red'>{</font>
<a name='L149'>                <b>unsigned</b> i, choose, first_null;
<a name='L150'>
<a name='L151'>                choose = 0;
<a name='L152'>                first_null = <a href='../S/138.html#L233' title='Defined at 233 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>narenas_auto</a>;
<a name='L153'>                <a href='../D/3273.html' title='Multiple defined in 2 places.'>malloc_mutex_lock</a>(&amp;<a href='../S/138.html#L60' title='Defined at 60 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas_lock</a>);
<a name='L154'>                <a href='../D/1684.html' title='Multiple defined in 3 places.'>assert</a>(<a href='../S/138.html#L55' title='Defined at 55 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas</a>[0] != NULL);
<a name='L155'>                <b>for</b> (i = 1; i &lt; <a href='../S/138.html#L233' title='Defined at 233 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>narenas_auto</a>; i++) <font color='red'>{</font>
<a name='L156'>                        <b>if</b> (<a href='../S/138.html#L55' title='Defined at 55 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas</a>[i] != NULL) <font color='red'>{</font>
<a name='L157'>                                <i><font color='green'>/*</font></i>
<a name='L158'><i><font color='green'>                                 * Choose the first arena that has the lowest</font></i>
<a name='L159'><i><font color='green'>                                 * number of threads assigned to it.</font></i>
<a name='L160'><i><font color='green'>                                 */</font></i>
<a name='L161'>                                <b>if</b> (<a href='../S/138.html#L55' title='Defined at 55 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas</a>[i]-&gt;nthreads &lt;
<a name='L162'>                                    <a href='../S/138.html#L55' title='Defined at 55 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas</a>[choose]-&gt;nthreads)
<a name='L163'>                                        choose = i;
<a name='L164'>                        <font color='red'>}</font> <b>else</b> <b>if</b> (first_null == <a href='../S/138.html#L233' title='Defined at 233 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>narenas_auto</a>) <font color='red'>{</font>
<a name='L165'>                                <i><font color='green'>/*</font></i>
<a name='L166'><i><font color='green'>                                 * Record the index of the first uninitialized</font></i>
<a name='L167'><i><font color='green'>                                 * arena, in case all extant arenas are in use.</font></i>
<a name='L168'><i><font color='green'>                                 *</font></i>
<a name='L169'><i><font color='green'>                                 * NB: It is possible for there to be</font></i>
<a name='L170'><i><font color='green'>                                 * discontinuities in terms of initialized</font></i>
<a name='L171'><i><font color='green'>                                 * versus uninitialized arenas, due to the</font></i>
<a name='L172'><i><font color='green'>                                 * "thread.arena" mallctl.</font></i>
<a name='L173'><i><font color='green'>                                 */</font></i>
<a name='L174'>                                first_null = i;
<a name='L175'>                        <font color='red'>}</font>
<a name='L176'>                <font color='red'>}</font>
<a name='L177'>
<a name='L178'>                <b>if</b> (<a href='../S/138.html#L55' title='Defined at 55 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas</a>[choose]-&gt;nthreads == 0
<a name='L179'>                    || first_null == <a href='../S/138.html#L233' title='Defined at 233 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>narenas_auto</a>) <font color='red'>{</font>
<a name='L180'>                        <i><font color='green'>/*</font></i>
<a name='L181'><i><font color='green'>                         * Use an unloaded arena, or the least loaded arena if</font></i>
<a name='L182'><i><font color='green'>                         * all arenas are already initialized.</font></i>
<a name='L183'><i><font color='green'>                         */</font></i>
<a name='L184'>                        ret = <a href='../S/138.html#L55' title='Defined at 55 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas</a>[choose];
<a name='L185'>                <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L186'>                        <i><font color='green'>/* Initialize a new arena. */</font></i>
<a name='L187'>                        ret = <a href='../D/1670.html' title='Multiple defined in 2 places.'>arenas_extend</a>(first_null);
<a name='L188'>                <font color='red'>}</font>
<a name='L189'>                ret-&gt;nthreads++;
<a name='L190'>                <a href='../D/3279.html' title='Multiple defined in 2 places.'>malloc_mutex_unlock</a>(&amp;<a href='../S/138.html#L60' title='Defined at 60 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas_lock</a>);
<a name='L191'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L192'>                ret = <a href='../S/138.html#L55' title='Defined at 55 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas</a>[0];
<a name='L193'>                <a href='../D/3273.html' title='Multiple defined in 2 places.'>malloc_mutex_lock</a>(&amp;<a href='../S/138.html#L60' title='Defined at 60 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas_lock</a>);
<a name='L194'>                ret-&gt;nthreads++;
<a name='L195'>                <a href='../D/3279.html' title='Multiple defined in 2 places.'>malloc_mutex_unlock</a>(&amp;<a href='../S/138.html#L60' title='Defined at 60 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas_lock</a>);
<a name='L196'>        <font color='red'>}</font>
<a name='L197'>
<a name='L198'>        <a href='../S/138.html#L66' title='Defined at 66 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas_tsd_set</a>(&amp;ret);
<a name='L199'>
<a name='L200'>        <b>return</b> (ret);
<a name='L201'><font color='red'>}</font>
<a name='L202'>
<a name='L203'><b>static</b> <b>void</b>
<a name='L204'><a href='../R/3844.html' title='Multiple refered from 2 places.'>stats_print_atexit</a>(<b>void</b>)
<a name='L205'><font color='red'>{</font>
<a name='L206'>
<a name='L207'>        <b>if</b> (config_tcache &amp;&amp; config_stats) <font color='red'>{</font>
<a name='L208'>                <b>unsigned</b> narenas, i;
<a name='L209'>
<a name='L210'>                <i><font color='green'>/*</font></i>
<a name='L211'><i><font color='green'>                 * Merge stats from extant threads.  This is racy, since</font></i>
<a name='L212'><i><font color='green'>                 * individual threads do not lock when recording tcache stats</font></i>
<a name='L213'><i><font color='green'>                 * events.  As a consequence, the final stats may be slightly</font></i>
<a name='L214'><i><font color='green'>                 * out of date by the time they are reported, if other threads</font></i>
<a name='L215'><i><font color='green'>                 * continue to allocate.</font></i>
<a name='L216'><i><font color='green'>                 */</font></i>
<a name='L217'>                <b>for</b> (i = 0, narenas = <a href='../S/138.html#L235' title='Defined at 235 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>narenas_total_get</a>(); i &lt; narenas; i++) <font color='red'>{</font>
<a name='L218'>                        <a href='../S/146.html#L51' title='Defined at 51 in deps/jemalloc/include/jemalloc/internal/arena.h.'>arena_t</a> *arena = <a href='../S/138.html#L55' title='Defined at 55 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas</a>[i];
<a name='L219'>                        <b>if</b> (arena != NULL) <font color='red'>{</font>
<a name='L220'>                                <a href='../S/151.html#L6' title='Defined at 6 in deps/jemalloc/include/jemalloc/internal/tcache.h.'>tcache_t</a> *tcache;
<a name='L221'>
<a name='L222'>                                <i><font color='green'>/*</font></i>
<a name='L223'><i><font color='green'>                                 * tcache_stats_merge() locks bins, so if any</font></i>
<a name='L224'><i><font color='green'>                                 * code is introduced that acquires both arena</font></i>
<a name='L225'><i><font color='green'>                                 * and bin locks in the opposite order,</font></i>
<a name='L226'><i><font color='green'>                                 * deadlocks may result.</font></i>
<a name='L227'><i><font color='green'>                                 */</font></i>
<a name='L228'>                                <a href='../D/3273.html' title='Multiple defined in 2 places.'>malloc_mutex_lock</a>(&amp;arena-&gt;lock);
<a name='L229'>                                <a href='../S/136.html#L79' title='Defined at 79 in deps/jemalloc/include/jemalloc/internal/ql.h.'>ql_foreach</a>(tcache, &amp;arena-&gt;tcache_ql, link) <font color='red'>{</font>
<a name='L230'>                                        <a href='../D/4332.html' title='Multiple defined in 2 places.'>tcache_stats_merge</a>(tcache, arena);
<a name='L231'>                                <font color='red'>}</font>
<a name='L232'>                                <a href='../D/3279.html' title='Multiple defined in 2 places.'>malloc_mutex_unlock</a>(&amp;arena-&gt;lock);
<a name='L233'>                        <font color='red'>}</font>
<a name='L234'>                <font color='red'>}</font>
<a name='L235'>        <font color='red'>}</font>
<a name='L236'>        <a href='../S/213.html#L1327' title='Defined at 1327 in deps/jemalloc/src/jemalloc.c.'>je_malloc_stats_print</a>(NULL, NULL, NULL);
<a name='L237'><font color='red'>}</font>
<a name='L238'>
<a name='L239'><i><font color='green'>/*</font></i>
<a name='L240'><i><font color='green'> * End miscellaneous support functions.</font></i>
<a name='L241'><i><font color='green'> */</font></i>
<a name='L242'><i><font color='green'>/******************************************************************************/</font></i>
<a name='L243'><i><font color='green'>/*</font></i>
<a name='L244'><i><font color='green'> * Begin initialization functions.</font></i>
<a name='L245'><i><font color='green'> */</font></i>
<a name='L246'>
<a name='L247'><b>static</b> <b>unsigned</b>
<a name='L248'><a href='../R/2935.html' title='Multiple refered from 2 places.'>malloc_ncpus</a>(<b>void</b>)
<a name='L249'><font color='red'>{</font>
<a name='L250'>        <b>unsigned</b> ret;
<a name='L251'>        <b>long</b> result;
<a name='L252'>
<a name='L253'><font color='darkred'>#ifdef</font> _WIN32
<a name='L254'>        SYSTEM_INFO si;
<a name='L255'>        GetSystemInfo(&amp;si);
<a name='L256'>        result = si.dwNumberOfProcessors;
<a name='L257'><font color='darkred'>#else</font>
<a name='L258'>        result = sysconf(_SC_NPROCESSORS_ONLN);
<a name='L259'><font color='darkred'>#endif</font>
<a name='L260'>        <b>if</b> (result == -1) <font color='red'>{</font>
<a name='L261'>                <i><font color='green'>/* Error. */</font></i>
<a name='L262'>                ret = 1;
<a name='L263'>        <font color='red'>}</font>  <b>else</b> <font color='red'>{</font>
<a name='L264'>    ret = (<b>unsigned</b>)result;
<a name='L265'>  <font color='red'>}</font>
<a name='L266'>
<a name='L267'>        <b>return</b> (ret);
<a name='L268'><font color='red'>}</font>
<a name='L269'>
<a name='L270'><b>void</b>
<a name='L271'><a href='../S/138.html#L57' title='Refered from 57 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas_cleanup</a>(<b>void</b> *arg)
<a name='L272'><font color='red'>{</font>
<a name='L273'>        <a href='../S/146.html#L51' title='Defined at 51 in deps/jemalloc/include/jemalloc/internal/arena.h.'>arena_t</a> *arena = *(<a href='../S/146.html#L51' title='Defined at 51 in deps/jemalloc/include/jemalloc/internal/arena.h.'>arena_t</a> **)arg;
<a name='L274'>
<a name='L275'>        <a href='../D/3273.html' title='Multiple defined in 2 places.'>malloc_mutex_lock</a>(&amp;<a href='../S/138.html#L60' title='Defined at 60 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas_lock</a>);
<a name='L276'>        arena-&gt;nthreads--;
<a name='L277'>        <a href='../D/3279.html' title='Multiple defined in 2 places.'>malloc_mutex_unlock</a>(&amp;<a href='../S/138.html#L60' title='Defined at 60 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas_lock</a>);
<a name='L278'><font color='red'>}</font>
<a name='L279'>
<a name='L280'><b>static</b> <b>inline</b> <a href='../S/159.html#L10' title='Defined at 10 in deps/jemalloc/include/msvc_compat/stdbool.h.'>bool</a>
<a name='L281'><a href='../R/2923.html' title='Multiple refered from 11 places.'>malloc_init</a>(<b>void</b>)
<a name='L282'><font color='red'>{</font>
<a name='L283'>
<a name='L284'>        <b>if</b> (malloc_initialized == <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>)
<a name='L285'>                <b>return</b> (<a href='../S/213.html#L637' title='Defined at 637 in deps/jemalloc/src/jemalloc.c.'>malloc_init_hard</a>());
<a name='L286'>
<a name='L287'>        <b>return</b> (<a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>);
<a name='L288'><font color='red'>}</font>
<a name='L289'>
<a name='L290'><b>static</b> <a href='../S/159.html#L10' title='Defined at 10 in deps/jemalloc/include/msvc_compat/stdbool.h.'>bool</a>
<a name='L291'><a href='../R/2920.html' title='Multiple refered from 2 places.'>malloc_conf_next</a>(<b>char</b> <b>const</b> **opts_p, <b>char</b> <b>const</b> **k_p, size_t *klen_p,
<a name='L292'>    <b>char</b> <b>const</b> **v_p, size_t *vlen_p)
<a name='L293'><font color='red'>{</font>
<a name='L294'>        <a href='../S/159.html#L10' title='Defined at 10 in deps/jemalloc/include/msvc_compat/stdbool.h.'>bool</a> accept;
<a name='L295'>        <b>const</b> <b>char</b> *opts = *opts_p;
<a name='L296'>
<a name='L297'>        *k_p = opts;
<a name='L298'>
<a name='L299'>        <b>for</b> (accept = <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>; accept == <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>;) <font color='red'>{</font>
<a name='L300'>                <b>switch</b> (*opts) <font color='red'>{</font>
<a name='L301'>                <b>case</b> 'A': <b>case</b> 'B': <b>case</b> 'C': <b>case</b> 'D': <b>case</b> 'E': <b>case</b> 'F':
<a name='L302'>                <b>case</b> 'G': <b>case</b> 'H': <b>case</b> 'I': <b>case</b> 'J': <b>case</b> 'K': <b>case</b> 'L':
<a name='L303'>                <b>case</b> 'M': <b>case</b> 'N': <b>case</b> 'O': <b>case</b> 'P': <b>case</b> 'Q': <b>case</b> 'R':
<a name='L304'>                <b>case</b> 'S': <b>case</b> 'T': <b>case</b> 'U': <b>case</b> 'V': <b>case</b> 'W': <b>case</b> 'X':
<a name='L305'>                <b>case</b> 'Y': <b>case</b> 'Z':
<a name='L306'>                <b>case</b> 'a': <b>case</b> 'b': <b>case</b> 'c': <b>case</b> 'd': <b>case</b> 'e': <b>case</b> 'f':
<a name='L307'>                <b>case</b> 'g': <b>case</b> 'h': <b>case</b> 'i': <b>case</b> 'j': <b>case</b> 'k': <b>case</b> 'l':
<a name='L308'>                <b>case</b> 'm': <b>case</b> 'n': <b>case</b> 'o': <b>case</b> 'p': <b>case</b> 'q': <b>case</b> 'r':
<a name='L309'>                <b>case</b> 's': <b>case</b> 't': <b>case</b> 'u': <b>case</b> 'v': <b>case</b> 'w': <b>case</b> 'x':
<a name='L310'>                <b>case</b> 'y': <b>case</b> 'z':
<a name='L311'>                <b>case</b> '0': <b>case</b> '1': <b>case</b> '2': <b>case</b> '3': <b>case</b> '4': <b>case</b> '5':
<a name='L312'>                <b>case</b> '6': <b>case</b> '7': <b>case</b> '8': <b>case</b> '9':
<a name='L313'>                <b>case</b> '_':
<a name='L314'>                        opts++;
<a name='L315'>                        <b>break</b>;
<a name='L316'>                <b>case</b> ':':
<a name='L317'>                        opts++;
<a name='L318'>                        *klen_p = (<a href='../D/4441.html' title='Multiple defined in 2 places.'>uintptr_t</a>)opts - 1 - (<a href='../D/4441.html' title='Multiple defined in 2 places.'>uintptr_t</a>)*k_p;
<a name='L319'>                        *v_p = opts;
<a name='L320'>                        accept = <a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>;
<a name='L321'>                        <b>break</b>;
<a name='L322'>                <b>case</b> '\0':
<a name='L323'>                        <b>if</b> (opts != *opts_p) <font color='red'>{</font>
<a name='L324'>                                <a href='../D/3296.html' title='Multiple defined in 2 places.'>malloc_write</a>("&lt;jemalloc&gt;: Conf string ends "
<a name='L325'>                                    "with key\n");
<a name='L326'>                        <font color='red'>}</font>
<a name='L327'>                        <b>return</b> (<a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>);
<a name='L328'>                <b>default</b>:
<a name='L329'>                        <a href='../D/3296.html' title='Multiple defined in 2 places.'>malloc_write</a>("&lt;jemalloc&gt;: Malformed conf string\n");
<a name='L330'>                        <b>return</b> (<a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>);
<a name='L331'>                <font color='red'>}</font>
<a name='L332'>        <font color='red'>}</font>
<a name='L333'>
<a name='L334'>        <b>for</b> (accept = <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>; accept == <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>;) <font color='red'>{</font>
<a name='L335'>                <b>switch</b> (*opts) <font color='red'>{</font>
<a name='L336'>                <b>case</b> ',':
<a name='L337'>                        opts++;
<a name='L338'>                        <i><font color='green'>/*</font></i>
<a name='L339'><i><font color='green'>                         * Look ahead one character here, because the next time</font></i>
<a name='L340'><i><font color='green'>                         * this function is called, it will assume that end of</font></i>
<a name='L341'><i><font color='green'>                         * input has been cleanly reached if no input remains,</font></i>
<a name='L342'><i><font color='green'>                         * but we have optimistically already consumed the</font></i>
<a name='L343'><i><font color='green'>                         * comma if one exists.</font></i>
<a name='L344'><i><font color='green'>                         */</font></i>
<a name='L345'>                        <b>if</b> (*opts == '\0') <font color='red'>{</font>
<a name='L346'>                                <a href='../D/3296.html' title='Multiple defined in 2 places.'>malloc_write</a>("&lt;jemalloc&gt;: Conf string ends "
<a name='L347'>                                    "with comma\n");
<a name='L348'>                        <font color='red'>}</font>
<a name='L349'>                        *vlen_p = (<a href='../D/4441.html' title='Multiple defined in 2 places.'>uintptr_t</a>)opts - 1 - (<a href='../D/4441.html' title='Multiple defined in 2 places.'>uintptr_t</a>)*v_p;
<a name='L350'>                        accept = <a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>;
<a name='L351'>                        <b>break</b>;
<a name='L352'>                <b>case</b> '\0':
<a name='L353'>                        *vlen_p = (<a href='../D/4441.html' title='Multiple defined in 2 places.'>uintptr_t</a>)opts - (<a href='../D/4441.html' title='Multiple defined in 2 places.'>uintptr_t</a>)*v_p;
<a name='L354'>                        accept = <a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>;
<a name='L355'>                        <b>break</b>;
<a name='L356'>                <b>default</b>:
<a name='L357'>                        opts++;
<a name='L358'>                        <b>break</b>;
<a name='L359'>                <font color='red'>}</font>
<a name='L360'>        <font color='red'>}</font>
<a name='L361'>
<a name='L362'>        *opts_p = opts;
<a name='L363'>        <b>return</b> (<a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>);
<a name='L364'><font color='red'>}</font>
<a name='L365'>
<a name='L366'><b>static</b> <b>void</b>
<a name='L367'><a href='../R/2918.html' title='Multiple refered from 9 places.'>malloc_conf_error</a>(<b>const</b> <b>char</b> *msg, <b>const</b> <b>char</b> *k, size_t klen, <b>const</b> <b>char</b> *v,
<a name='L368'>    size_t vlen)
<a name='L369'><font color='red'>{</font>
<a name='L370'>
<a name='L371'>        <a href='../S/138.html#L219' title='Defined at 219 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>malloc_printf</a>("&lt;jemalloc&gt;: %s: %.*s:%.*s\n", msg, (<b>int</b>)klen, k,
<a name='L372'>            (<b>int</b>)vlen, v);
<a name='L373'><font color='red'>}</font>
<a name='L374'>
<a name='L375'><b>static</b> <b>void</b>
<a name='L376'><a href='../R/2919.html' title='Multiple refered from 2 places.'>malloc_conf_init</a>(<b>void</b>)
<a name='L377'><font color='red'>{</font>
<a name='L378'>        <b>unsigned</b> i;
<a name='L379'>        <b>char</b> buf[PATH_MAX + 1];
<a name='L380'>        <b>const</b> <b>char</b> *opts, *k, *v;
<a name='L381'>        size_t klen, vlen;
<a name='L382'>
<a name='L383'>        <i><font color='green'>/*</font></i>
<a name='L384'><i><font color='green'>         * Automatically configure valgrind before processing options.  The</font></i>
<a name='L385'><i><font color='green'>         * valgrind option remains in jemalloc 3.x for compatibility reasons.</font></i>
<a name='L386'><i><font color='green'>         */</font></i>
<a name='L387'>        <b>if</b> (config_valgrind) <font color='red'>{</font>
<a name='L388'>                <a href='../S/138.html#L258' title='Defined at 258 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_valgrind</a> = (RUNNING_ON_VALGRIND != 0) ? <a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a> : <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>;
<a name='L389'>                <b>if</b> (config_fill &amp;&amp; <a href='../S/138.html#L258' title='Defined at 258 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_valgrind</a>) <font color='red'>{</font>
<a name='L390'>                        <a href='../S/138.html#L239' title='Defined at 239 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_junk</a> = <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>;
<a name='L391'>                        <a href='../D/1684.html' title='Multiple defined in 3 places.'>assert</a>(<a href='../S/138.html#L260' title='Defined at 260 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_zero</a> == <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>);
<a name='L392'>                        <a href='../S/138.html#L253' title='Defined at 253 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_quarantine</a> = <a href='../S/131.html#L5' title='Defined at 5 in deps/jemalloc/include/jemalloc/internal/quarantine.h.'>JEMALLOC_VALGRIND_QUARANTINE_DEFAULT</a>;
<a name='L393'>                        <a href='../S/138.html#L254' title='Defined at 254 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_redzone</a> = <a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>;
<a name='L394'>                <font color='red'>}</font>
<a name='L395'>                <b>if</b> (config_tcache &amp;&amp; <a href='../S/138.html#L258' title='Defined at 258 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_valgrind</a>)
<a name='L396'>                        <a href='../S/138.html#L256' title='Defined at 256 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_tcache</a> = <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>;
<a name='L397'>        <font color='red'>}</font>
<a name='L398'>
<a name='L399'>        <b>for</b> (i = 0; i &lt; 3; i++) <font color='red'>{</font>
<a name='L400'>                <i><font color='green'>/* Get runtime configuration. */</font></i>
<a name='L401'>                <b>switch</b> (i) <font color='red'>{</font>
<a name='L402'>                <b>case</b> 0:
<a name='L403'>                        <b>if</b> (je_malloc_conf != NULL) <font color='red'>{</font>
<a name='L404'>                                <i><font color='green'>/*</font></i>
<a name='L405'><i><font color='green'>                                 * Use options that were compiled into the</font></i>
<a name='L406'><i><font color='green'>                                 * program.</font></i>
<a name='L407'><i><font color='green'>                                 */</font></i>
<a name='L408'>                                opts = je_malloc_conf;
<a name='L409'>                        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L410'>                                <i><font color='green'>/* No configuration specified. */</font></i>
<a name='L411'>                                buf[0] = '\0';
<a name='L412'>                                opts = buf;
<a name='L413'>                        <font color='red'>}</font>
<a name='L414'>                        <b>break</b>;
<a name='L415'>                <b>case</b> 1: <font color='red'>{</font>
<a name='L416'><font color='darkred'>#ifndef</font> _WIN32
<a name='L417'>                        <b>int</b> linklen;
<a name='L418'>                        <b>const</b> <b>char</b> *linkname =
<a name='L419'><font color='darkred'>#  ifdef</font> JEMALLOC_PREFIX
<a name='L420'>                            "/etc/"JEMALLOC_PREFIX"malloc.conf"
<a name='L421'><font color='darkred'>#  else</font>
<a name='L422'>                            "/etc/malloc.conf"
<a name='L423'><font color='darkred'>#  endif</font>
<a name='L424'>                            ;
<a name='L425'>
<a name='L426'>                        <b>if</b> ((linklen = readlink(linkname, buf,
<a name='L427'>                            <b>sizeof</b>(buf) - 1)) != -1) <font color='red'>{</font>
<a name='L428'>                                <i><font color='green'>/*</font></i>
<a name='L429'><i><font color='green'>                                 * Use the contents of the "/etc/malloc.conf"</font></i>
<a name='L430'><i><font color='green'>                                 * symbolic link's name.</font></i>
<a name='L431'><i><font color='green'>                                 */</font></i>
<a name='L432'>                                buf[linklen] = '\0';
<a name='L433'>                                opts = buf;
<a name='L434'>                        <font color='red'>}</font> <b>else</b>
<a name='L435'><font color='darkred'>#endif</font>
<a name='L436'>                        <font color='red'>{</font>
<a name='L437'>                                <i><font color='green'>/* No configuration specified. */</font></i>
<a name='L438'>                                buf[0] = '\0';
<a name='L439'>                                opts = buf;
<a name='L440'>                        <font color='red'>}</font>
<a name='L441'>                        <b>break</b>;
<a name='L442'>                <font color='red'>}</font> <b>case</b> 2: <font color='red'>{</font>
<a name='L443'>                        <b>const</b> <b>char</b> *envname =
<a name='L444'><font color='darkred'>#ifdef</font> JEMALLOC_PREFIX
<a name='L445'>                            JEMALLOC_CPREFIX"MALLOC_CONF"
<a name='L446'><font color='darkred'>#else</font>
<a name='L447'>                            "MALLOC_CONF"
<a name='L448'><font color='darkred'>#endif</font>
<a name='L449'>                            ;
<a name='L450'>
<a name='L451'>                        <b>if</b> ((opts = getenv(envname)) != NULL) <font color='red'>{</font>
<a name='L452'>                                <i><font color='green'>/*</font></i>
<a name='L453'><i><font color='green'>                                 * Do nothing; opts is already initialized to</font></i>
<a name='L454'><i><font color='green'>                                 * the value of the MALLOC_CONF environment</font></i>
<a name='L455'><i><font color='green'>                                 * variable.</font></i>
<a name='L456'><i><font color='green'>                                 */</font></i>
<a name='L457'>                        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L458'>                                <i><font color='green'>/* No configuration specified. */</font></i>
<a name='L459'>                                buf[0] = '\0';
<a name='L460'>                                opts = buf;
<a name='L461'>                        <font color='red'>}</font>
<a name='L462'>                        <b>break</b>;
<a name='L463'>                <font color='red'>}</font> <b>default</b>:
<a name='L464'>                        <i><font color='green'>/* NOTREACHED */</font></i>
<a name='L465'>                        <a href='../D/1684.html' title='Multiple defined in 3 places.'>assert</a>(<a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>);
<a name='L466'>                        buf[0] = '\0';
<a name='L467'>                        opts = buf;
<a name='L468'>                <font color='red'>}</font>
<a name='L469'>
<a name='L470'>                <b>while</b> (*opts != '\0' &amp;&amp; <a href='../S/213.html#L291' title='Defined at 291 in deps/jemalloc/src/jemalloc.c.'>malloc_conf_next</a>(&amp;opts, &amp;k, &amp;klen, &amp;v,
<a name='L471'>                    &amp;vlen) == <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>) <font color='red'>{</font>
<a name='L472'><font color='darkred'>#define</font> <a href='../S/213.html#L491' title='Refered from 491 in deps/jemalloc/src/jemalloc.c.'>CONF_HANDLE_BOOL_HIT</a>(o, n, hit)                                 \
<a name='L473'>                        <b>if</b> (<b>sizeof</b>(n)-1 == klen &amp;&amp; strncmp(n, k,        \
<a name='L474'>                            klen) == 0) <font color='red'>{</font>                               \
<a name='L475'>                                <b>if</b> (strncmp("true", v, vlen) == 0 &amp;&amp;    \
<a name='L476'>                                    vlen == <b>sizeof</b>("true")-1)           \
<a name='L477'>                                        o = <a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>;                       \
<a name='L478'>                                <b>else</b> <b>if</b> (strncmp("false", v, vlen) ==   \
<a name='L479'>                                    0 &amp;&amp; vlen == <b>sizeof</b>("false")-1)     \
<a name='L480'>                                        o = <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>;                      \
<a name='L481'>                                <b>else</b> <font color='red'>{</font>                                  \
<a name='L482'>                                        <a href='../S/213.html#L367' title='Defined at 367 in deps/jemalloc/src/jemalloc.c.'>malloc_conf_error</a>(              \
<a name='L483'>                                            "Invalid conf value",       \
<a name='L484'>                                            k, klen, v, vlen);          \
<a name='L485'>                                <font color='red'>}</font>                                       \
<a name='L486'>                                hit = <a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>;                             \
<a name='L487'>                        <font color='red'>}</font> <b>else</b>                                          \
<a name='L488'>                                hit = <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>;
<a name='L489'><font color='darkred'>#define</font> <a href='../R/79.html' title='Multiple refered from 15 places.'>CONF_HANDLE_BOOL</a>(o, n) <font color='red'>{</font>                                        \
<a name='L490'>                        <a href='../S/159.html#L10' title='Defined at 10 in deps/jemalloc/include/msvc_compat/stdbool.h.'>bool</a> hit;                                       \
<a name='L491'>                        <a href='../S/213.html#L472' title='Defined at 472 in deps/jemalloc/src/jemalloc.c.'>CONF_HANDLE_BOOL_HIT</a>(o, n, hit);                \
<a name='L492'>                        <b>if</b> (hit)                                        \
<a name='L493'>                                <b>continue</b>;                               \
<a name='L494'><font color='red'>}</font>
<a name='L495'><font color='darkred'>#define</font> <a href='../R/82.html' title='Multiple refered from 3 places.'>CONF_HANDLE_SIZE_T</a>(o, n, min, max)                              \
<a name='L496'>                        <b>if</b> (<b>sizeof</b>(n)-1 == klen &amp;&amp; strncmp(n, k,        \
<a name='L497'>                            klen) == 0) <font color='red'>{</font>                               \
<a name='L498'>                                <a href='../S/160.html#L124' title='Defined at 124 in deps/jemalloc/include/msvc_compat/stdint.h.'>uintmax_t</a> um;                           \
<a name='L499'>                                <b>char</b> *end;                              \
<a name='L500'>                                                                        \
<a name='L501'>                                <a href='../D/4119.html' title='Multiple defined in 2 places.'>set_errno</a>(0);                           \
<a name='L502'>                                um = <a href='../D/3283.html' title='Multiple defined in 2 places.'>malloc_strtoumax</a>(v, &amp;end, 0);      \
<a name='L503'>                                <b>if</b> (<a href='../D/2349.html' title='Multiple defined in 2 places.'>get_errno</a>() != 0 || (<a href='../D/4441.html' title='Multiple defined in 2 places.'>uintptr_t</a>)end -\
<a name='L504'>                                    (<a href='../D/4441.html' title='Multiple defined in 2 places.'>uintptr_t</a>)v != vlen) <font color='red'>{</font>             \
<a name='L505'>                                        <a href='../S/213.html#L367' title='Defined at 367 in deps/jemalloc/src/jemalloc.c.'>malloc_conf_error</a>(              \
<a name='L506'>                                            "Invalid conf value",       \
<a name='L507'>                                            k, klen, v, vlen);          \
<a name='L508'>                                <font color='red'>}</font> <b>else</b> <b>if</b> (um &lt; <a href='../S/20.html#L50' title='Defined at 50 in src/pqsort.c.'>min</a> || um &gt; max) <font color='red'>{</font>      \
<a name='L509'>                                        <a href='../S/213.html#L367' title='Defined at 367 in deps/jemalloc/src/jemalloc.c.'>malloc_conf_error</a>(              \
<a name='L510'>                                            "Out-of-range conf value",  \
<a name='L511'>                                            k, klen, v, vlen);          \
<a name='L512'>                                <font color='red'>}</font> <b>else</b>                                  \
<a name='L513'>                                        o = um;                         \
<a name='L514'>                                <b>continue</b>;                               \
<a name='L515'>                        <font color='red'>}</font>
<a name='L516'><font color='darkred'>#define</font> <a href='../R/83.html' title='Multiple refered from 4 places.'>CONF_HANDLE_SSIZE_T</a>(o, n, min, max)                             \
<a name='L517'>                        <b>if</b> (<b>sizeof</b>(n)-1 == klen &amp;&amp; strncmp(n, k,        \
<a name='L518'>                            klen) == 0) <font color='red'>{</font>                               \
<a name='L519'>                                <b>long</b> l;                                 \
<a name='L520'>                                <b>char</b> *end;                              \
<a name='L521'>                                                                        \
<a name='L522'>                                <a href='../D/4119.html' title='Multiple defined in 2 places.'>set_errno</a>(0);                           \
<a name='L523'>                                l = strtol(v, &amp;end, 0);                 \
<a name='L524'>                                <b>if</b> (<a href='../D/2349.html' title='Multiple defined in 2 places.'>get_errno</a>() != 0 || (<a href='../D/4441.html' title='Multiple defined in 2 places.'>uintptr_t</a>)end -\
<a name='L525'>                                    (<a href='../D/4441.html' title='Multiple defined in 2 places.'>uintptr_t</a>)v != vlen) <font color='red'>{</font>             \
<a name='L526'>                                        <a href='../S/213.html#L367' title='Defined at 367 in deps/jemalloc/src/jemalloc.c.'>malloc_conf_error</a>(              \
<a name='L527'>                                            "Invalid conf value",       \
<a name='L528'>                                            k, klen, v, vlen);          \
<a name='L529'>                                <font color='red'>}</font> <b>else</b> <b>if</b> (l &lt; (ssize_t)<a href='../S/20.html#L50' title='Defined at 50 in src/pqsort.c.'>min</a> || l &gt;      \
<a name='L530'>                                    (ssize_t)max) <font color='red'>{</font>                     \
<a name='L531'>                                        <a href='../S/213.html#L367' title='Defined at 367 in deps/jemalloc/src/jemalloc.c.'>malloc_conf_error</a>(              \
<a name='L532'>                                            "Out-of-range conf value",  \
<a name='L533'>                                            k, klen, v, vlen);          \
<a name='L534'>                                <font color='red'>}</font> <b>else</b>                                  \
<a name='L535'>                                        o = l;                          \
<a name='L536'>                                <b>continue</b>;                               \
<a name='L537'>                        <font color='red'>}</font>
<a name='L538'><font color='darkred'>#define</font> <a href='../S/213.html#L612' title='Refered from 612 in deps/jemalloc/src/jemalloc.c.'>CONF_HANDLE_CHAR_P</a>(o, n, d)                                     \
<a name='L539'>                        <b>if</b> (<b>sizeof</b>(n)-1 == klen &amp;&amp; strncmp(n, k,        \
<a name='L540'>                            klen) == 0) <font color='red'>{</font>                               \
<a name='L541'>                                size_t cpylen = (vlen &lt;=                \
<a name='L542'>                                    <b>sizeof</b>(o)-1) ? vlen :               \
<a name='L543'>                                    <b>sizeof</b>(o)-1;                        \
<a name='L544'>                                strncpy(o, v, cpylen);                  \
<a name='L545'>                                o[cpylen] = '\0';                       \
<a name='L546'>                                <b>continue</b>;                               \
<a name='L547'>                        <font color='red'>}</font>
<a name='L548'>
<a name='L549'>                        <a href='../D/81.html' title='Multiple defined in 2 places.'>CONF_HANDLE_BOOL</a>(<a href='../S/138.html#L238' title='Defined at 238 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_abort</a>, "abort")
<a name='L550'>                        <i><font color='green'>/*</font></i>
<a name='L551'><i><font color='green'>                         * Chunks always require at least one header page, plus</font></i>
<a name='L552'><i><font color='green'>                         * one data page in the absence of redzones, or three</font></i>
<a name='L553'><i><font color='green'>                         * pages in the presence of redzones.  In order to</font></i>
<a name='L554'><i><font color='green'>                         * simplify options processing, fix the limit based on</font></i>
<a name='L555'><i><font color='green'>                         * config_fill.</font></i>
<a name='L556'><i><font color='green'>                         */</font></i>
<a name='L557'>                        <a href='../D/84.html' title='Multiple defined in 2 places.'>CONF_HANDLE_SIZE_T</a>(<a href='../S/138.html#L240' title='Defined at 240 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_lg_chunk</a>, "lg_chunk", LG_PAGE +
<a name='L558'>                            (config_fill ? 2 : 1), (<b>sizeof</b>(size_t) &lt;&lt; 3) - 1)
<a name='L559'>                        <b>if</b> (strncmp("dss", k, klen) == 0) <font color='red'>{</font>
<a name='L560'>                                <b>int</b> i;
<a name='L561'>                                <a href='../S/159.html#L10' title='Defined at 10 in deps/jemalloc/include/msvc_compat/stdbool.h.'>bool</a> <a href='../S/270.html#L365' title='Defined at 365 in deps/lua/src/lstrlib.c.'>match</a> = <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>;
<a name='L562'>                                <b>for</b> (i = 0; i &lt; <a href='../S/130.html#L9' title='Defined at 9 in deps/jemalloc/include/jemalloc/internal/chunk_dss.h.'>dss_prec_limit</a>; i++) <font color='red'>{</font>
<a name='L563'>                                        <b>if</b> (strncmp(<a href='../S/138.html#L142' title='Defined at 142 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>dss_prec_names</a>[i], v, vlen)
<a name='L564'>                                            == 0) <font color='red'>{</font>
<a name='L565'>                                                <b>if</b> (<a href='../D/1850.html' title='Multiple defined in 2 places.'>chunk_dss_prec_set</a>(i)) <font color='red'>{</font>
<a name='L566'>                                                        <a href='../S/213.html#L367' title='Defined at 367 in deps/jemalloc/src/jemalloc.c.'>malloc_conf_error</a>(
<a name='L567'>                                                            "Error setting dss",
<a name='L568'>                                                            k, klen, v, vlen);
<a name='L569'>                                                <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L570'>                                                        opt_dss =
<a name='L571'>                                                            <a href='../S/138.html#L142' title='Defined at 142 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>dss_prec_names</a>[i];
<a name='L572'>                                                        <a href='../S/270.html#L365' title='Defined at 365 in deps/lua/src/lstrlib.c.'>match</a> = <a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>;
<a name='L573'>                                                        <b>break</b>;
<a name='L574'>                                                <font color='red'>}</font>
<a name='L575'>                                        <font color='red'>}</font>
<a name='L576'>                                <font color='red'>}</font>
<a name='L577'>                                <b>if</b> (<a href='../S/270.html#L365' title='Defined at 365 in deps/lua/src/lstrlib.c.'>match</a> == <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>) <font color='red'>{</font>
<a name='L578'>                                        <a href='../S/213.html#L367' title='Defined at 367 in deps/jemalloc/src/jemalloc.c.'>malloc_conf_error</a>("Invalid conf value",
<a name='L579'>                                            k, klen, v, vlen);
<a name='L580'>                                <font color='red'>}</font>
<a name='L581'>                                <b>continue</b>;
<a name='L582'>                        <font color='red'>}</font>
<a name='L583'>                        <a href='../D/84.html' title='Multiple defined in 2 places.'>CONF_HANDLE_SIZE_T</a>(<a href='../S/138.html#L245' title='Defined at 245 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_narenas</a>, "narenas", 1,
<a name='L584'>                            SIZE_T_MAX)
<a name='L585'>                        <a href='../D/85.html' title='Multiple defined in 2 places.'>CONF_HANDLE_SSIZE_T</a>(<a href='../S/138.html#L241' title='Defined at 241 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_lg_dirty_mult</a>, "lg_dirty_mult",
<a name='L586'>                            -1, (<b>sizeof</b>(size_t) &lt;&lt; 3) - 1)
<a name='L587'>                        <a href='../D/81.html' title='Multiple defined in 2 places.'>CONF_HANDLE_BOOL</a>(<a href='../S/138.html#L255' title='Defined at 255 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_stats_print</a>, "stats_print")
<a name='L588'>                        <b>if</b> (config_fill) <font color='red'>{</font>
<a name='L589'>                                <a href='../D/81.html' title='Multiple defined in 2 places.'>CONF_HANDLE_BOOL</a>(<a href='../S/138.html#L239' title='Defined at 239 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_junk</a>, "junk")
<a name='L590'>                                <a href='../D/84.html' title='Multiple defined in 2 places.'>CONF_HANDLE_SIZE_T</a>(<a href='../S/138.html#L253' title='Defined at 253 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_quarantine</a>, "quarantine",
<a name='L591'>                                    0, SIZE_T_MAX)
<a name='L592'>                                <a href='../D/81.html' title='Multiple defined in 2 places.'>CONF_HANDLE_BOOL</a>(<a href='../S/138.html#L254' title='Defined at 254 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_redzone</a>, "redzone")
<a name='L593'>                                <a href='../D/81.html' title='Multiple defined in 2 places.'>CONF_HANDLE_BOOL</a>(<a href='../S/138.html#L260' title='Defined at 260 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_zero</a>, "zero")
<a name='L594'>                        <font color='red'>}</font>
<a name='L595'>                        <b>if</b> (config_utrace) <font color='red'>{</font>
<a name='L596'>                                <a href='../D/81.html' title='Multiple defined in 2 places.'>CONF_HANDLE_BOOL</a>(<a href='../S/138.html#L257' title='Defined at 257 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_utrace</a>, "utrace")
<a name='L597'>                        <font color='red'>}</font>
<a name='L598'>                        <b>if</b> (config_valgrind) <font color='red'>{</font>
<a name='L599'>                                <a href='../D/81.html' title='Multiple defined in 2 places.'>CONF_HANDLE_BOOL</a>(<a href='../S/138.html#L258' title='Defined at 258 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_valgrind</a>, "valgrind")
<a name='L600'>                        <font color='red'>}</font>
<a name='L601'>                        <b>if</b> (config_xmalloc) <font color='red'>{</font>
<a name='L602'>                                <a href='../D/81.html' title='Multiple defined in 2 places.'>CONF_HANDLE_BOOL</a>(<a href='../S/138.html#L259' title='Defined at 259 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_xmalloc</a>, "xmalloc")
<a name='L603'>                        <font color='red'>}</font>
<a name='L604'>                        <b>if</b> (config_tcache) <font color='red'>{</font>
<a name='L605'>                                <a href='../D/81.html' title='Multiple defined in 2 places.'>CONF_HANDLE_BOOL</a>(<a href='../S/138.html#L256' title='Defined at 256 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_tcache</a>, "tcache")
<a name='L606'>                                <a href='../D/85.html' title='Multiple defined in 2 places.'>CONF_HANDLE_SSIZE_T</a>(<a href='../S/138.html#L244' title='Defined at 244 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_lg_tcache_max</a>,
<a name='L607'>                                    "lg_tcache_max", -1,
<a name='L608'>                                    (<b>sizeof</b>(size_t) &lt;&lt; 3) - 1)
<a name='L609'>                        <font color='red'>}</font>
<a name='L610'>                        <b>if</b> (config_prof) <font color='red'>{</font>
<a name='L611'>                                <a href='../D/81.html' title='Multiple defined in 2 places.'>CONF_HANDLE_BOOL</a>(<a href='../S/138.html#L246' title='Defined at 246 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_prof</a>, "prof")
<a name='L612'>                                <a href='../D/83.html' title='Multiple defined in 2 places.'>CONF_HANDLE_CHAR_P</a>(<a href='../S/138.html#L252' title='Defined at 252 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_prof_prefix</a>,
<a name='L613'>                                    "prof_prefix", "jeprof")
<a name='L614'>                                <a href='../D/81.html' title='Multiple defined in 2 places.'>CONF_HANDLE_BOOL</a>(<a href='../S/138.html#L248' title='Defined at 248 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_prof_active</a>, "prof_active")
<a name='L615'>                                <a href='../D/85.html' title='Multiple defined in 2 places.'>CONF_HANDLE_SSIZE_T</a>(<a href='../S/138.html#L243' title='Defined at 243 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_lg_prof_sample</a>,
<a name='L616'>                                    "lg_prof_sample", 0,
<a name='L617'>                                    (<b>sizeof</b>(<a href='../S/160.html#L90' title='Defined at 90 in deps/jemalloc/include/msvc_compat/stdint.h.'>uint64_t</a>) &lt;&lt; 3) - 1)
<a name='L618'>                                <a href='../D/81.html' title='Multiple defined in 2 places.'>CONF_HANDLE_BOOL</a>(<a href='../S/138.html#L247' title='Defined at 247 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_prof_accum</a>, "prof_accum")
<a name='L619'>                                <a href='../D/85.html' title='Multiple defined in 2 places.'>CONF_HANDLE_SSIZE_T</a>(<a href='../S/138.html#L242' title='Defined at 242 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_lg_prof_interval</a>,
<a name='L620'>                                    "lg_prof_interval", -1,
<a name='L621'>                                    (<b>sizeof</b>(<a href='../S/160.html#L90' title='Defined at 90 in deps/jemalloc/include/msvc_compat/stdint.h.'>uint64_t</a>) &lt;&lt; 3) - 1)
<a name='L622'>                                <a href='../D/81.html' title='Multiple defined in 2 places.'>CONF_HANDLE_BOOL</a>(<a href='../S/138.html#L250' title='Defined at 250 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_prof_gdump</a>, "prof_gdump")
<a name='L623'>                                <a href='../D/81.html' title='Multiple defined in 2 places.'>CONF_HANDLE_BOOL</a>(<a href='../S/138.html#L249' title='Defined at 249 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_prof_final</a>, "prof_final")
<a name='L624'>                                <a href='../D/81.html' title='Multiple defined in 2 places.'>CONF_HANDLE_BOOL</a>(<a href='../S/138.html#L251' title='Defined at 251 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_prof_leak</a>, "prof_leak")
<a name='L625'>                        <font color='red'>}</font>
<a name='L626'>                        <a href='../S/213.html#L367' title='Defined at 367 in deps/jemalloc/src/jemalloc.c.'>malloc_conf_error</a>("Invalid conf pair", k, klen, v,
<a name='L627'>                            vlen);
<a name='L628'><font color='darkred'>#undef</font> <a href='../R/79.html' title='Multiple refered from 15 places.'>CONF_HANDLE_BOOL</a>
<a name='L629'><font color='darkred'>#undef</font> <a href='../R/82.html' title='Multiple refered from 3 places.'>CONF_HANDLE_SIZE_T</a>
<a name='L630'><font color='darkred'>#undef</font> <a href='../R/83.html' title='Multiple refered from 4 places.'>CONF_HANDLE_SSIZE_T</a>
<a name='L631'><font color='darkred'>#undef</font> <a href='../S/213.html#L612' title='Refered from 612 in deps/jemalloc/src/jemalloc.c.'>CONF_HANDLE_CHAR_P</a>
<a name='L632'>                <font color='red'>}</font>
<a name='L633'>        <font color='red'>}</font>
<a name='L634'><font color='red'>}</font>
<a name='L635'>
<a name='L636'><b>static</b> <a href='../S/159.html#L10' title='Defined at 10 in deps/jemalloc/include/msvc_compat/stdbool.h.'>bool</a>
<a name='L637'><a href='../R/2924.html' title='Multiple refered from 2 places.'>malloc_init_hard</a>(<b>void</b>)
<a name='L638'><font color='red'>{</font>
<a name='L639'>        <a href='../S/146.html#L51' title='Defined at 51 in deps/jemalloc/include/jemalloc/internal/arena.h.'>arena_t</a> *init_arenas[1];
<a name='L640'>
<a name='L641'>        <a href='../D/3273.html' title='Multiple defined in 2 places.'>malloc_mutex_lock</a>(&amp;init_lock);
<a name='L642'>        <b>if</b> (malloc_initialized || <a href='../D/245.html' title='Multiple defined in 2 places.'>IS_INITIALIZER</a>) <font color='red'>{</font>
<a name='L643'>                <i><font color='green'>/*</font></i>
<a name='L644'><i><font color='green'>                 * Another thread initialized the allocator before this one</font></i>
<a name='L645'><i><font color='green'>                 * acquired init_lock, or this thread is the initializing</font></i>
<a name='L646'><i><font color='green'>                 * thread, and it is recursively allocating.</font></i>
<a name='L647'><i><font color='green'>                 */</font></i>
<a name='L648'>                <a href='../D/3279.html' title='Multiple defined in 2 places.'>malloc_mutex_unlock</a>(&amp;init_lock);
<a name='L649'>                <b>return</b> (<a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>);
<a name='L650'>        <font color='red'>}</font>
<a name='L651'><font color='darkred'>#ifdef</font> JEMALLOC_THREADED_INIT
<a name='L652'>        <b>if</b> (malloc_initializer != <a href='../D/517.html' title='Multiple defined in 2 places.'>NO_INITIALIZER</a> &amp;&amp; <a href='../D/245.html' title='Multiple defined in 2 places.'>IS_INITIALIZER</a> == <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>) <font color='red'>{</font>
<a name='L653'>                <i><font color='green'>/* Busy-wait until the initializing thread completes. */</font></i>
<a name='L654'>                <b>do</b> <font color='red'>{</font>
<a name='L655'>                        <a href='../D/3279.html' title='Multiple defined in 2 places.'>malloc_mutex_unlock</a>(&amp;init_lock);
<a name='L656'>                        CPU_SPINWAIT;
<a name='L657'>                        <a href='../D/3273.html' title='Multiple defined in 2 places.'>malloc_mutex_lock</a>(&amp;init_lock);
<a name='L658'>                <font color='red'>}</font> <b>while</b> (malloc_initialized == <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>);
<a name='L659'>                <a href='../D/3279.html' title='Multiple defined in 2 places.'>malloc_mutex_unlock</a>(&amp;init_lock);
<a name='L660'>                <b>return</b> (<a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>);
<a name='L661'>        <font color='red'>}</font>
<a name='L662'><font color='darkred'>#endif</font>
<a name='L663'>        malloc_initializer = <a href='../D/200.html' title='Multiple defined in 2 places.'>INITIALIZER</a>;
<a name='L664'>
<a name='L665'>        <a href='../D/3284.html' title='Multiple defined in 2 places.'>malloc_tsd_boot</a>();
<a name='L666'>        <b>if</b> (config_prof)
<a name='L667'>                <a href='../D/3536.html' title='Multiple defined in 2 places.'>prof_boot0</a>();
<a name='L668'>
<a name='L669'>        <a href='../S/213.html#L376' title='Defined at 376 in deps/jemalloc/src/jemalloc.c.'>malloc_conf_init</a>();
<a name='L670'>
<a name='L671'><font color='darkred'>#if</font> (!<b>defined</b>(JEMALLOC_MUTEX_INIT_CB) &amp;&amp; !<b>defined</b>(JEMALLOC_ZONE) \
<a name='L672'>    &amp;&amp; !<b>defined</b>(_WIN32))
<a name='L673'>        <i><font color='green'>/* Register fork handlers. */</font></i>
<a name='L674'>        <b>if</b> (pthread_atfork(<a href='../D/2599.html' title='Multiple defined in 2 places.'>jemalloc_prefork</a>, <a href='../D/2598.html' title='Multiple defined in 2 places.'>jemalloc_postfork_parent</a>,
<a name='L675'>            <a href='../D/2597.html' title='Multiple defined in 2 places.'>jemalloc_postfork_child</a>) != 0) <font color='red'>{</font>
<a name='L676'>                <a href='../D/3296.html' title='Multiple defined in 2 places.'>malloc_write</a>("&lt;jemalloc&gt;: Error in pthread_atfork()\n");
<a name='L677'>                <b>if</b> (<a href='../S/138.html#L238' title='Defined at 238 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_abort</a>)
<a name='L678'>                        abort();
<a name='L679'>        <font color='red'>}</font>
<a name='L680'><font color='darkred'>#endif</font>
<a name='L681'>
<a name='L682'>        <b>if</b> (<a href='../S/138.html#L255' title='Defined at 255 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_stats_print</a>) <font color='red'>{</font>
<a name='L683'>                <i><font color='green'>/* Print statistics at exit. */</font></i>
<a name='L684'>                <b>if</b> (atexit(<a href='../S/213.html#L204' title='Defined at 204 in deps/jemalloc/src/jemalloc.c.'>stats_print_atexit</a>) != 0) <font color='red'>{</font>
<a name='L685'>                        <a href='../D/3296.html' title='Multiple defined in 2 places.'>malloc_write</a>("&lt;jemalloc&gt;: Error in atexit()\n");
<a name='L686'>                        <b>if</b> (<a href='../S/138.html#L238' title='Defined at 238 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_abort</a>)
<a name='L687'>                                abort();
<a name='L688'>                <font color='red'>}</font>
<a name='L689'>        <font color='red'>}</font>
<a name='L690'>
<a name='L691'>        <b>if</b> (<a href='../D/1716.html' title='Multiple defined in 2 places.'>base_boot</a>()) <font color='red'>{</font>
<a name='L692'>                <a href='../D/3279.html' title='Multiple defined in 2 places.'>malloc_mutex_unlock</a>(&amp;init_lock);
<a name='L693'>                <b>return</b> (<a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>);
<a name='L694'>        <font color='red'>}</font>
<a name='L695'>
<a name='L696'>        <b>if</b> (<a href='../D/1843.html' title='Multiple defined in 2 places.'>chunk_boot</a>()) <font color='red'>{</font>
<a name='L697'>                <a href='../D/3279.html' title='Multiple defined in 2 places.'>malloc_mutex_unlock</a>(&amp;init_lock);
<a name='L698'>                <b>return</b> (<a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>);
<a name='L699'>        <font color='red'>}</font>
<a name='L700'>
<a name='L701'>        <b>if</b> (<a href='../D/2002.html' title='Multiple defined in 2 places.'>ctl_boot</a>()) <font color='red'>{</font>
<a name='L702'>                <a href='../D/3279.html' title='Multiple defined in 2 places.'>malloc_mutex_unlock</a>(&amp;init_lock);
<a name='L703'>                <b>return</b> (<a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>);
<a name='L704'>        <font color='red'>}</font>
<a name='L705'>
<a name='L706'>        <b>if</b> (config_prof)
<a name='L707'>                <a href='../D/3537.html' title='Multiple defined in 2 places.'>prof_boot1</a>();
<a name='L708'>
<a name='L709'>        <a href='../D/1584.html' title='Multiple defined in 2 places.'>arena_boot</a>();
<a name='L710'>
<a name='L711'>        <b>if</b> (config_tcache &amp;&amp; <a href='../D/4303.html' title='Multiple defined in 2 places.'>tcache_boot0</a>()) <font color='red'>{</font>
<a name='L712'>                <a href='../D/3279.html' title='Multiple defined in 2 places.'>malloc_mutex_unlock</a>(&amp;init_lock);
<a name='L713'>                <b>return</b> (<a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>);
<a name='L714'>        <font color='red'>}</font>
<a name='L715'>
<a name='L716'>        <b>if</b> (<a href='../D/2440.html' title='Multiple defined in 2 places.'>huge_boot</a>()) <font color='red'>{</font>
<a name='L717'>                <a href='../D/3279.html' title='Multiple defined in 2 places.'>malloc_mutex_unlock</a>(&amp;init_lock);
<a name='L718'>                <b>return</b> (<a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>);
<a name='L719'>        <font color='red'>}</font>
<a name='L720'>
<a name='L721'>        <b>if</b> (<a href='../D/3272.html' title='Multiple defined in 2 places.'>malloc_mutex_init</a>(&amp;<a href='../S/138.html#L60' title='Defined at 60 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas_lock</a>))
<a name='L722'>                <b>return</b> (<a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>);
<a name='L723'>
<a name='L724'>        <i><font color='green'>/*</font></i>
<a name='L725'><i><font color='green'>         * Create enough scaffolding to allow recursive allocation in</font></i>
<a name='L726'><i><font color='green'>         * malloc_ncpus().</font></i>
<a name='L727'><i><font color='green'>         */</font></i>
<a name='L728'>        <a href='../S/138.html#L234' title='Defined at 234 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>narenas_total</a> = <a href='../S/138.html#L233' title='Defined at 233 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>narenas_auto</a> = 1;
<a name='L729'>        <a href='../S/138.html#L55' title='Defined at 55 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas</a> = init_arenas;
<a name='L730'>        memset(<a href='../S/138.html#L55' title='Defined at 55 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas</a>, 0, <b>sizeof</b>(<a href='../S/146.html#L51' title='Defined at 51 in deps/jemalloc/include/jemalloc/internal/arena.h.'>arena_t</a> *) * <a href='../S/138.html#L233' title='Defined at 233 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>narenas_auto</a>);
<a name='L731'>
<a name='L732'>        <i><font color='green'>/*</font></i>
<a name='L733'><i><font color='green'>         * Initialize one arena here.  The rest are lazily created in</font></i>
<a name='L734'><i><font color='green'>         * choose_arena_hard().</font></i>
<a name='L735'><i><font color='green'>         */</font></i>
<a name='L736'>        <a href='../D/1670.html' title='Multiple defined in 2 places.'>arenas_extend</a>(0);
<a name='L737'>        <b>if</b> (<a href='../S/138.html#L55' title='Defined at 55 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas</a>[0] == NULL) <font color='red'>{</font>
<a name='L738'>                <a href='../D/3279.html' title='Multiple defined in 2 places.'>malloc_mutex_unlock</a>(&amp;init_lock);
<a name='L739'>                <b>return</b> (<a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>);
<a name='L740'>        <font color='red'>}</font>
<a name='L741'>
<a name='L742'>        <i><font color='green'>/* Initialize allocation counters before any allocations can occur. */</font></i>
<a name='L743'>        <b>if</b> (config_stats &amp;&amp; <a href='../S/138.html#L363' title='Defined at 363 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>thread_allocated_tsd_boot</a>()) <font color='red'>{</font>
<a name='L744'>                <a href='../D/3279.html' title='Multiple defined in 2 places.'>malloc_mutex_unlock</a>(&amp;init_lock);
<a name='L745'>                <b>return</b> (<a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>);
<a name='L746'>        <font color='red'>}</font>
<a name='L747'>
<a name='L748'>        <b>if</b> (<a href='../S/138.html#L63' title='Defined at 63 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas_tsd_boot</a>()) <font color='red'>{</font>
<a name='L749'>                <a href='../D/3279.html' title='Multiple defined in 2 places.'>malloc_mutex_unlock</a>(&amp;init_lock);
<a name='L750'>                <b>return</b> (<a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>);
<a name='L751'>        <font color='red'>}</font>
<a name='L752'>
<a name='L753'>        <b>if</b> (config_tcache &amp;&amp; <a href='../D/4304.html' title='Multiple defined in 2 places.'>tcache_boot1</a>()) <font color='red'>{</font>
<a name='L754'>                <a href='../D/3279.html' title='Multiple defined in 2 places.'>malloc_mutex_unlock</a>(&amp;init_lock);
<a name='L755'>                <b>return</b> (<a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>);
<a name='L756'>        <font color='red'>}</font>
<a name='L757'>
<a name='L758'>        <b>if</b> (config_fill &amp;&amp; <a href='../D/3658.html' title='Multiple defined in 2 places.'>quarantine_boot</a>()) <font color='red'>{</font>
<a name='L759'>                <a href='../D/3279.html' title='Multiple defined in 2 places.'>malloc_mutex_unlock</a>(&amp;init_lock);
<a name='L760'>                <b>return</b> (<a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>);
<a name='L761'>        <font color='red'>}</font>
<a name='L762'>
<a name='L763'>        <b>if</b> (config_prof &amp;&amp; <a href='../D/3538.html' title='Multiple defined in 2 places.'>prof_boot2</a>()) <font color='red'>{</font>
<a name='L764'>                <a href='../D/3279.html' title='Multiple defined in 2 places.'>malloc_mutex_unlock</a>(&amp;init_lock);
<a name='L765'>                <b>return</b> (<a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>);
<a name='L766'>        <font color='red'>}</font>
<a name='L767'>
<a name='L768'>        <i><font color='green'>/* Get number of CPUs. */</font></i>
<a name='L769'>        <a href='../D/3279.html' title='Multiple defined in 2 places.'>malloc_mutex_unlock</a>(&amp;init_lock);
<a name='L770'>        <a href='../S/138.html#L236' title='Defined at 236 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>ncpus</a> = <a href='../S/213.html#L248' title='Defined at 248 in deps/jemalloc/src/jemalloc.c.'>malloc_ncpus</a>();
<a name='L771'>        <a href='../D/3273.html' title='Multiple defined in 2 places.'>malloc_mutex_lock</a>(&amp;init_lock);
<a name='L772'>
<a name='L773'>        <b>if</b> (<a href='../D/3407.html' title='Multiple defined in 2 places.'>mutex_boot</a>()) <font color='red'>{</font>
<a name='L774'>                <a href='../D/3279.html' title='Multiple defined in 2 places.'>malloc_mutex_unlock</a>(&amp;init_lock);
<a name='L775'>                <b>return</b> (<a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>);
<a name='L776'>        <font color='red'>}</font>
<a name='L777'>
<a name='L778'>        <b>if</b> (<a href='../S/138.html#L245' title='Defined at 245 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_narenas</a> == 0) <font color='red'>{</font>
<a name='L779'>                <i><font color='green'>/*</font></i>
<a name='L780'><i><font color='green'>                 * For SMP systems, create more than one arena per CPU by</font></i>
<a name='L781'><i><font color='green'>                 * default.</font></i>
<a name='L782'><i><font color='green'>                 */</font></i>
<a name='L783'>                <b>if</b> (<a href='../S/138.html#L236' title='Defined at 236 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>ncpus</a> &gt; 1)
<a name='L784'>                        <a href='../S/138.html#L245' title='Defined at 245 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_narenas</a> = <a href='../S/138.html#L236' title='Defined at 236 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>ncpus</a> &lt;&lt; 2;
<a name='L785'>                <b>else</b>
<a name='L786'>                        <a href='../S/138.html#L245' title='Defined at 245 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_narenas</a> = 1;
<a name='L787'>        <font color='red'>}</font>
<a name='L788'>        <a href='../S/138.html#L233' title='Defined at 233 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>narenas_auto</a> = <a href='../S/138.html#L245' title='Defined at 245 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_narenas</a>;
<a name='L789'>        <i><font color='green'>/*</font></i>
<a name='L790'><i><font color='green'>         * Make sure that the arenas array can be allocated.  In practice, this</font></i>
<a name='L791'><i><font color='green'>         * limit is enough to allow the allocator to function, but the ctl</font></i>
<a name='L792'><i><font color='green'>         * machinery will fail to allocate memory at far lower limits.</font></i>
<a name='L793'><i><font color='green'>         */</font></i>
<a name='L794'>        <b>if</b> (<a href='../S/138.html#L233' title='Defined at 233 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>narenas_auto</a> &gt; <a href='../S/138.html#L116' title='Defined at 116 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>chunksize</a> / <b>sizeof</b>(<a href='../S/146.html#L51' title='Defined at 51 in deps/jemalloc/include/jemalloc/internal/arena.h.'>arena_t</a> *)) <font color='red'>{</font>
<a name='L795'>                <a href='../S/138.html#L233' title='Defined at 233 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>narenas_auto</a> = <a href='../S/138.html#L116' title='Defined at 116 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>chunksize</a> / <b>sizeof</b>(<a href='../S/146.html#L51' title='Defined at 51 in deps/jemalloc/include/jemalloc/internal/arena.h.'>arena_t</a> *);
<a name='L796'>                <a href='../S/138.html#L219' title='Defined at 219 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>malloc_printf</a>("&lt;jemalloc&gt;: Reducing narenas to limit (%d)\n",
<a name='L797'>                    <a href='../S/138.html#L233' title='Defined at 233 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>narenas_auto</a>);
<a name='L798'>        <font color='red'>}</font>
<a name='L799'>        <a href='../S/138.html#L234' title='Defined at 234 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>narenas_total</a> = <a href='../S/138.html#L233' title='Defined at 233 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>narenas_auto</a>;
<a name='L800'>
<a name='L801'>        <i><font color='green'>/* Allocate and initialize arenas. */</font></i>
<a name='L802'>        <a href='../S/138.html#L55' title='Defined at 55 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas</a> = (<a href='../S/146.html#L51' title='Defined at 51 in deps/jemalloc/include/jemalloc/internal/arena.h.'>arena_t</a> **)<a href='../D/1715.html' title='Multiple defined in 2 places.'>base_alloc</a>(<b>sizeof</b>(<a href='../S/146.html#L51' title='Defined at 51 in deps/jemalloc/include/jemalloc/internal/arena.h.'>arena_t</a> *) * <a href='../S/138.html#L234' title='Defined at 234 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>narenas_total</a>);
<a name='L803'>        <b>if</b> (<a href='../S/138.html#L55' title='Defined at 55 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas</a> == NULL) <font color='red'>{</font>
<a name='L804'>                <a href='../D/3279.html' title='Multiple defined in 2 places.'>malloc_mutex_unlock</a>(&amp;init_lock);
<a name='L805'>                <b>return</b> (<a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>);
<a name='L806'>        <font color='red'>}</font>
<a name='L807'>        <i><font color='green'>/*</font></i>
<a name='L808'><i><font color='green'>         * Zero the array.  In practice, this should always be pre-zeroed,</font></i>
<a name='L809'><i><font color='green'>         * since it was just mmap()ed, but let's be sure.</font></i>
<a name='L810'><i><font color='green'>         */</font></i>
<a name='L811'>        memset(<a href='../S/138.html#L55' title='Defined at 55 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas</a>, 0, <b>sizeof</b>(<a href='../S/146.html#L51' title='Defined at 51 in deps/jemalloc/include/jemalloc/internal/arena.h.'>arena_t</a> *) * <a href='../S/138.html#L234' title='Defined at 234 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>narenas_total</a>);
<a name='L812'>        <i><font color='green'>/* Copy the pointer to the one arena that was already initialized. */</font></i>
<a name='L813'>        <a href='../S/138.html#L55' title='Defined at 55 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas</a>[0] = init_arenas[0];
<a name='L814'>
<a name='L815'>        malloc_initialized = <a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>;
<a name='L816'>        <a href='../D/3279.html' title='Multiple defined in 2 places.'>malloc_mutex_unlock</a>(&amp;init_lock);
<a name='L817'>        <b>return</b> (<a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>);
<a name='L818'><font color='red'>}</font>
<a name='L819'>
<a name='L820'><i><font color='green'>/*</font></i>
<a name='L821'><i><font color='green'> * End initialization functions.</font></i>
<a name='L822'><i><font color='green'> */</font></i>
<a name='L823'><i><font color='green'>/******************************************************************************/</font></i>
<a name='L824'><i><font color='green'>/*</font></i>
<a name='L825'><i><font color='green'> * Begin malloc(3)-compatible functions.</font></i>
<a name='L826'><i><font color='green'> */</font></i>
<a name='L827'>
<a name='L828'><b>void</b> *
<a name='L829'><a href='../R/2291.html' title='Multiple refered from 4 places.'>je_malloc</a>(size_t size)
<a name='L830'><font color='red'>{</font>
<a name='L831'>        <b>void</b> *ret;
<a name='L832'>        size_t usize <a href='../D/253.html' title='Multiple defined in 2 places.'>JEMALLOC_CC_SILENCE_INIT</a>(0);
<a name='L833'>        <a href='../S/141.html#L6' title='Defined at 6 in deps/jemalloc/include/jemalloc/internal/prof.h.'>prof_thr_cnt_t</a> *cnt <a href='../D/253.html' title='Multiple defined in 2 places.'>JEMALLOC_CC_SILENCE_INIT</a>(NULL);
<a name='L834'>
<a name='L835'>        <b>if</b> (<a href='../S/213.html#L281' title='Defined at 281 in deps/jemalloc/src/jemalloc.c.'>malloc_init</a>()) <font color='red'>{</font>
<a name='L836'>                ret = NULL;
<a name='L837'>                <b>goto</b> label_oom;
<a name='L838'>        <font color='red'>}</font>
<a name='L839'>
<a name='L840'>        <b>if</b> (size == 0)
<a name='L841'>                size = 1;
<a name='L842'>
<a name='L843'>        <b>if</b> (config_prof &amp;&amp; <a href='../S/138.html#L246' title='Defined at 246 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_prof</a>) <font color='red'>{</font>
<a name='L844'>                usize = <a href='../S/138.html#L309' title='Defined at 309 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>s2u</a>(size);
<a name='L845'>                <a href='../S/141.html#L234' title='Defined at 234 in deps/jemalloc/include/jemalloc/internal/prof.h.'>PROF_ALLOC_PREP</a>(1, usize, cnt);
<a name='L846'>                <b>if</b> (cnt == NULL) <font color='red'>{</font>
<a name='L847'>                        ret = NULL;
<a name='L848'>                        <b>goto</b> label_oom;
<a name='L849'>                <font color='red'>}</font>
<a name='L850'>                <b>if</b> (<a href='../S/138.html#L280' title='Defined at 280 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>prof_promote</a> &amp;&amp; (<a href='../D/4441.html' title='Multiple defined in 2 places.'>uintptr_t</a>)cnt != (<a href='../D/4441.html' title='Multiple defined in 2 places.'>uintptr_t</a>)1U &amp;&amp; usize &lt;=
<a name='L851'>                    SMALL_MAXCLASS) <font color='red'>{</font>
<a name='L852'>                        ret = <a href='../S/138.html#L198' title='Defined at 198 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>imalloc</a>(SMALL_MAXCLASS+1);
<a name='L853'>                        <b>if</b> (ret != NULL)
<a name='L854'>                                <a href='../D/1638.html' title='Multiple defined in 2 places.'>arena_prof_promoted</a>(ret, usize);
<a name='L855'>                <font color='red'>}</font> <b>else</b>
<a name='L856'>                        ret = <a href='../S/138.html#L198' title='Defined at 198 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>imalloc</a>(size);
<a name='L857'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L858'>                <b>if</b> (config_stats || (config_valgrind &amp;&amp; <a href='../S/138.html#L258' title='Defined at 258 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_valgrind</a>))
<a name='L859'>                        usize = <a href='../S/138.html#L309' title='Defined at 309 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>s2u</a>(size);
<a name='L860'>                ret = <a href='../S/138.html#L198' title='Defined at 198 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>imalloc</a>(size);
<a name='L861'>        <font color='red'>}</font>
<a name='L862'>
<a name='L863'>label_oom:
<a name='L864'>        <b>if</b> (ret == NULL) <font color='red'>{</font>
<a name='L865'>                <b>if</b> (config_xmalloc &amp;&amp; <a href='../S/138.html#L259' title='Defined at 259 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_xmalloc</a>) <font color='red'>{</font>
<a name='L866'>                        <a href='../D/3296.html' title='Multiple defined in 2 places.'>malloc_write</a>("&lt;jemalloc&gt;: Error in malloc(): "
<a name='L867'>                            "out of memory\n");
<a name='L868'>                        abort();
<a name='L869'>                <font color='red'>}</font>
<a name='L870'>                <a href='../D/4119.html' title='Multiple defined in 2 places.'>set_errno</a>(ENOMEM);
<a name='L871'>        <font color='red'>}</font>
<a name='L872'>        <b>if</b> (config_prof &amp;&amp; <a href='../S/138.html#L246' title='Defined at 246 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_prof</a> &amp;&amp; ret != NULL)
<a name='L873'>                <a href='../D/3567.html' title='Multiple defined in 2 places.'>prof_malloc</a>(ret, usize, cnt);
<a name='L874'>        <b>if</b> (config_stats &amp;&amp; ret != NULL) <font color='red'>{</font>
<a name='L875'>                <a href='../D/1684.html' title='Multiple defined in 3 places.'>assert</a>(usize == <a href='../S/138.html#L206' title='Defined at 206 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>isalloc</a>(ret, config_prof));
<a name='L876'>                <a href='../S/138.html#L365' title='Defined at 365 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>thread_allocated_tsd_get</a>()-&gt;allocated += usize;
<a name='L877'>        <font color='red'>}</font>
<a name='L878'>        <a href='../D/1267.html' title='Multiple defined in 2 places.'>UTRACE</a>(0, size, ret);
<a name='L879'>        JEMALLOC_VALGRIND_MALLOC(ret != NULL, ret, usize, <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>);
<a name='L880'>        <b>return</b> (ret);
<a name='L881'><font color='red'>}</font>
<a name='L882'>
<a name='L883'><a href='../R/219.html' title='Multiple refered from 11 places.'>JEMALLOC_ATTR</a>(nonnull(1))
<a name='L884'><font color='darkred'>#ifdef</font> JEMALLOC_PROF
<a name='L885'><i><font color='green'>/*</font></i>
<a name='L886'><i><font color='green'> * Avoid any uncertainty as to how many backtrace frames to ignore in</font></i>
<a name='L887'><i><font color='green'> * PROF_ALLOC_PREP().</font></i>
<a name='L888'><i><font color='green'> */</font></i>
<a name='L889'><a href='../D/250.html' title='Multiple defined in 8 places.'>JEMALLOC_ATTR</a>(noinline)
<a name='L890'><font color='darkred'>#endif</font>
<a name='L891'><b>static</b> <b>int</b>
<a name='L892'>imemalign(<b>void</b> **memptr, size_t alignment, size_t size,
<a name='L893'>    size_t min_alignment)
<a name='L894'><font color='red'>{</font>
<a name='L895'>        <b>int</b> ret;
<a name='L896'>        size_t usize;
<a name='L897'>        <b>void</b> *result;
<a name='L898'>        <a href='../S/141.html#L6' title='Defined at 6 in deps/jemalloc/include/jemalloc/internal/prof.h.'>prof_thr_cnt_t</a> *cnt <a href='../D/253.html' title='Multiple defined in 2 places.'>JEMALLOC_CC_SILENCE_INIT</a>(NULL);
<a name='L899'>
<a name='L900'>        <a href='../D/1684.html' title='Multiple defined in 3 places.'>assert</a>(min_alignment != 0);
<a name='L901'>
<a name='L902'>        <b>if</b> (<a href='../S/213.html#L281' title='Defined at 281 in deps/jemalloc/src/jemalloc.c.'>malloc_init</a>())
<a name='L903'>                result = NULL;
<a name='L904'>        <b>else</b> <font color='red'>{</font>
<a name='L905'>                <b>if</b> (size == 0)
<a name='L906'>                        size = 1;
<a name='L907'>
<a name='L908'>                <i><font color='green'>/* Make sure that alignment is a large enough power of 2. */</font></i>
<a name='L909'>                <b>if</b> (((alignment - 1) &amp; alignment) != 0
<a name='L910'>                    || (alignment &lt; min_alignment)) <font color='red'>{</font>
<a name='L911'>                        <b>if</b> (config_xmalloc &amp;&amp; <a href='../S/138.html#L259' title='Defined at 259 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_xmalloc</a>) <font color='red'>{</font>
<a name='L912'>                                <a href='../D/3296.html' title='Multiple defined in 2 places.'>malloc_write</a>("&lt;jemalloc&gt;: Error allocating "
<a name='L913'>                                    "aligned memory: invalid alignment\n");
<a name='L914'>                                abort();
<a name='L915'>                        <font color='red'>}</font>
<a name='L916'>                        result = NULL;
<a name='L917'>                        ret = EINVAL;
<a name='L918'>                        <b>goto</b> label_return;
<a name='L919'>                <font color='red'>}</font>
<a name='L920'>
<a name='L921'>                usize = <a href='../S/138.html#L310' title='Defined at 310 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>sa2u</a>(size, alignment);
<a name='L922'>                <b>if</b> (usize == 0) <font color='red'>{</font>
<a name='L923'>                        result = NULL;
<a name='L924'>                        ret = ENOMEM;
<a name='L925'>                        <b>goto</b> label_return;
<a name='L926'>                <font color='red'>}</font>
<a name='L927'>
<a name='L928'>                <b>if</b> (config_prof &amp;&amp; <a href='../S/138.html#L246' title='Defined at 246 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_prof</a>) <font color='red'>{</font>
<a name='L929'>                        <a href='../S/141.html#L234' title='Defined at 234 in deps/jemalloc/include/jemalloc/internal/prof.h.'>PROF_ALLOC_PREP</a>(2, usize, cnt);
<a name='L930'>                        <b>if</b> (cnt == NULL) <font color='red'>{</font>
<a name='L931'>                                result = NULL;
<a name='L932'>                                ret = EINVAL;
<a name='L933'>                        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L934'>                                <b>if</b> (<a href='../S/138.html#L280' title='Defined at 280 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>prof_promote</a> &amp;&amp; (<a href='../D/4441.html' title='Multiple defined in 2 places.'>uintptr_t</a>)cnt !=
<a name='L935'>                                    (<a href='../D/4441.html' title='Multiple defined in 2 places.'>uintptr_t</a>)1U &amp;&amp; usize &lt;= SMALL_MAXCLASS) <font color='red'>{</font>
<a name='L936'>                                        <a href='../D/1684.html' title='Multiple defined in 3 places.'>assert</a>(<a href='../S/138.html#L310' title='Defined at 310 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>sa2u</a>(SMALL_MAXCLASS+1,
<a name='L937'>                                            alignment) != 0);
<a name='L938'>                                        result = <a href='../S/138.html#L200' title='Defined at 200 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>ipalloc</a>(<a href='../S/138.html#L310' title='Defined at 310 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>sa2u</a>(SMALL_MAXCLASS+1,
<a name='L939'>                                            alignment), alignment, <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>);
<a name='L940'>                                        <b>if</b> (result != NULL) <font color='red'>{</font>
<a name='L941'>                                                <a href='../D/1638.html' title='Multiple defined in 2 places.'>arena_prof_promoted</a>(result,
<a name='L942'>                                                    usize);
<a name='L943'>                                        <font color='red'>}</font>
<a name='L944'>                                <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L945'>                                        result = <a href='../S/138.html#L200' title='Defined at 200 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>ipalloc</a>(usize, alignment,
<a name='L946'>                                            <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>);
<a name='L947'>                                <font color='red'>}</font>
<a name='L948'>                        <font color='red'>}</font>
<a name='L949'>                <font color='red'>}</font> <b>else</b>
<a name='L950'>                        result = <a href='../S/138.html#L200' title='Defined at 200 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>ipalloc</a>(usize, alignment, <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>);
<a name='L951'>        <font color='red'>}</font>
<a name='L952'>
<a name='L953'>        <b>if</b> (result == NULL) <font color='red'>{</font>
<a name='L954'>                <b>if</b> (config_xmalloc &amp;&amp; <a href='../S/138.html#L259' title='Defined at 259 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_xmalloc</a>) <font color='red'>{</font>
<a name='L955'>                        <a href='../D/3296.html' title='Multiple defined in 2 places.'>malloc_write</a>("&lt;jemalloc&gt;: Error allocating aligned "
<a name='L956'>                            "memory: out of memory\n");
<a name='L957'>                        abort();
<a name='L958'>                <font color='red'>}</font>
<a name='L959'>                ret = ENOMEM;
<a name='L960'>                <b>goto</b> label_return;
<a name='L961'>        <font color='red'>}</font>
<a name='L962'>
<a name='L963'>        *memptr = result;
<a name='L964'>        ret = 0;
<a name='L965'>
<a name='L966'>label_return:
<a name='L967'>        <b>if</b> (config_stats &amp;&amp; result != NULL) <font color='red'>{</font>
<a name='L968'>                <a href='../D/1684.html' title='Multiple defined in 3 places.'>assert</a>(usize == <a href='../S/138.html#L206' title='Defined at 206 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>isalloc</a>(result, config_prof));
<a name='L969'>                <a href='../S/138.html#L365' title='Defined at 365 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>thread_allocated_tsd_get</a>()-&gt;allocated += usize;
<a name='L970'>        <font color='red'>}</font>
<a name='L971'>        <b>if</b> (config_prof &amp;&amp; <a href='../S/138.html#L246' title='Defined at 246 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_prof</a> &amp;&amp; result != NULL)
<a name='L972'>                <a href='../D/3567.html' title='Multiple defined in 2 places.'>prof_malloc</a>(result, usize, cnt);
<a name='L973'>        <a href='../D/1267.html' title='Multiple defined in 2 places.'>UTRACE</a>(0, size, result);
<a name='L974'>        <b>return</b> (ret);
<a name='L975'><font color='red'>}</font>
<a name='L976'>
<a name='L977'><b>int</b>
<a name='L978'><a href='../R/2295.html' title='Multiple refered from 2 places.'>je_posix_memalign</a>(<b>void</b> **memptr, size_t alignment, size_t size)
<a name='L979'><font color='red'>{</font>
<a name='L980'>        <b>int</b> ret = imemalign(memptr, alignment, size, <b>sizeof</b>(<b>void</b> *));
<a name='L981'>        JEMALLOC_VALGRIND_MALLOC(ret == 0, *memptr, <a href='../S/138.html#L206' title='Defined at 206 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>isalloc</a>(*memptr,
<a name='L982'>            config_prof), <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>);
<a name='L983'>        <b>return</b> (ret);
<a name='L984'><font color='red'>}</font>
<a name='L985'>
<a name='L986'><b>void</b> *
<a name='L987'>je_aligned_alloc(size_t alignment, size_t size)
<a name='L988'><font color='red'>{</font>
<a name='L989'>        <b>void</b> *ret;
<a name='L990'>        <b>int</b> err;
<a name='L991'>
<a name='L992'>        <b>if</b> ((err = imemalign(&amp;ret, alignment, size, 1)) != 0) <font color='red'>{</font>
<a name='L993'>                ret = NULL;
<a name='L994'>                <a href='../D/4119.html' title='Multiple defined in 2 places.'>set_errno</a>(err);
<a name='L995'>        <font color='red'>}</font>
<a name='L996'>        JEMALLOC_VALGRIND_MALLOC(err == 0, ret, <a href='../S/138.html#L206' title='Defined at 206 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>isalloc</a>(ret, config_prof),
<a name='L997'>            <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>);
<a name='L998'>        <b>return</b> (ret);
<a name='L999'><font color='red'>}</font>
<a name='L1000'>
<a name='L1001'><b>void</b> *
<a name='L1002'><a href='../R/2286.html' title='Multiple refered from 2 places.'>je_calloc</a>(size_t num, size_t size)
<a name='L1003'><font color='red'>{</font>
<a name='L1004'>        <b>void</b> *ret;
<a name='L1005'>        size_t num_size;
<a name='L1006'>        size_t usize <a href='../D/253.html' title='Multiple defined in 2 places.'>JEMALLOC_CC_SILENCE_INIT</a>(0);
<a name='L1007'>        <a href='../S/141.html#L6' title='Defined at 6 in deps/jemalloc/include/jemalloc/internal/prof.h.'>prof_thr_cnt_t</a> *cnt <a href='../D/253.html' title='Multiple defined in 2 places.'>JEMALLOC_CC_SILENCE_INIT</a>(NULL);
<a name='L1008'>
<a name='L1009'>        <b>if</b> (<a href='../S/213.html#L281' title='Defined at 281 in deps/jemalloc/src/jemalloc.c.'>malloc_init</a>()) <font color='red'>{</font>
<a name='L1010'>                num_size = 0;
<a name='L1011'>                ret = NULL;
<a name='L1012'>                <b>goto</b> label_return;
<a name='L1013'>        <font color='red'>}</font>
<a name='L1014'>
<a name='L1015'>        num_size = num * size;
<a name='L1016'>        <b>if</b> (num_size == 0) <font color='red'>{</font>
<a name='L1017'>                <b>if</b> (num == 0 || size == 0)
<a name='L1018'>                        num_size = 1;
<a name='L1019'>                <b>else</b> <font color='red'>{</font>
<a name='L1020'>                        ret = NULL;
<a name='L1021'>                        <b>goto</b> label_return;
<a name='L1022'>                <font color='red'>}</font>
<a name='L1023'>        <i><font color='green'>/*</font></i>
<a name='L1024'><i><font color='green'>         * Try to avoid division here.  We know that it isn't possible to</font></i>
<a name='L1025'><i><font color='green'>         * overflow during multiplication if neither operand uses any of the</font></i>
<a name='L1026'><i><font color='green'>         * most significant half of the bits in a size_t.</font></i>
<a name='L1027'><i><font color='green'>         */</font></i>
<a name='L1028'>        <font color='red'>}</font> <b>else</b> <b>if</b> (((num | size) &amp; (SIZE_T_MAX &lt;&lt; (<b>sizeof</b>(size_t) &lt;&lt; 2)))
<a name='L1029'>            &amp;&amp; (num_size / size != num)) <font color='red'>{</font>
<a name='L1030'>                <i><font color='green'>/* size_t overflow. */</font></i>
<a name='L1031'>                ret = NULL;
<a name='L1032'>                <b>goto</b> label_return;
<a name='L1033'>        <font color='red'>}</font>
<a name='L1034'>
<a name='L1035'>        <b>if</b> (config_prof &amp;&amp; <a href='../S/138.html#L246' title='Defined at 246 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_prof</a>) <font color='red'>{</font>
<a name='L1036'>                usize = <a href='../S/138.html#L309' title='Defined at 309 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>s2u</a>(num_size);
<a name='L1037'>                <a href='../S/141.html#L234' title='Defined at 234 in deps/jemalloc/include/jemalloc/internal/prof.h.'>PROF_ALLOC_PREP</a>(1, usize, cnt);
<a name='L1038'>                <b>if</b> (cnt == NULL) <font color='red'>{</font>
<a name='L1039'>                        ret = NULL;
<a name='L1040'>                        <b>goto</b> label_return;
<a name='L1041'>                <font color='red'>}</font>
<a name='L1042'>                <b>if</b> (<a href='../S/138.html#L280' title='Defined at 280 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>prof_promote</a> &amp;&amp; (<a href='../D/4441.html' title='Multiple defined in 2 places.'>uintptr_t</a>)cnt != (<a href='../D/4441.html' title='Multiple defined in 2 places.'>uintptr_t</a>)1U &amp;&amp; usize
<a name='L1043'>                    &lt;= SMALL_MAXCLASS) <font color='red'>{</font>
<a name='L1044'>                        ret = <a href='../S/138.html#L194' title='Defined at 194 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>icalloc</a>(SMALL_MAXCLASS+1);
<a name='L1045'>                        <b>if</b> (ret != NULL)
<a name='L1046'>                                <a href='../D/1638.html' title='Multiple defined in 2 places.'>arena_prof_promoted</a>(ret, usize);
<a name='L1047'>                <font color='red'>}</font> <b>else</b>
<a name='L1048'>                        ret = <a href='../S/138.html#L194' title='Defined at 194 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>icalloc</a>(num_size);
<a name='L1049'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1050'>                <b>if</b> (config_stats || (config_valgrind &amp;&amp; <a href='../S/138.html#L258' title='Defined at 258 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_valgrind</a>))
<a name='L1051'>                        usize = <a href='../S/138.html#L309' title='Defined at 309 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>s2u</a>(num_size);
<a name='L1052'>                ret = <a href='../S/138.html#L194' title='Defined at 194 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>icalloc</a>(num_size);
<a name='L1053'>        <font color='red'>}</font>
<a name='L1054'>
<a name='L1055'>label_return:
<a name='L1056'>        <b>if</b> (ret == NULL) <font color='red'>{</font>
<a name='L1057'>                <b>if</b> (config_xmalloc &amp;&amp; <a href='../S/138.html#L259' title='Defined at 259 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_xmalloc</a>) <font color='red'>{</font>
<a name='L1058'>                        <a href='../D/3296.html' title='Multiple defined in 2 places.'>malloc_write</a>("&lt;jemalloc&gt;: Error in calloc(): out of "
<a name='L1059'>                            "memory\n");
<a name='L1060'>                        abort();
<a name='L1061'>                <font color='red'>}</font>
<a name='L1062'>                <a href='../D/4119.html' title='Multiple defined in 2 places.'>set_errno</a>(ENOMEM);
<a name='L1063'>        <font color='red'>}</font>
<a name='L1064'>
<a name='L1065'>        <b>if</b> (config_prof &amp;&amp; <a href='../S/138.html#L246' title='Defined at 246 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_prof</a> &amp;&amp; ret != NULL)
<a name='L1066'>                <a href='../D/3567.html' title='Multiple defined in 2 places.'>prof_malloc</a>(ret, usize, cnt);
<a name='L1067'>        <b>if</b> (config_stats &amp;&amp; ret != NULL) <font color='red'>{</font>
<a name='L1068'>                <a href='../D/1684.html' title='Multiple defined in 3 places.'>assert</a>(usize == <a href='../S/138.html#L206' title='Defined at 206 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>isalloc</a>(ret, config_prof));
<a name='L1069'>                <a href='../S/138.html#L365' title='Defined at 365 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>thread_allocated_tsd_get</a>()-&gt;allocated += usize;
<a name='L1070'>        <font color='red'>}</font>
<a name='L1071'>        <a href='../D/1267.html' title='Multiple defined in 2 places.'>UTRACE</a>(0, num_size, ret);
<a name='L1072'>        JEMALLOC_VALGRIND_MALLOC(ret != NULL, ret, usize, <a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>);
<a name='L1073'>        <b>return</b> (ret);
<a name='L1074'><font color='red'>}</font>
<a name='L1075'>
<a name='L1076'><b>void</b> *
<a name='L1077'><a href='../R/2296.html' title='Multiple refered from 3 places.'>je_realloc</a>(<b>void</b> *ptr, size_t size)
<a name='L1078'><font color='red'>{</font>
<a name='L1079'>        <b>void</b> *ret;
<a name='L1080'>        size_t usize <a href='../D/253.html' title='Multiple defined in 2 places.'>JEMALLOC_CC_SILENCE_INIT</a>(0);
<a name='L1081'>        size_t old_size = 0;
<a name='L1082'>        size_t old_rzsize <a href='../D/253.html' title='Multiple defined in 2 places.'>JEMALLOC_CC_SILENCE_INIT</a>(0);
<a name='L1083'>        <a href='../S/141.html#L6' title='Defined at 6 in deps/jemalloc/include/jemalloc/internal/prof.h.'>prof_thr_cnt_t</a> *cnt <a href='../D/253.html' title='Multiple defined in 2 places.'>JEMALLOC_CC_SILENCE_INIT</a>(NULL);
<a name='L1084'>        <a href='../S/141.html#L7' title='Defined at 7 in deps/jemalloc/include/jemalloc/internal/prof.h.'>prof_ctx_t</a> *old_ctx <a href='../D/253.html' title='Multiple defined in 2 places.'>JEMALLOC_CC_SILENCE_INIT</a>(NULL);
<a name='L1085'>
<a name='L1086'>        <b>if</b> (size == 0) <font color='red'>{</font>
<a name='L1087'>                <b>if</b> (ptr != NULL) <font color='red'>{</font>
<a name='L1088'>                        <i><font color='green'>/* realloc(ptr, 0) is equivalent to free(p). */</font></i>
<a name='L1089'>                        <b>if</b> (config_prof) <font color='red'>{</font>
<a name='L1090'>                                old_size = <a href='../S/138.html#L206' title='Defined at 206 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>isalloc</a>(ptr, <a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>);
<a name='L1091'>                                <b>if</b> (config_valgrind &amp;&amp; <a href='../S/138.html#L258' title='Defined at 258 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_valgrind</a>)
<a name='L1092'>                                        old_rzsize = <a href='../S/138.html#L261' title='Defined at 261 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>p2rz</a>(ptr);
<a name='L1093'>                        <font color='red'>}</font> <b>else</b> <b>if</b> (config_stats) <font color='red'>{</font>
<a name='L1094'>                                old_size = <a href='../S/138.html#L206' title='Defined at 206 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>isalloc</a>(ptr, <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>);
<a name='L1095'>                                <b>if</b> (config_valgrind &amp;&amp; <a href='../S/138.html#L258' title='Defined at 258 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_valgrind</a>)
<a name='L1096'>                                        old_rzsize = <a href='../S/138.html#L367' title='Defined at 367 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>u2rz</a>(old_size);
<a name='L1097'>                        <font color='red'>}</font> <b>else</b> <b>if</b> (config_valgrind &amp;&amp; <a href='../S/138.html#L258' title='Defined at 258 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_valgrind</a>) <font color='red'>{</font>
<a name='L1098'>                                old_size = <a href='../S/138.html#L206' title='Defined at 206 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>isalloc</a>(ptr, <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>);
<a name='L1099'>                                old_rzsize = <a href='../S/138.html#L367' title='Defined at 367 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>u2rz</a>(old_size);
<a name='L1100'>                        <font color='red'>}</font>
<a name='L1101'>                        <b>if</b> (config_prof &amp;&amp; <a href='../S/138.html#L246' title='Defined at 246 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_prof</a>) <font color='red'>{</font>
<a name='L1102'>                                old_ctx = <a href='../D/3546.html' title='Multiple defined in 2 places.'>prof_ctx_get</a>(ptr);
<a name='L1103'>                                cnt = NULL;
<a name='L1104'>                        <font color='red'>}</font>
<a name='L1105'>                        <a href='../S/138.html#L202' title='Defined at 202 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>iqalloc</a>(ptr);
<a name='L1106'>                        ret = NULL;
<a name='L1107'>                        <b>goto</b> label_return;
<a name='L1108'>                <font color='red'>}</font> <b>else</b>
<a name='L1109'>                        size = 1;
<a name='L1110'>        <font color='red'>}</font>
<a name='L1111'>
<a name='L1112'>        <b>if</b> (ptr != NULL) <font color='red'>{</font>
<a name='L1113'>                <a href='../D/1684.html' title='Multiple defined in 3 places.'>assert</a>(malloc_initialized || <a href='../D/245.html' title='Multiple defined in 2 places.'>IS_INITIALIZER</a>);
<a name='L1114'>
<a name='L1115'>                <b>if</b> (config_prof) <font color='red'>{</font>
<a name='L1116'>                        old_size = <a href='../S/138.html#L206' title='Defined at 206 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>isalloc</a>(ptr, <a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>);
<a name='L1117'>                        <b>if</b> (config_valgrind &amp;&amp; <a href='../S/138.html#L258' title='Defined at 258 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_valgrind</a>)
<a name='L1118'>                                old_rzsize = <a href='../S/138.html#L261' title='Defined at 261 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>p2rz</a>(ptr);
<a name='L1119'>                <font color='red'>}</font> <b>else</b> <b>if</b> (config_stats) <font color='red'>{</font>
<a name='L1120'>                        old_size = <a href='../S/138.html#L206' title='Defined at 206 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>isalloc</a>(ptr, <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>);
<a name='L1121'>                        <b>if</b> (config_valgrind &amp;&amp; <a href='../S/138.html#L258' title='Defined at 258 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_valgrind</a>)
<a name='L1122'>                                old_rzsize = <a href='../S/138.html#L367' title='Defined at 367 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>u2rz</a>(old_size);
<a name='L1123'>                <font color='red'>}</font> <b>else</b> <b>if</b> (config_valgrind &amp;&amp; <a href='../S/138.html#L258' title='Defined at 258 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_valgrind</a>) <font color='red'>{</font>
<a name='L1124'>                        old_size = <a href='../S/138.html#L206' title='Defined at 206 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>isalloc</a>(ptr, <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>);
<a name='L1125'>                        old_rzsize = <a href='../S/138.html#L367' title='Defined at 367 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>u2rz</a>(old_size);
<a name='L1126'>                <font color='red'>}</font>
<a name='L1127'>                <b>if</b> (config_prof &amp;&amp; <a href='../S/138.html#L246' title='Defined at 246 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_prof</a>) <font color='red'>{</font>
<a name='L1128'>                        usize = <a href='../S/138.html#L309' title='Defined at 309 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>s2u</a>(size);
<a name='L1129'>                        old_ctx = <a href='../D/3546.html' title='Multiple defined in 2 places.'>prof_ctx_get</a>(ptr);
<a name='L1130'>                        <a href='../S/141.html#L234' title='Defined at 234 in deps/jemalloc/include/jemalloc/internal/prof.h.'>PROF_ALLOC_PREP</a>(1, usize, cnt);
<a name='L1131'>                        <b>if</b> (cnt == NULL) <font color='red'>{</font>
<a name='L1132'>                                old_ctx = NULL;
<a name='L1133'>                                ret = NULL;
<a name='L1134'>                                <b>goto</b> label_oom;
<a name='L1135'>                        <font color='red'>}</font>
<a name='L1136'>                        <b>if</b> (<a href='../S/138.html#L280' title='Defined at 280 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>prof_promote</a> &amp;&amp; (<a href='../D/4441.html' title='Multiple defined in 2 places.'>uintptr_t</a>)cnt != (<a href='../D/4441.html' title='Multiple defined in 2 places.'>uintptr_t</a>)1U &amp;&amp;
<a name='L1137'>                            usize &lt;= SMALL_MAXCLASS) <font color='red'>{</font>
<a name='L1138'>                                ret = <a href='../S/138.html#L204' title='Defined at 204 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>iralloc</a>(ptr, SMALL_MAXCLASS+1, 0, 0,
<a name='L1139'>                                    <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>, <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>);
<a name='L1140'>                                <b>if</b> (ret != NULL)
<a name='L1141'>                                        <a href='../D/1638.html' title='Multiple defined in 2 places.'>arena_prof_promoted</a>(ret, usize);
<a name='L1142'>                                <b>else</b>
<a name='L1143'>                                        old_ctx = NULL;
<a name='L1144'>                        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1145'>                                ret = <a href='../S/138.html#L204' title='Defined at 204 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>iralloc</a>(ptr, size, 0, 0, <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>, <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>);
<a name='L1146'>                                <b>if</b> (ret == NULL)
<a name='L1147'>                                        old_ctx = NULL;
<a name='L1148'>                        <font color='red'>}</font>
<a name='L1149'>                <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1150'>                        <b>if</b> (config_stats || (config_valgrind &amp;&amp; <a href='../S/138.html#L258' title='Defined at 258 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_valgrind</a>))
<a name='L1151'>                                usize = <a href='../S/138.html#L309' title='Defined at 309 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>s2u</a>(size);
<a name='L1152'>                        ret = <a href='../S/138.html#L204' title='Defined at 204 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>iralloc</a>(ptr, size, 0, 0, <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>, <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>);
<a name='L1153'>                <font color='red'>}</font>
<a name='L1154'>
<a name='L1155'>label_oom:
<a name='L1156'>                <b>if</b> (ret == NULL) <font color='red'>{</font>
<a name='L1157'>                        <b>if</b> (config_xmalloc &amp;&amp; <a href='../S/138.html#L259' title='Defined at 259 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_xmalloc</a>) <font color='red'>{</font>
<a name='L1158'>                                <a href='../D/3296.html' title='Multiple defined in 2 places.'>malloc_write</a>("&lt;jemalloc&gt;: Error in realloc(): "
<a name='L1159'>                                    "out of memory\n");
<a name='L1160'>                                abort();
<a name='L1161'>                        <font color='red'>}</font>
<a name='L1162'>                        <a href='../D/4119.html' title='Multiple defined in 2 places.'>set_errno</a>(ENOMEM);
<a name='L1163'>                <font color='red'>}</font>
<a name='L1164'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1165'>                <i><font color='green'>/* realloc(NULL, size) is equivalent to malloc(size). */</font></i>
<a name='L1166'>                <b>if</b> (config_prof &amp;&amp; <a href='../S/138.html#L246' title='Defined at 246 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_prof</a>)
<a name='L1167'>                        old_ctx = NULL;
<a name='L1168'>                <b>if</b> (<a href='../S/213.html#L281' title='Defined at 281 in deps/jemalloc/src/jemalloc.c.'>malloc_init</a>()) <font color='red'>{</font>
<a name='L1169'>                        <b>if</b> (config_prof &amp;&amp; <a href='../S/138.html#L246' title='Defined at 246 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_prof</a>)
<a name='L1170'>                                cnt = NULL;
<a name='L1171'>                        ret = NULL;
<a name='L1172'>                <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1173'>                        <b>if</b> (config_prof &amp;&amp; <a href='../S/138.html#L246' title='Defined at 246 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_prof</a>) <font color='red'>{</font>
<a name='L1174'>                                usize = <a href='../S/138.html#L309' title='Defined at 309 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>s2u</a>(size);
<a name='L1175'>                                <a href='../S/141.html#L234' title='Defined at 234 in deps/jemalloc/include/jemalloc/internal/prof.h.'>PROF_ALLOC_PREP</a>(1, usize, cnt);
<a name='L1176'>                                <b>if</b> (cnt == NULL)
<a name='L1177'>                                        ret = NULL;
<a name='L1178'>                                <b>else</b> <font color='red'>{</font>
<a name='L1179'>                                        <b>if</b> (<a href='../S/138.html#L280' title='Defined at 280 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>prof_promote</a> &amp;&amp; (<a href='../D/4441.html' title='Multiple defined in 2 places.'>uintptr_t</a>)cnt !=
<a name='L1180'>                                            (<a href='../D/4441.html' title='Multiple defined in 2 places.'>uintptr_t</a>)1U &amp;&amp; usize &lt;=
<a name='L1181'>                                            SMALL_MAXCLASS) <font color='red'>{</font>
<a name='L1182'>                                                ret = <a href='../S/138.html#L198' title='Defined at 198 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>imalloc</a>(SMALL_MAXCLASS+1);
<a name='L1183'>                                                <b>if</b> (ret != NULL) <font color='red'>{</font>
<a name='L1184'>                                                        <a href='../D/1638.html' title='Multiple defined in 2 places.'>arena_prof_promoted</a>(ret,
<a name='L1185'>                                                            usize);
<a name='L1186'>                                                <font color='red'>}</font>
<a name='L1187'>                                        <font color='red'>}</font> <b>else</b>
<a name='L1188'>                                                ret = <a href='../S/138.html#L198' title='Defined at 198 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>imalloc</a>(size);
<a name='L1189'>                                <font color='red'>}</font>
<a name='L1190'>                        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1191'>                                <b>if</b> (config_stats || (config_valgrind &amp;&amp;
<a name='L1192'>                                    <a href='../S/138.html#L258' title='Defined at 258 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_valgrind</a>))
<a name='L1193'>                                        usize = <a href='../S/138.html#L309' title='Defined at 309 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>s2u</a>(size);
<a name='L1194'>                                ret = <a href='../S/138.html#L198' title='Defined at 198 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>imalloc</a>(size);
<a name='L1195'>                        <font color='red'>}</font>
<a name='L1196'>                <font color='red'>}</font>
<a name='L1197'>
<a name='L1198'>                <b>if</b> (ret == NULL) <font color='red'>{</font>
<a name='L1199'>                        <b>if</b> (config_xmalloc &amp;&amp; <a href='../S/138.html#L259' title='Defined at 259 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_xmalloc</a>) <font color='red'>{</font>
<a name='L1200'>                                <a href='../D/3296.html' title='Multiple defined in 2 places.'>malloc_write</a>("&lt;jemalloc&gt;: Error in realloc(): "
<a name='L1201'>                                    "out of memory\n");
<a name='L1202'>                                abort();
<a name='L1203'>                        <font color='red'>}</font>
<a name='L1204'>                        <a href='../D/4119.html' title='Multiple defined in 2 places.'>set_errno</a>(ENOMEM);
<a name='L1205'>                <font color='red'>}</font>
<a name='L1206'>        <font color='red'>}</font>
<a name='L1207'>
<a name='L1208'>label_return:
<a name='L1209'>        <b>if</b> (config_prof &amp;&amp; <a href='../S/138.html#L246' title='Defined at 246 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_prof</a>)
<a name='L1210'>                <a href='../D/3574.html' title='Multiple defined in 2 places.'>prof_realloc</a>(ret, usize, cnt, old_size, old_ctx);
<a name='L1211'>        <b>if</b> (config_stats &amp;&amp; ret != NULL) <font color='red'>{</font>
<a name='L1212'>                thread_allocated_t *ta;
<a name='L1213'>                <a href='../D/1684.html' title='Multiple defined in 3 places.'>assert</a>(usize == <a href='../S/138.html#L206' title='Defined at 206 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>isalloc</a>(ret, config_prof));
<a name='L1214'>                ta = <a href='../S/138.html#L365' title='Defined at 365 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>thread_allocated_tsd_get</a>();
<a name='L1215'>                ta-&gt;allocated += usize;
<a name='L1216'>                ta-&gt;deallocated += old_size;
<a name='L1217'>        <font color='red'>}</font>
<a name='L1218'>        <a href='../D/1267.html' title='Multiple defined in 2 places.'>UTRACE</a>(ptr, size, ret);
<a name='L1219'>        JEMALLOC_VALGRIND_REALLOC(ret, usize, ptr, old_size, old_rzsize, <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>);
<a name='L1220'>        <b>return</b> (ret);
<a name='L1221'><font color='red'>}</font>
<a name='L1222'>
<a name='L1223'><b>void</b>
<a name='L1224'><a href='../R/2287.html' title='Multiple refered from 4 places.'>je_free</a>(<b>void</b> *ptr)
<a name='L1225'><font color='red'>{</font>
<a name='L1226'>
<a name='L1227'>        <a href='../D/1267.html' title='Multiple defined in 2 places.'>UTRACE</a>(ptr, 0, 0);
<a name='L1228'>        <b>if</b> (ptr != NULL) <font color='red'>{</font>
<a name='L1229'>                size_t usize;
<a name='L1230'>                size_t rzsize <a href='../D/253.html' title='Multiple defined in 2 places.'>JEMALLOC_CC_SILENCE_INIT</a>(0);
<a name='L1231'>
<a name='L1232'>                <a href='../D/1684.html' title='Multiple defined in 3 places.'>assert</a>(malloc_initialized || <a href='../D/245.html' title='Multiple defined in 2 places.'>IS_INITIALIZER</a>);
<a name='L1233'>
<a name='L1234'>                <b>if</b> (config_prof &amp;&amp; <a href='../S/138.html#L246' title='Defined at 246 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_prof</a>) <font color='red'>{</font>
<a name='L1235'>                        usize = <a href='../S/138.html#L206' title='Defined at 206 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>isalloc</a>(ptr, config_prof);
<a name='L1236'>                        <a href='../D/3561.html' title='Multiple defined in 2 places.'>prof_free</a>(ptr, usize);
<a name='L1237'>                <font color='red'>}</font> <b>else</b> <b>if</b> (config_stats || config_valgrind)
<a name='L1238'>                        usize = <a href='../S/138.html#L206' title='Defined at 206 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>isalloc</a>(ptr, config_prof);
<a name='L1239'>                <b>if</b> (config_stats)
<a name='L1240'>                        <a href='../S/138.html#L365' title='Defined at 365 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>thread_allocated_tsd_get</a>()-&gt;deallocated += usize;
<a name='L1241'>                <b>if</b> (config_valgrind &amp;&amp; <a href='../S/138.html#L258' title='Defined at 258 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_valgrind</a>)
<a name='L1242'>                        rzsize = <a href='../S/138.html#L261' title='Defined at 261 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>p2rz</a>(ptr);
<a name='L1243'>                <a href='../S/138.html#L202' title='Defined at 202 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>iqalloc</a>(ptr);
<a name='L1244'>                JEMALLOC_VALGRIND_FREE(ptr, rzsize);
<a name='L1245'>        <font color='red'>}</font>
<a name='L1246'><font color='red'>}</font>
<a name='L1247'>
<a name='L1248'><i><font color='green'>/*</font></i>
<a name='L1249'><i><font color='green'> * End malloc(3)-compatible functions.</font></i>
<a name='L1250'><i><font color='green'> */</font></i>
<a name='L1251'><i><font color='green'>/******************************************************************************/</font></i>
<a name='L1252'><i><font color='green'>/*</font></i>
<a name='L1253'><i><font color='green'> * Begin non-standard override functions.</font></i>
<a name='L1254'><i><font color='green'> */</font></i>
<a name='L1255'>
<a name='L1256'><font color='darkred'>#ifdef</font> JEMALLOC_OVERRIDE_MEMALIGN
<a name='L1257'><b>void</b> *
<a name='L1258'><a href='../S/213.html#L1300' title='Refered from 1300 in deps/jemalloc/src/jemalloc.c.'>je_memalign</a>(size_t alignment, size_t size)
<a name='L1259'><font color='red'>{</font>
<a name='L1260'>        <b>void</b> *ret <a href='../D/253.html' title='Multiple defined in 2 places.'>JEMALLOC_CC_SILENCE_INIT</a>(NULL);
<a name='L1261'>        imemalign(&amp;ret, alignment, size, 1);
<a name='L1262'>        JEMALLOC_VALGRIND_MALLOC(ret != NULL, ret, size, <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>);
<a name='L1263'>        <b>return</b> (ret);
<a name='L1264'><font color='red'>}</font>
<a name='L1265'><font color='darkred'>#endif</font>
<a name='L1266'>
<a name='L1267'><font color='darkred'>#ifdef</font> JEMALLOC_OVERRIDE_VALLOC
<a name='L1268'><b>void</b> *
<a name='L1269'>je_valloc(size_t size)
<a name='L1270'><font color='red'>{</font>
<a name='L1271'>        <b>void</b> *ret <a href='../D/253.html' title='Multiple defined in 2 places.'>JEMALLOC_CC_SILENCE_INIT</a>(NULL);
<a name='L1272'>        imemalign(&amp;ret, PAGE, size, 1);
<a name='L1273'>        JEMALLOC_VALGRIND_MALLOC(ret != NULL, ret, size, <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>);
<a name='L1274'>        <b>return</b> (ret);
<a name='L1275'><font color='red'>}</font>
<a name='L1276'><font color='darkred'>#endif</font>
<a name='L1277'>
<a name='L1278'><i><font color='green'>/*</font></i>
<a name='L1279'><i><font color='green'> * is_malloc(je_malloc) is some macro magic to detect if jemalloc_defs.h has</font></i>
<a name='L1280'><i><font color='green'> * #define je_malloc malloc</font></i>
<a name='L1281'><i><font color='green'> */</font></i>
<a name='L1282'><font color='darkred'>#define</font> malloc_is_malloc 1
<a name='L1283'><font color='darkred'>#define</font> <a href='../S/213.html#L1284' title='Refered from 1284 in deps/jemalloc/src/jemalloc.c.'>is_malloc_</a>(a) malloc_is_ ## a
<a name='L1284'><font color='darkred'>#define</font> <a href='../S/213.html#L1286' title='Refered from 1286 in deps/jemalloc/src/jemalloc.c.'>is_malloc</a>(a) <a href='../S/213.html#L1283' title='Defined at 1283 in deps/jemalloc/src/jemalloc.c.'>is_malloc_</a>(a)
<a name='L1285'>
<a name='L1286'><font color='darkred'>#if</font> ((<a href='../S/213.html#L1284' title='Defined at 1284 in deps/jemalloc/src/jemalloc.c.'>is_malloc</a>(<a href='../S/213.html#L829' title='Defined at 829 in deps/jemalloc/src/jemalloc.c.'>je_malloc</a>) == 1) &amp;&amp; <b>defined</b>(__GLIBC__) &amp;&amp; !<b>defined</b>(__UCLIBC__))
<a name='L1287'><i><font color='green'>/*</font></i>
<a name='L1288'><i><font color='green'> * glibc provides the RTLD_DEEPBIND flag for dlopen which can make it possible</font></i>
<a name='L1289'><i><font color='green'> * to inconsistently reference libc's malloc(3)-compatible functions</font></i>
<a name='L1290'><i><font color='green'> * (https://bugzilla.mozilla.org/show_bug.cgi?id=493541).</font></i>
<a name='L1291'><i><font color='green'> *</font></i>
<a name='L1292'><i><font color='green'> * These definitions interpose hooks in glibc.  The functions are actually</font></i>
<a name='L1293'><i><font color='green'> * passed an extra argument for the caller return address, which will be</font></i>
<a name='L1294'><i><font color='green'> * ignored.</font></i>
<a name='L1295'><i><font color='green'> */</font></i>
<a name='L1296'>JEMALLOC_EXPORT <b>void</b> (* __free_hook)(<b>void</b> *ptr) = <a href='../S/213.html#L1224' title='Defined at 1224 in deps/jemalloc/src/jemalloc.c.'>je_free</a>;
<a name='L1297'>JEMALLOC_EXPORT <b>void</b> *(* __malloc_hook)(size_t size) = <a href='../S/213.html#L829' title='Defined at 829 in deps/jemalloc/src/jemalloc.c.'>je_malloc</a>;
<a name='L1298'>JEMALLOC_EXPORT <b>void</b> *(* __realloc_hook)(<b>void</b> *ptr, size_t size) = <a href='../S/213.html#L1077' title='Defined at 1077 in deps/jemalloc/src/jemalloc.c.'>je_realloc</a>;
<a name='L1299'>JEMALLOC_EXPORT <b>void</b> *(* __memalign_hook)(size_t alignment, size_t size) =
<a name='L1300'>    <a href='../S/213.html#L1258' title='Defined at 1258 in deps/jemalloc/src/jemalloc.c.'>je_memalign</a>;
<a name='L1301'><font color='darkred'>#endif</font>
<a name='L1302'>
<a name='L1303'><i><font color='green'>/*</font></i>
<a name='L1304'><i><font color='green'> * End non-standard override functions.</font></i>
<a name='L1305'><i><font color='green'> */</font></i>
<a name='L1306'><i><font color='green'>/******************************************************************************/</font></i>
<a name='L1307'><i><font color='green'>/*</font></i>
<a name='L1308'><i><font color='green'> * Begin non-standard functions.</font></i>
<a name='L1309'><i><font color='green'> */</font></i>
<a name='L1310'>
<a name='L1311'>size_t
<a name='L1312'><a href='../S/28.html#L53' title='Refered from 53 in src/zmalloc.h.'>je_malloc_usable_size</a>(JEMALLOC_USABLE_SIZE_CONST <b>void</b> *ptr)
<a name='L1313'><font color='red'>{</font>
<a name='L1314'>        size_t ret;
<a name='L1315'>
<a name='L1316'>        <a href='../D/1684.html' title='Multiple defined in 3 places.'>assert</a>(malloc_initialized || <a href='../D/245.html' title='Multiple defined in 2 places.'>IS_INITIALIZER</a>);
<a name='L1317'>
<a name='L1318'>        <b>if</b> (config_ivsalloc)
<a name='L1319'>                ret = <a href='../S/138.html#L208' title='Defined at 208 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>ivsalloc</a>(ptr, config_prof);
<a name='L1320'>        <b>else</b>
<a name='L1321'>                ret = (ptr != NULL) ? <a href='../S/138.html#L206' title='Defined at 206 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>isalloc</a>(ptr, config_prof) : 0;
<a name='L1322'>
<a name='L1323'>        <b>return</b> (ret);
<a name='L1324'><font color='red'>}</font>
<a name='L1325'>
<a name='L1326'><b>void</b>
<a name='L1327'><a href='../S/213.html#L236' title='Refered from 236 in deps/jemalloc/src/jemalloc.c.'>je_malloc_stats_print</a>(<b>void</b> (*write_cb)(<b>void</b> *, <b>const</b> <b>char</b> *), <b>void</b> *cbopaque,
<a name='L1328'>    <b>const</b> <b>char</b> *opts)
<a name='L1329'><font color='red'>{</font>
<a name='L1330'>
<a name='L1331'>        <a href='../D/4215.html' title='Multiple defined in 2 places.'>stats_print</a>(write_cb, cbopaque, opts);
<a name='L1332'><font color='red'>}</font>
<a name='L1333'>
<a name='L1334'><b>int</b>
<a name='L1335'><a href='../R/2288.html' title='Multiple refered from 8 places.'>je_mallctl</a>(<b>const</b> <b>char</b> *name, <b>void</b> *oldp, size_t *oldlenp, <b>void</b> *newp,
<a name='L1336'>    size_t newlen)
<a name='L1337'><font color='red'>{</font>
<a name='L1338'>
<a name='L1339'>        <b>if</b> (<a href='../S/213.html#L281' title='Defined at 281 in deps/jemalloc/src/jemalloc.c.'>malloc_init</a>())
<a name='L1340'>                <b>return</b> (EAGAIN);
<a name='L1341'>
<a name='L1342'>        <b>return</b> (<a href='../D/2004.html' title='Multiple defined in 2 places.'>ctl_byname</a>(name, oldp, oldlenp, newp, newlen));
<a name='L1343'><font color='red'>}</font>
<a name='L1344'>
<a name='L1345'><b>int</b>
<a name='L1346'><a href='../S/135.html#L95' title='Refered from 95 in deps/jemalloc/include/jemalloc/internal/ctl.h.'>je_mallctlnametomib</a>(<b>const</b> <b>char</b> *name, size_t *mibp, size_t *miblenp)
<a name='L1347'><font color='red'>{</font>
<a name='L1348'>
<a name='L1349'>        <b>if</b> (<a href='../S/213.html#L281' title='Defined at 281 in deps/jemalloc/src/jemalloc.c.'>malloc_init</a>())
<a name='L1350'>                <b>return</b> (EAGAIN);
<a name='L1351'>
<a name='L1352'>        <b>return</b> (<a href='../D/2015.html' title='Multiple defined in 2 places.'>ctl_nametomib</a>(name, mibp, miblenp));
<a name='L1353'><font color='red'>}</font>
<a name='L1354'>
<a name='L1355'><b>int</b>
<a name='L1356'><a href='../S/135.html#L103' title='Refered from 103 in deps/jemalloc/include/jemalloc/internal/ctl.h.'>je_mallctlbymib</a>(<b>const</b> size_t *mib, size_t miblen, <b>void</b> *oldp, size_t *oldlenp,
<a name='L1357'>  <b>void</b> *newp, size_t newlen)
<a name='L1358'><font color='red'>{</font>
<a name='L1359'>
<a name='L1360'>        <b>if</b> (<a href='../S/213.html#L281' title='Defined at 281 in deps/jemalloc/src/jemalloc.c.'>malloc_init</a>())
<a name='L1361'>                <b>return</b> (EAGAIN);
<a name='L1362'>
<a name='L1363'>        <b>return</b> (<a href='../D/2003.html' title='Multiple defined in 2 places.'>ctl_bymib</a>(mib, miblen, oldp, oldlenp, newp, newlen));
<a name='L1364'><font color='red'>}</font>
<a name='L1365'>
<a name='L1366'><i><font color='green'>/*</font></i>
<a name='L1367'><i><font color='green'> * End non-standard functions.</font></i>
<a name='L1368'><i><font color='green'> */</font></i>
<a name='L1369'><i><font color='green'>/******************************************************************************/</font></i>
<a name='L1370'><i><font color='green'>/*</font></i>
<a name='L1371'><i><font color='green'> * Begin experimental functions.</font></i>
<a name='L1372'><i><font color='green'> */</font></i>
<a name='L1373'><font color='darkred'>#ifdef</font> JEMALLOC_EXPERIMENTAL
<a name='L1374'>
<a name='L1375'>JEMALLOC_INLINE <b>void</b> *
<a name='L1376'><a href='../R/2180.html' title='Multiple refered from 4 places.'>iallocm</a>(size_t usize, size_t alignment, bool zero, bool try_tcache,
<a name='L1377'>    <a href='../S/146.html#L51' title='Defined at 51 in deps/jemalloc/include/jemalloc/internal/arena.h.'>arena_t</a> *arena)
<a name='L1378'><font color='red'>{</font>
<a name='L1379'>
<a name='L1380'>        <a href='../D/1684.html' title='Multiple defined in 3 places.'>assert</a>(usize == ((alignment == 0) ? <a href='../S/138.html#L309' title='Defined at 309 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>s2u</a>(usize) : <a href='../S/138.html#L310' title='Defined at 310 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>sa2u</a>(usize,
<a name='L1381'>            alignment)));
<a name='L1382'>
<a name='L1383'>        <b>if</b> (alignment != 0)
<a name='L1384'>                <b>return</b> (<a href='../S/138.html#L201' title='Defined at 201 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>ipallocx</a>(usize, alignment, zero, try_tcache, arena));
<a name='L1385'>        <b>else</b> <b>if</b> (zero)
<a name='L1386'>                <b>return</b> (<a href='../S/138.html#L195' title='Defined at 195 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>icallocx</a>(usize, try_tcache, arena));
<a name='L1387'>        <b>else</b>
<a name='L1388'>                <b>return</b> (<a href='../S/138.html#L199' title='Defined at 199 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>imallocx</a>(usize, try_tcache, arena));
<a name='L1389'><font color='red'>}</font>
<a name='L1390'>
<a name='L1391'><b>int</b>
<a name='L1392'>je_allocm(<b>void</b> **ptr, size_t *rsize, size_t size, <b>int</b> flags)
<a name='L1393'><font color='red'>{</font>
<a name='L1394'>        <b>void</b> *p;
<a name='L1395'>        size_t usize;
<a name='L1396'>        size_t alignment = (ZU(1) &lt;&lt; (flags &amp; ALLOCM_LG_ALIGN_MASK)
<a name='L1397'>            &amp; (SIZE_T_MAX-1));
<a name='L1398'>        <a href='../S/159.html#L10' title='Defined at 10 in deps/jemalloc/include/msvc_compat/stdbool.h.'>bool</a> zero = flags &amp; ALLOCM_ZERO;
<a name='L1399'>        <b>unsigned</b> arena_ind = ((<b>unsigned</b>)(flags &gt;&gt; 8)) - 1;
<a name='L1400'>        <a href='../S/146.html#L51' title='Defined at 51 in deps/jemalloc/include/jemalloc/internal/arena.h.'>arena_t</a> *arena;
<a name='L1401'>        <a href='../S/159.html#L10' title='Defined at 10 in deps/jemalloc/include/msvc_compat/stdbool.h.'>bool</a> try_tcache;
<a name='L1402'>
<a name='L1403'>        <a href='../D/1684.html' title='Multiple defined in 3 places.'>assert</a>(ptr != NULL);
<a name='L1404'>        <a href='../D/1684.html' title='Multiple defined in 3 places.'>assert</a>(size != 0);
<a name='L1405'>
<a name='L1406'>        <b>if</b> (<a href='../S/213.html#L281' title='Defined at 281 in deps/jemalloc/src/jemalloc.c.'>malloc_init</a>())
<a name='L1407'>                <b>goto</b> label_oom;
<a name='L1408'>
<a name='L1409'>        <b>if</b> (arena_ind != UINT_MAX) <font color='red'>{</font>
<a name='L1410'>                arena = <a href='../S/138.html#L55' title='Defined at 55 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas</a>[arena_ind];
<a name='L1411'>                try_tcache = <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>;
<a name='L1412'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1413'>                arena = NULL;
<a name='L1414'>                try_tcache = <a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>;
<a name='L1415'>        <font color='red'>}</font>
<a name='L1416'>
<a name='L1417'>        usize = (alignment == 0) ? <a href='../S/138.html#L309' title='Defined at 309 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>s2u</a>(size) : <a href='../S/138.html#L310' title='Defined at 310 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>sa2u</a>(size, alignment);
<a name='L1418'>        <b>if</b> (usize == 0)
<a name='L1419'>                <b>goto</b> label_oom;
<a name='L1420'>
<a name='L1421'>        <b>if</b> (config_prof &amp;&amp; <a href='../S/138.html#L246' title='Defined at 246 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_prof</a>) <font color='red'>{</font>
<a name='L1422'>                <a href='../S/141.html#L6' title='Defined at 6 in deps/jemalloc/include/jemalloc/internal/prof.h.'>prof_thr_cnt_t</a> *cnt;
<a name='L1423'>
<a name='L1424'>                <a href='../S/141.html#L234' title='Defined at 234 in deps/jemalloc/include/jemalloc/internal/prof.h.'>PROF_ALLOC_PREP</a>(1, usize, cnt);
<a name='L1425'>                <b>if</b> (cnt == NULL)
<a name='L1426'>                        <b>goto</b> label_oom;
<a name='L1427'>                <b>if</b> (<a href='../S/138.html#L280' title='Defined at 280 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>prof_promote</a> &amp;&amp; (<a href='../D/4441.html' title='Multiple defined in 2 places.'>uintptr_t</a>)cnt != (<a href='../D/4441.html' title='Multiple defined in 2 places.'>uintptr_t</a>)1U &amp;&amp; usize &lt;=
<a name='L1428'>                    SMALL_MAXCLASS) <font color='red'>{</font>
<a name='L1429'>                        size_t usize_promoted = (alignment == 0) ?
<a name='L1430'>                            <a href='../S/138.html#L309' title='Defined at 309 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>s2u</a>(SMALL_MAXCLASS+1) : <a href='../S/138.html#L310' title='Defined at 310 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>sa2u</a>(SMALL_MAXCLASS+1,
<a name='L1431'>                            alignment);
<a name='L1432'>                        <a href='../D/1684.html' title='Multiple defined in 3 places.'>assert</a>(usize_promoted != 0);
<a name='L1433'>                        p = <a href='../D/2460.html' title='Multiple defined in 2 places.'>iallocm</a>(usize_promoted, alignment, zero,
<a name='L1434'>                            try_tcache, arena);
<a name='L1435'>                        <b>if</b> (p == NULL)
<a name='L1436'>                                <b>goto</b> label_oom;
<a name='L1437'>                        <a href='../D/1638.html' title='Multiple defined in 2 places.'>arena_prof_promoted</a>(p, usize);
<a name='L1438'>                <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1439'>                        p = <a href='../D/2460.html' title='Multiple defined in 2 places.'>iallocm</a>(usize, alignment, zero, try_tcache, arena);
<a name='L1440'>                        <b>if</b> (p == NULL)
<a name='L1441'>                                <b>goto</b> label_oom;
<a name='L1442'>                <font color='red'>}</font>
<a name='L1443'>                <a href='../D/3567.html' title='Multiple defined in 2 places.'>prof_malloc</a>(p, usize, cnt);
<a name='L1444'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1445'>                p = <a href='../D/2460.html' title='Multiple defined in 2 places.'>iallocm</a>(usize, alignment, zero, try_tcache, arena);
<a name='L1446'>                <b>if</b> (p == NULL)
<a name='L1447'>                        <b>goto</b> label_oom;
<a name='L1448'>        <font color='red'>}</font>
<a name='L1449'>        <b>if</b> (rsize != NULL)
<a name='L1450'>                *rsize = usize;
<a name='L1451'>
<a name='L1452'>        *ptr = p;
<a name='L1453'>        <b>if</b> (config_stats) <font color='red'>{</font>
<a name='L1454'>                <a href='../D/1684.html' title='Multiple defined in 3 places.'>assert</a>(usize == <a href='../S/138.html#L206' title='Defined at 206 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>isalloc</a>(p, config_prof));
<a name='L1455'>                <a href='../S/138.html#L365' title='Defined at 365 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>thread_allocated_tsd_get</a>()-&gt;allocated += usize;
<a name='L1456'>        <font color='red'>}</font>
<a name='L1457'>        <a href='../D/1267.html' title='Multiple defined in 2 places.'>UTRACE</a>(0, size, p);
<a name='L1458'>        JEMALLOC_VALGRIND_MALLOC(<a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>, p, usize, zero);
<a name='L1459'>        <b>return</b> (ALLOCM_SUCCESS);
<a name='L1460'>label_oom:
<a name='L1461'>        <b>if</b> (config_xmalloc &amp;&amp; <a href='../S/138.html#L259' title='Defined at 259 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_xmalloc</a>) <font color='red'>{</font>
<a name='L1462'>                <a href='../D/3296.html' title='Multiple defined in 2 places.'>malloc_write</a>("&lt;jemalloc&gt;: Error in allocm(): "
<a name='L1463'>                    "out of memory\n");
<a name='L1464'>                abort();
<a name='L1465'>        <font color='red'>}</font>
<a name='L1466'>        *ptr = NULL;
<a name='L1467'>        <a href='../D/1267.html' title='Multiple defined in 2 places.'>UTRACE</a>(0, size, 0);
<a name='L1468'>        <b>return</b> (ALLOCM_ERR_OOM);
<a name='L1469'><font color='red'>}</font>
<a name='L1470'>
<a name='L1471'><b>int</b>
<a name='L1472'>je_rallocm(<b>void</b> **ptr, size_t *rsize, size_t size, size_t extra, <b>int</b> flags)
<a name='L1473'><font color='red'>{</font>
<a name='L1474'>        <b>void</b> *p, *q;
<a name='L1475'>        size_t usize;
<a name='L1476'>        size_t old_size;
<a name='L1477'>        size_t old_rzsize <a href='../D/253.html' title='Multiple defined in 2 places.'>JEMALLOC_CC_SILENCE_INIT</a>(0);
<a name='L1478'>        size_t alignment = (ZU(1) &lt;&lt; (flags &amp; ALLOCM_LG_ALIGN_MASK)
<a name='L1479'>            &amp; (SIZE_T_MAX-1));
<a name='L1480'>        <a href='../S/159.html#L10' title='Defined at 10 in deps/jemalloc/include/msvc_compat/stdbool.h.'>bool</a> zero = flags &amp; ALLOCM_ZERO;
<a name='L1481'>        <a href='../S/159.html#L10' title='Defined at 10 in deps/jemalloc/include/msvc_compat/stdbool.h.'>bool</a> no_move = flags &amp; ALLOCM_NO_MOVE;
<a name='L1482'>        <b>unsigned</b> arena_ind = ((<b>unsigned</b>)(flags &gt;&gt; 8)) - 1;
<a name='L1483'>        <a href='../S/159.html#L10' title='Defined at 10 in deps/jemalloc/include/msvc_compat/stdbool.h.'>bool</a> try_tcache_alloc, try_tcache_dalloc;
<a name='L1484'>        <a href='../S/146.html#L51' title='Defined at 51 in deps/jemalloc/include/jemalloc/internal/arena.h.'>arena_t</a> *arena;
<a name='L1485'>
<a name='L1486'>        <a href='../D/1684.html' title='Multiple defined in 3 places.'>assert</a>(ptr != NULL);
<a name='L1487'>        <a href='../D/1684.html' title='Multiple defined in 3 places.'>assert</a>(*ptr != NULL);
<a name='L1488'>        <a href='../D/1684.html' title='Multiple defined in 3 places.'>assert</a>(size != 0);
<a name='L1489'>        <a href='../D/1684.html' title='Multiple defined in 3 places.'>assert</a>(SIZE_T_MAX - size &gt;= extra);
<a name='L1490'>        <a href='../D/1684.html' title='Multiple defined in 3 places.'>assert</a>(malloc_initialized || <a href='../D/245.html' title='Multiple defined in 2 places.'>IS_INITIALIZER</a>);
<a name='L1491'>
<a name='L1492'>        <b>if</b> (arena_ind != UINT_MAX) <font color='red'>{</font>
<a name='L1493'>                <a href='../S/146.html#L47' title='Defined at 47 in deps/jemalloc/include/jemalloc/internal/arena.h.'>arena_chunk_t</a> *<a href='../S/304.html#L1325' title='Defined at 1325 in deps/lua/src/lparser.c.'>chunk</a>;
<a name='L1494'>                try_tcache_alloc = <a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>;
<a name='L1495'>                <a href='../S/304.html#L1325' title='Defined at 1325 in deps/lua/src/lparser.c.'>chunk</a> = (<a href='../S/146.html#L47' title='Defined at 47 in deps/jemalloc/include/jemalloc/internal/arena.h.'>arena_chunk_t</a> *)<a href='../S/142.html#L11' title='Defined at 11 in deps/jemalloc/include/jemalloc/internal/chunk.h.'>CHUNK_ADDR2BASE</a>(*ptr);
<a name='L1496'>                try_tcache_dalloc = (<a href='../S/304.html#L1325' title='Defined at 1325 in deps/lua/src/lparser.c.'>chunk</a> == *ptr || <a href='../S/304.html#L1325' title='Defined at 1325 in deps/lua/src/lparser.c.'>chunk</a>-&gt;arena !=
<a name='L1497'>                    <a href='../S/138.html#L55' title='Defined at 55 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas</a>[arena_ind]);
<a name='L1498'>                arena = <a href='../S/138.html#L55' title='Defined at 55 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas</a>[arena_ind];
<a name='L1499'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1500'>                try_tcache_alloc = <a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>;
<a name='L1501'>                try_tcache_dalloc = <a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>;
<a name='L1502'>                arena = NULL;
<a name='L1503'>        <font color='red'>}</font>
<a name='L1504'>
<a name='L1505'>        p = *ptr;
<a name='L1506'>        <b>if</b> (config_prof &amp;&amp; <a href='../S/138.html#L246' title='Defined at 246 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_prof</a>) <font color='red'>{</font>
<a name='L1507'>                <a href='../S/141.html#L6' title='Defined at 6 in deps/jemalloc/include/jemalloc/internal/prof.h.'>prof_thr_cnt_t</a> *cnt;
<a name='L1508'>
<a name='L1509'>                <i><font color='green'>/*</font></i>
<a name='L1510'><i><font color='green'>                 * usize isn't knowable before iralloc() returns when extra is</font></i>
<a name='L1511'><i><font color='green'>                 * non-zero.  Therefore, compute its maximum possible value and</font></i>
<a name='L1512'><i><font color='green'>                 * use that in PROF_ALLOC_PREP() to decide whether to capture a</font></i>
<a name='L1513'><i><font color='green'>                 * backtrace.  prof_realloc() will use the actual usize to</font></i>
<a name='L1514'><i><font color='green'>                 * decide whether to sample.</font></i>
<a name='L1515'><i><font color='green'>                 */</font></i>
<a name='L1516'>                size_t max_usize = (alignment == 0) ? <a href='../S/138.html#L309' title='Defined at 309 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>s2u</a>(size+extra) :
<a name='L1517'>                    <a href='../S/138.html#L310' title='Defined at 310 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>sa2u</a>(size+extra, alignment);
<a name='L1518'>                <a href='../S/141.html#L7' title='Defined at 7 in deps/jemalloc/include/jemalloc/internal/prof.h.'>prof_ctx_t</a> *old_ctx = <a href='../D/3546.html' title='Multiple defined in 2 places.'>prof_ctx_get</a>(p);
<a name='L1519'>                old_size = <a href='../S/138.html#L206' title='Defined at 206 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>isalloc</a>(p, <a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>);
<a name='L1520'>                <b>if</b> (config_valgrind &amp;&amp; <a href='../S/138.html#L258' title='Defined at 258 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_valgrind</a>)
<a name='L1521'>                        old_rzsize = <a href='../S/138.html#L261' title='Defined at 261 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>p2rz</a>(p);
<a name='L1522'>                <a href='../S/141.html#L234' title='Defined at 234 in deps/jemalloc/include/jemalloc/internal/prof.h.'>PROF_ALLOC_PREP</a>(1, max_usize, cnt);
<a name='L1523'>                <b>if</b> (cnt == NULL)
<a name='L1524'>                        <b>goto</b> label_oom;
<a name='L1525'>                <i><font color='green'>/*</font></i>
<a name='L1526'><i><font color='green'>                 * Use minimum usize to determine whether promotion may happen.</font></i>
<a name='L1527'><i><font color='green'>                 */</font></i>
<a name='L1528'>                <b>if</b> (<a href='../S/138.html#L280' title='Defined at 280 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>prof_promote</a> &amp;&amp; (<a href='../D/4441.html' title='Multiple defined in 2 places.'>uintptr_t</a>)cnt != (<a href='../D/4441.html' title='Multiple defined in 2 places.'>uintptr_t</a>)1U
<a name='L1529'>                    &amp;&amp; ((alignment == 0) ? <a href='../S/138.html#L309' title='Defined at 309 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>s2u</a>(size) : <a href='../S/138.html#L310' title='Defined at 310 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>sa2u</a>(size, alignment))
<a name='L1530'>                    &lt;= SMALL_MAXCLASS) <font color='red'>{</font>
<a name='L1531'>                        q = <a href='../S/138.html#L205' title='Defined at 205 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>irallocx</a>(p, SMALL_MAXCLASS+1, (SMALL_MAXCLASS+1 &gt;=
<a name='L1532'>                            size+extra) ? 0 : size+extra - (SMALL_MAXCLASS+1),
<a name='L1533'>                            alignment, zero, no_move, try_tcache_alloc,
<a name='L1534'>                            try_tcache_dalloc, arena);
<a name='L1535'>                        <b>if</b> (q == NULL)
<a name='L1536'>                                <b>goto</b> label_err;
<a name='L1537'>                        <b>if</b> (max_usize &lt; PAGE) <font color='red'>{</font>
<a name='L1538'>                                usize = max_usize;
<a name='L1539'>                                <a href='../D/1638.html' title='Multiple defined in 2 places.'>arena_prof_promoted</a>(q, usize);
<a name='L1540'>                        <font color='red'>}</font> <b>else</b>
<a name='L1541'>                                usize = <a href='../S/138.html#L206' title='Defined at 206 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>isalloc</a>(q, config_prof);
<a name='L1542'>                <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1543'>                        q = <a href='../S/138.html#L205' title='Defined at 205 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>irallocx</a>(p, size, extra, alignment, zero, no_move,
<a name='L1544'>                            try_tcache_alloc, try_tcache_dalloc, arena);
<a name='L1545'>                        <b>if</b> (q == NULL)
<a name='L1546'>                                <b>goto</b> label_err;
<a name='L1547'>                        usize = <a href='../S/138.html#L206' title='Defined at 206 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>isalloc</a>(q, config_prof);
<a name='L1548'>                <font color='red'>}</font>
<a name='L1549'>                <a href='../D/3574.html' title='Multiple defined in 2 places.'>prof_realloc</a>(q, usize, cnt, old_size, old_ctx);
<a name='L1550'>                <b>if</b> (rsize != NULL)
<a name='L1551'>                        *rsize = usize;
<a name='L1552'>        <font color='red'>}</font> <b>else</b> <font color='red'>{</font>
<a name='L1553'>                <b>if</b> (config_stats) <font color='red'>{</font>
<a name='L1554'>                        old_size = <a href='../S/138.html#L206' title='Defined at 206 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>isalloc</a>(p, <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>);
<a name='L1555'>                        <b>if</b> (config_valgrind &amp;&amp; <a href='../S/138.html#L258' title='Defined at 258 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_valgrind</a>)
<a name='L1556'>                                old_rzsize = <a href='../S/138.html#L367' title='Defined at 367 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>u2rz</a>(old_size);
<a name='L1557'>                <font color='red'>}</font> <b>else</b> <b>if</b> (config_valgrind &amp;&amp; <a href='../S/138.html#L258' title='Defined at 258 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_valgrind</a>) <font color='red'>{</font>
<a name='L1558'>                        old_size = <a href='../S/138.html#L206' title='Defined at 206 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>isalloc</a>(p, <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>);
<a name='L1559'>                        old_rzsize = <a href='../S/138.html#L367' title='Defined at 367 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>u2rz</a>(old_size);
<a name='L1560'>                <font color='red'>}</font>
<a name='L1561'>                q = <a href='../S/138.html#L205' title='Defined at 205 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>irallocx</a>(p, size, extra, alignment, zero, no_move,
<a name='L1562'>                    try_tcache_alloc, try_tcache_dalloc, arena);
<a name='L1563'>                <b>if</b> (q == NULL)
<a name='L1564'>                        <b>goto</b> label_err;
<a name='L1565'>                <b>if</b> (config_stats)
<a name='L1566'>                        usize = <a href='../S/138.html#L206' title='Defined at 206 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>isalloc</a>(q, config_prof);
<a name='L1567'>                <b>if</b> (rsize != NULL) <font color='red'>{</font>
<a name='L1568'>                        <b>if</b> (config_stats == <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>)
<a name='L1569'>                                usize = <a href='../S/138.html#L206' title='Defined at 206 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>isalloc</a>(q, config_prof);
<a name='L1570'>                        *rsize = usize;
<a name='L1571'>                <font color='red'>}</font>
<a name='L1572'>        <font color='red'>}</font>
<a name='L1573'>
<a name='L1574'>        *ptr = q;
<a name='L1575'>        <b>if</b> (config_stats) <font color='red'>{</font>
<a name='L1576'>                thread_allocated_t *ta;
<a name='L1577'>                ta = <a href='../S/138.html#L365' title='Defined at 365 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>thread_allocated_tsd_get</a>();
<a name='L1578'>                ta-&gt;allocated += usize;
<a name='L1579'>                ta-&gt;deallocated += old_size;
<a name='L1580'>        <font color='red'>}</font>
<a name='L1581'>        <a href='../D/1267.html' title='Multiple defined in 2 places.'>UTRACE</a>(p, size, q);
<a name='L1582'>        JEMALLOC_VALGRIND_REALLOC(q, usize, p, old_size, old_rzsize, zero);
<a name='L1583'>        <b>return</b> (ALLOCM_SUCCESS);
<a name='L1584'>label_err:
<a name='L1585'>        <b>if</b> (no_move) <font color='red'>{</font>
<a name='L1586'>                <a href='../D/1267.html' title='Multiple defined in 2 places.'>UTRACE</a>(p, size, q);
<a name='L1587'>                <b>return</b> (ALLOCM_ERR_NOT_MOVED);
<a name='L1588'>        <font color='red'>}</font>
<a name='L1589'>label_oom:
<a name='L1590'>        <b>if</b> (config_xmalloc &amp;&amp; <a href='../S/138.html#L259' title='Defined at 259 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_xmalloc</a>) <font color='red'>{</font>
<a name='L1591'>                <a href='../D/3296.html' title='Multiple defined in 2 places.'>malloc_write</a>("&lt;jemalloc&gt;: Error in rallocm(): "
<a name='L1592'>                    "out of memory\n");
<a name='L1593'>                abort();
<a name='L1594'>        <font color='red'>}</font>
<a name='L1595'>        <a href='../D/1267.html' title='Multiple defined in 2 places.'>UTRACE</a>(p, size, 0);
<a name='L1596'>        <b>return</b> (ALLOCM_ERR_OOM);
<a name='L1597'><font color='red'>}</font>
<a name='L1598'>
<a name='L1599'><b>int</b>
<a name='L1600'>je_sallocm(<b>const</b> <b>void</b> *ptr, size_t *rsize, <b>int</b> flags)
<a name='L1601'><font color='red'>{</font>
<a name='L1602'>        size_t sz;
<a name='L1603'>
<a name='L1604'>        <a href='../D/1684.html' title='Multiple defined in 3 places.'>assert</a>(malloc_initialized || <a href='../D/245.html' title='Multiple defined in 2 places.'>IS_INITIALIZER</a>);
<a name='L1605'>
<a name='L1606'>        <b>if</b> (config_ivsalloc)
<a name='L1607'>                sz = <a href='../S/138.html#L208' title='Defined at 208 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>ivsalloc</a>(ptr, config_prof);
<a name='L1608'>        <b>else</b> <font color='red'>{</font>
<a name='L1609'>                <a href='../D/1684.html' title='Multiple defined in 3 places.'>assert</a>(ptr != NULL);
<a name='L1610'>                sz = <a href='../S/138.html#L206' title='Defined at 206 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>isalloc</a>(ptr, config_prof);
<a name='L1611'>        <font color='red'>}</font>
<a name='L1612'>        <a href='../D/1684.html' title='Multiple defined in 3 places.'>assert</a>(rsize != NULL);
<a name='L1613'>        *rsize = sz;
<a name='L1614'>
<a name='L1615'>        <b>return</b> (ALLOCM_SUCCESS);
<a name='L1616'><font color='red'>}</font>
<a name='L1617'>
<a name='L1618'><b>int</b>
<a name='L1619'>je_dallocm(<b>void</b> *ptr, <b>int</b> flags)
<a name='L1620'><font color='red'>{</font>
<a name='L1621'>        size_t usize;
<a name='L1622'>        size_t rzsize <a href='../D/253.html' title='Multiple defined in 2 places.'>JEMALLOC_CC_SILENCE_INIT</a>(0);
<a name='L1623'>        <b>unsigned</b> arena_ind = ((<b>unsigned</b>)(flags &gt;&gt; 8)) - 1;
<a name='L1624'>        <a href='../S/159.html#L10' title='Defined at 10 in deps/jemalloc/include/msvc_compat/stdbool.h.'>bool</a> try_tcache;
<a name='L1625'>
<a name='L1626'>        <a href='../D/1684.html' title='Multiple defined in 3 places.'>assert</a>(ptr != NULL);
<a name='L1627'>        <a href='../D/1684.html' title='Multiple defined in 3 places.'>assert</a>(malloc_initialized || <a href='../D/245.html' title='Multiple defined in 2 places.'>IS_INITIALIZER</a>);
<a name='L1628'>
<a name='L1629'>        <b>if</b> (arena_ind != UINT_MAX) <font color='red'>{</font>
<a name='L1630'>                <a href='../S/146.html#L47' title='Defined at 47 in deps/jemalloc/include/jemalloc/internal/arena.h.'>arena_chunk_t</a> *<a href='../S/304.html#L1325' title='Defined at 1325 in deps/lua/src/lparser.c.'>chunk</a> = (<a href='../S/146.html#L47' title='Defined at 47 in deps/jemalloc/include/jemalloc/internal/arena.h.'>arena_chunk_t</a> *)<a href='../S/142.html#L11' title='Defined at 11 in deps/jemalloc/include/jemalloc/internal/chunk.h.'>CHUNK_ADDR2BASE</a>(ptr);
<a name='L1631'>                try_tcache = (<a href='../S/304.html#L1325' title='Defined at 1325 in deps/lua/src/lparser.c.'>chunk</a> == ptr || <a href='../S/304.html#L1325' title='Defined at 1325 in deps/lua/src/lparser.c.'>chunk</a>-&gt;arena !=
<a name='L1632'>                    <a href='../S/138.html#L55' title='Defined at 55 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas</a>[arena_ind]);
<a name='L1633'>        <font color='red'>}</font> <b>else</b>
<a name='L1634'>                try_tcache = <a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>;
<a name='L1635'>
<a name='L1636'>        <a href='../D/1267.html' title='Multiple defined in 2 places.'>UTRACE</a>(ptr, 0, 0);
<a name='L1637'>        <b>if</b> (config_stats || config_valgrind)
<a name='L1638'>                usize = <a href='../S/138.html#L206' title='Defined at 206 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>isalloc</a>(ptr, config_prof);
<a name='L1639'>        <b>if</b> (config_prof &amp;&amp; <a href='../S/138.html#L246' title='Defined at 246 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_prof</a>) <font color='red'>{</font>
<a name='L1640'>                <b>if</b> (config_stats == <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a> &amp;&amp; config_valgrind == <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>)
<a name='L1641'>                        usize = <a href='../S/138.html#L206' title='Defined at 206 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>isalloc</a>(ptr, config_prof);
<a name='L1642'>                <a href='../D/3561.html' title='Multiple defined in 2 places.'>prof_free</a>(ptr, usize);
<a name='L1643'>        <font color='red'>}</font>
<a name='L1644'>        <b>if</b> (config_stats)
<a name='L1645'>                <a href='../S/138.html#L365' title='Defined at 365 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>thread_allocated_tsd_get</a>()-&gt;deallocated += usize;
<a name='L1646'>        <b>if</b> (config_valgrind &amp;&amp; <a href='../S/138.html#L258' title='Defined at 258 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>opt_valgrind</a>)
<a name='L1647'>                rzsize = <a href='../S/138.html#L261' title='Defined at 261 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>p2rz</a>(ptr);
<a name='L1648'>        <a href='../S/138.html#L203' title='Defined at 203 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>iqallocx</a>(ptr, try_tcache);
<a name='L1649'>        JEMALLOC_VALGRIND_FREE(ptr, rzsize);
<a name='L1650'>
<a name='L1651'>        <b>return</b> (ALLOCM_SUCCESS);
<a name='L1652'><font color='red'>}</font>
<a name='L1653'>
<a name='L1654'><b>int</b>
<a name='L1655'>je_nallocm(size_t *rsize, size_t size, <b>int</b> flags)
<a name='L1656'><font color='red'>{</font>
<a name='L1657'>        size_t usize;
<a name='L1658'>        size_t alignment = (ZU(1) &lt;&lt; (flags &amp; ALLOCM_LG_ALIGN_MASK)
<a name='L1659'>            &amp; (SIZE_T_MAX-1));
<a name='L1660'>
<a name='L1661'>        <a href='../D/1684.html' title='Multiple defined in 3 places.'>assert</a>(size != 0);
<a name='L1662'>
<a name='L1663'>        <b>if</b> (<a href='../S/213.html#L281' title='Defined at 281 in deps/jemalloc/src/jemalloc.c.'>malloc_init</a>())
<a name='L1664'>                <b>return</b> (ALLOCM_ERR_OOM);
<a name='L1665'>
<a name='L1666'>        usize = (alignment == 0) ? <a href='../S/138.html#L309' title='Defined at 309 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>s2u</a>(size) : <a href='../S/138.html#L310' title='Defined at 310 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>sa2u</a>(size, alignment);
<a name='L1667'>        <b>if</b> (usize == 0)
<a name='L1668'>                <b>return</b> (ALLOCM_ERR_OOM);
<a name='L1669'>
<a name='L1670'>        <b>if</b> (rsize != NULL)
<a name='L1671'>                *rsize = usize;
<a name='L1672'>        <b>return</b> (ALLOCM_SUCCESS);
<a name='L1673'><font color='red'>}</font>
<a name='L1674'>
<a name='L1675'><font color='darkred'>#endif</font>
<a name='L1676'><i><font color='green'>/*</font></i>
<a name='L1677'><i><font color='green'> * End experimental functions.</font></i>
<a name='L1678'><i><font color='green'> */</font></i>
<a name='L1679'><i><font color='green'>/******************************************************************************/</font></i>
<a name='L1680'><i><font color='green'>/*</font></i>
<a name='L1681'><i><font color='green'> * The following functions are used by threading libraries for protection of</font></i>
<a name='L1682'><i><font color='green'> * malloc during fork().</font></i>
<a name='L1683'><i><font color='green'> */</font></i>
<a name='L1684'>
<a name='L1685'><i><font color='green'>/*</font></i>
<a name='L1686'><i><font color='green'> * If an application creates a thread before doing any allocation in the main</font></i>
<a name='L1687'><i><font color='green'> * thread, then calls fork(2) in the main thread followed by memory allocation</font></i>
<a name='L1688'><i><font color='green'> * in the child process, a race can occur that results in deadlock within the</font></i>
<a name='L1689'><i><font color='green'> * child: the main thread may have forked while the created thread had</font></i>
<a name='L1690'><i><font color='green'> * partially initialized the allocator.  Ordinarily jemalloc prevents</font></i>
<a name='L1691'><i><font color='green'> * fork/malloc races via the following functions it registers during</font></i>
<a name='L1692'><i><font color='green'> * initialization using pthread_atfork(), but of course that does no good if</font></i>
<a name='L1693'><i><font color='green'> * the allocator isn't fully initialized at fork time.  The following library</font></i>
<a name='L1694'><i><font color='green'> * constructor is a partial solution to this problem.  It may still possible to</font></i>
<a name='L1695'><i><font color='green'> * trigger the deadlock described above, but doing so would involve forking via</font></i>
<a name='L1696'><i><font color='green'> * a library constructor that runs before jemalloc's runs.</font></i>
<a name='L1697'><i><font color='green'> */</font></i>
<a name='L1698'><a href='../R/219.html' title='Multiple refered from 11 places.'>JEMALLOC_ATTR</a>(constructor)
<a name='L1699'><b>static</b> <b>void</b>
<a name='L1700'>jemalloc_constructor(<b>void</b>)
<a name='L1701'><font color='red'>{</font>
<a name='L1702'>
<a name='L1703'>        <a href='../S/213.html#L281' title='Defined at 281 in deps/jemalloc/src/jemalloc.c.'>malloc_init</a>();
<a name='L1704'><font color='red'>}</font>
<a name='L1705'>
<a name='L1706'><font color='darkred'>#ifndef</font> JEMALLOC_MUTEX_INIT_CB
<a name='L1707'><b>void</b>
<a name='L1708'><a href='../R/2300.html' title='Multiple refered from 3 places.'>jemalloc_prefork</a>(<b>void</b>)
<a name='L1709'><font color='darkred'>#else</font>
<a name='L1710'>JEMALLOC_EXPORT <b>void</b>
<a name='L1711'>_malloc_prefork(<b>void</b>)
<a name='L1712'><font color='darkred'>#endif</font>
<a name='L1713'><font color='red'>{</font>
<a name='L1714'>        <b>unsigned</b> i;
<a name='L1715'>
<a name='L1716'><font color='darkred'>#ifdef</font> JEMALLOC_MUTEX_INIT_CB
<a name='L1717'>        <b>if</b> (malloc_initialized == <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>)
<a name='L1718'>                <b>return</b>;
<a name='L1719'><font color='darkred'>#endif</font>
<a name='L1720'>        <a href='../D/1684.html' title='Multiple defined in 3 places.'>assert</a>(malloc_initialized);
<a name='L1721'>
<a name='L1722'>        <i><font color='green'>/* Acquire all mutexes in a safe order. */</font></i>
<a name='L1723'>        <a href='../D/2020.html' title='Multiple defined in 2 places.'>ctl_prefork</a>();
<a name='L1724'>        <a href='../D/3276.html' title='Multiple defined in 2 places.'>malloc_mutex_prefork</a>(&amp;<a href='../S/138.html#L60' title='Defined at 60 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas_lock</a>);
<a name='L1725'>        <b>for</b> (i = 0; i &lt; <a href='../S/138.html#L234' title='Defined at 234 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>narenas_total</a>; i++) <font color='red'>{</font>
<a name='L1726'>                <b>if</b> (<a href='../S/138.html#L55' title='Defined at 55 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas</a>[i] != NULL)
<a name='L1727'>                        <a href='../D/1634.html' title='Multiple defined in 2 places.'>arena_prefork</a>(<a href='../S/138.html#L55' title='Defined at 55 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas</a>[i]);
<a name='L1728'>        <font color='red'>}</font>
<a name='L1729'>        <a href='../D/3571.html' title='Multiple defined in 2 places.'>prof_prefork</a>();
<a name='L1730'>        <a href='../D/1856.html' title='Multiple defined in 2 places.'>chunk_prefork</a>();
<a name='L1731'>        <a href='../D/1724.html' title='Multiple defined in 2 places.'>base_prefork</a>();
<a name='L1732'>        <a href='../D/2449.html' title='Multiple defined in 2 places.'>huge_prefork</a>();
<a name='L1733'><font color='red'>}</font>
<a name='L1734'>
<a name='L1735'><font color='darkred'>#ifndef</font> JEMALLOC_MUTEX_INIT_CB
<a name='L1736'><b>void</b>
<a name='L1737'><a href='../R/2299.html' title='Multiple refered from 3 places.'>jemalloc_postfork_parent</a>(<b>void</b>)
<a name='L1738'><font color='darkred'>#else</font>
<a name='L1739'>JEMALLOC_EXPORT <b>void</b>
<a name='L1740'>_malloc_postfork(<b>void</b>)
<a name='L1741'><font color='darkred'>#endif</font>
<a name='L1742'><font color='red'>{</font>
<a name='L1743'>        <b>unsigned</b> i;
<a name='L1744'>
<a name='L1745'><font color='darkred'>#ifdef</font> JEMALLOC_MUTEX_INIT_CB
<a name='L1746'>        <b>if</b> (malloc_initialized == <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>)
<a name='L1747'>                <b>return</b>;
<a name='L1748'><font color='darkred'>#endif</font>
<a name='L1749'>        <a href='../D/1684.html' title='Multiple defined in 3 places.'>assert</a>(malloc_initialized);
<a name='L1750'>
<a name='L1751'>        <i><font color='green'>/* Release all mutexes, now that fork() has completed. */</font></i>
<a name='L1752'>        <a href='../D/2448.html' title='Multiple defined in 2 places.'>huge_postfork_parent</a>();
<a name='L1753'>        <a href='../D/1723.html' title='Multiple defined in 2 places.'>base_postfork_parent</a>();
<a name='L1754'>        <a href='../D/1855.html' title='Multiple defined in 2 places.'>chunk_postfork_parent</a>();
<a name='L1755'>        <a href='../D/3570.html' title='Multiple defined in 2 places.'>prof_postfork_parent</a>();
<a name='L1756'>        <b>for</b> (i = 0; i &lt; <a href='../S/138.html#L234' title='Defined at 234 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>narenas_total</a>; i++) <font color='red'>{</font>
<a name='L1757'>                <b>if</b> (<a href='../S/138.html#L55' title='Defined at 55 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas</a>[i] != NULL)
<a name='L1758'>                        <a href='../D/1633.html' title='Multiple defined in 2 places.'>arena_postfork_parent</a>(<a href='../S/138.html#L55' title='Defined at 55 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas</a>[i]);
<a name='L1759'>        <font color='red'>}</font>
<a name='L1760'>        <a href='../D/3275.html' title='Multiple defined in 2 places.'>malloc_mutex_postfork_parent</a>(&amp;<a href='../S/138.html#L60' title='Defined at 60 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas_lock</a>);
<a name='L1761'>        <a href='../D/2019.html' title='Multiple defined in 2 places.'>ctl_postfork_parent</a>();
<a name='L1762'><font color='red'>}</font>
<a name='L1763'>
<a name='L1764'><b>void</b>
<a name='L1765'><a href='../R/2298.html' title='Multiple refered from 2 places.'>jemalloc_postfork_child</a>(<b>void</b>)
<a name='L1766'><font color='red'>{</font>
<a name='L1767'>        <b>unsigned</b> i;
<a name='L1768'>
<a name='L1769'>        <a href='../D/1684.html' title='Multiple defined in 3 places.'>assert</a>(malloc_initialized);
<a name='L1770'>
<a name='L1771'>        <i><font color='green'>/* Release all mutexes, now that fork() has completed. */</font></i>
<a name='L1772'>        <a href='../D/2447.html' title='Multiple defined in 2 places.'>huge_postfork_child</a>();
<a name='L1773'>        <a href='../D/1722.html' title='Multiple defined in 2 places.'>base_postfork_child</a>();
<a name='L1774'>        <a href='../D/1854.html' title='Multiple defined in 2 places.'>chunk_postfork_child</a>();
<a name='L1775'>        <a href='../D/3569.html' title='Multiple defined in 2 places.'>prof_postfork_child</a>();
<a name='L1776'>        <b>for</b> (i = 0; i &lt; <a href='../S/138.html#L234' title='Defined at 234 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>narenas_total</a>; i++) <font color='red'>{</font>
<a name='L1777'>                <b>if</b> (<a href='../S/138.html#L55' title='Defined at 55 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas</a>[i] != NULL)
<a name='L1778'>                        <a href='../D/1632.html' title='Multiple defined in 2 places.'>arena_postfork_child</a>(<a href='../S/138.html#L55' title='Defined at 55 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas</a>[i]);
<a name='L1779'>        <font color='red'>}</font>
<a name='L1780'>        <a href='../D/3274.html' title='Multiple defined in 2 places.'>malloc_mutex_postfork_child</a>(&amp;<a href='../S/138.html#L60' title='Defined at 60 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas_lock</a>);
<a name='L1781'>        <a href='../D/2018.html' title='Multiple defined in 2 places.'>ctl_postfork_child</a>();
<a name='L1782'><font color='red'>}</font>
<a name='L1783'>
<a name='L1784'><i><font color='green'>/******************************************************************************/</font></i>
<a name='L1785'><i><font color='green'>/*</font></i>
<a name='L1786'><i><font color='green'> * The following functions are used for TLS allocation/deallocation in static</font></i>
<a name='L1787'><i><font color='green'> * binaries on FreeBSD.  The primary difference between these and i[mcd]alloc()</font></i>
<a name='L1788'><i><font color='green'> * is that these avoid accessing TLS variables.</font></i>
<a name='L1789'><i><font color='green'> */</font></i>
<a name='L1790'>
<a name='L1791'><b>static</b> <b>void</b> *
<a name='L1792'><a href='../R/1185.html' title='Multiple refered from 2 places.'>a0alloc</a>(size_t size, bool zero)
<a name='L1793'><font color='red'>{</font>
<a name='L1794'>
<a name='L1795'>        <b>if</b> (<a href='../S/213.html#L281' title='Defined at 281 in deps/jemalloc/src/jemalloc.c.'>malloc_init</a>())
<a name='L1796'>                <b>return</b> (NULL);
<a name='L1797'>
<a name='L1798'>        <b>if</b> (size == 0)
<a name='L1799'>                size = 1;
<a name='L1800'>
<a name='L1801'>        <b>if</b> (size &lt;= <a href='../S/138.html#L37' title='Defined at 37 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arena_maxclass</a>)
<a name='L1802'>                <b>return</b> (<a href='../D/1608.html' title='Multiple defined in 2 places.'>arena_malloc</a>(<a href='../S/138.html#L55' title='Defined at 55 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>arenas</a>[0], size, zero, <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>));
<a name='L1803'>        <b>else</b>
<a name='L1804'>                <b>return</b> (<a href='../D/2442.html' title='Multiple defined in 2 places.'>huge_malloc</a>(size, zero));
<a name='L1805'><font color='red'>}</font>
<a name='L1806'>
<a name='L1807'><b>void</b> *
<a name='L1808'><a href='../S/138.html#L3' title='Refered from 3 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>a0malloc</a>(size_t size)
<a name='L1809'><font color='red'>{</font>
<a name='L1810'>
<a name='L1811'>        <b>return</b> (<a href='../S/213.html#L1792' title='Defined at 1792 in deps/jemalloc/src/jemalloc.c.'>a0alloc</a>(size, <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>));
<a name='L1812'><font color='red'>}</font>
<a name='L1813'>
<a name='L1814'><b>void</b> *
<a name='L1815'><a href='../S/138.html#L1' title='Refered from 1 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>a0calloc</a>(size_t num, size_t size)
<a name='L1816'><font color='red'>{</font>
<a name='L1817'>
<a name='L1818'>        <b>return</b> (<a href='../S/213.html#L1792' title='Defined at 1792 in deps/jemalloc/src/jemalloc.c.'>a0alloc</a>(num * size, <a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>));
<a name='L1819'><font color='red'>}</font>
<a name='L1820'>
<a name='L1821'><b>void</b>
<a name='L1822'><a href='../S/138.html#L2' title='Refered from 2 in deps/jemalloc/include/jemalloc/internal/private_namespace.h.'>a0free</a>(<b>void</b> *ptr)
<a name='L1823'><font color='red'>{</font>
<a name='L1824'>        <a href='../S/146.html#L47' title='Defined at 47 in deps/jemalloc/include/jemalloc/internal/arena.h.'>arena_chunk_t</a> *<a href='../S/304.html#L1325' title='Defined at 1325 in deps/lua/src/lparser.c.'>chunk</a>;
<a name='L1825'>
<a name='L1826'>        <b>if</b> (ptr == NULL)
<a name='L1827'>                <b>return</b>;
<a name='L1828'>
<a name='L1829'>        <a href='../S/304.html#L1325' title='Defined at 1325 in deps/lua/src/lparser.c.'>chunk</a> = (<a href='../S/146.html#L47' title='Defined at 47 in deps/jemalloc/include/jemalloc/internal/arena.h.'>arena_chunk_t</a> *)<a href='../S/142.html#L11' title='Defined at 11 in deps/jemalloc/include/jemalloc/internal/chunk.h.'>CHUNK_ADDR2BASE</a>(ptr);
<a name='L1830'>        <b>if</b> (<a href='../S/304.html#L1325' title='Defined at 1325 in deps/lua/src/lparser.c.'>chunk</a> != ptr)
<a name='L1831'>                <a href='../D/1594.html' title='Multiple defined in 2 places.'>arena_dalloc</a>(<a href='../S/304.html#L1325' title='Defined at 1325 in deps/lua/src/lparser.c.'>chunk</a>-&gt;arena, <a href='../S/304.html#L1325' title='Defined at 1325 in deps/lua/src/lparser.c.'>chunk</a>, ptr, <a href='../S/159.html#L12' title='Defined at 12 in deps/jemalloc/include/msvc_compat/stdbool.h.'>false</a>);
<a name='L1832'>        <b>else</b>
<a name='L1833'>                <a href='../D/2441.html' title='Multiple defined in 2 places.'>huge_dalloc</a>(ptr, <a href='../S/159.html#L11' title='Defined at 11 in deps/jemalloc/include/msvc_compat/stdbool.h.'>true</a>);
<a name='L1834'><font color='red'>}</font>
<a name='L1835'>
<a name='L1836'><i><font color='green'>/******************************************************************************/</font></i>
</pre>
<hr>
<a name='BOTTOM'>
<i><font color='green'>/* [&lt;][&gt;]<a href='#L59'>[^]</a><a href='#L1822'>[v]</a><a href='#TOP'>[top]</a>[bottom]<a href='../mains.html'>[index]</a><a href='../help.html'>[help]</a> */</font></i>
</body>
</html>
